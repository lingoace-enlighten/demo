window.__require=function t(e,o,n){function i(s,r){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){return i(e[s][1][t]||t)},d,d.exports,t,e,o,n)}return o[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({Snake1Head:[function(t,e,o){"use strict";cc._RF.push(e,"47630Q1sKRIq6MlBU8Txpi7","Snake1Head");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Snake1Main"),r=cc._decorator,c=r.ccclass,h=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.snake=null,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.onCollisionEnter=function(t,e){this.snake.getComponent(s.default).collisionEnter(t,e)},e.prototype.start=function(){},e.prototype.startSnake=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.stopSnake=function(){cc.director.getCollisionManager().enabled=!1},a([h({type:cc.Node,displayName:"snake"})],e.prototype,"snake",void 0),a([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Snake1Main":"Snake1Main"}],Snake1Main:[function(t,e,o){"use strict";cc._RF.push(e,"0aebaJPFkVLTamYljLFCcre","Snake1Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function r(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,r)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(r){a=[6,r],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../module/component/scripts/GameCompBase"),h=t("../../../../module/kit/audio/AudioManager"),d=t("./Snake1Head"),l=cc._decorator,p=l.ccclass,f=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftBoard=null,e.head=null,e.bg=null,e.board=null,e.joyStickPanel=null,e.joyStickBtn=null,e.foodBoard=null,e.bigFoodBoard=null,e.textBoard=null,e.endSpin=null,e.endText=[],e.englishText=null,e.bodyPrefab=null,e.foodPrefab=null,e.bigFoodPrefab=null,e.textPrefab=null,e.handCtr=null,e.leftMask=[],e.dir=null,e.speed=0,e.pointsArray=[],e.headPointsNum=0,e.snakeArray=[],e.foodPos=[],e.foodX=null,e.foodY=null,e.foodIndex=0,e.bigFoodIndex=0,e.textIndex=0,e.textIndex1=0,e.bigTextIndex=0,e.bigTextIndex1=0,e.gameBegin=!1,e.canClick=!1,e.isClick=!1,e.feedBack=null,e}return i(e,t),e.prototype.InitData=function(t){this.snake_config=t,cc.log(this.snake_config),this.speed=this.snake_config.sectionLen/this.snake_config.time,this.creatTip(),this.head.setPosition(1,1),this.rotateHead(this.head.position),this.snakeArray.push(this.head);for(var e=0;e<this.snake_config.bodyNum;e++)this.getNewBody();for(e=0;e<this.snake_config.foodNum;e++)this.creatNewFood(this.foodPrefab,this.foodBoard);for(e=0;e<this.snake_config.bigFoodNum;e++)this.creatNewFood(this.bigFoodPrefab,this.bigFoodBoard);for(e=0;e<this.snake_config.textNum;e++)this.creatNewFood(this.textPrefab,this.textBoard,!0);for(e=0;e<this.endText.length;e++)this.endText[e].string=this.snake_config.endText[e]},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.initHandComponent().then(function(t){e.handCtr=t,e.handCtr.node.scale=.5}),this.initFeedBackComponent().then(function(t){e.feedBack=t,e.feedBack.node.parent=e.board,e.feedBack.node.scale=.5})},e.prototype.onGameStart=function(){t.prototype.onGameStart.call(this),this.gameInit()},e.prototype.gameEnd=function(){t.prototype.gameEnd.call(this)},e.prototype.gameInit=function(){var t=this;h.default.playMusic(this.snake_config.bundleName,"res/audios/BGM_tanchishe_01_ytz"),h.default.playEffect(this.snake_config.bundleName,"res/audios/eat_the_letters_ytz",function(){var e=cc.v2(100,0),o=cc.v2(300,200);t.handCtr.node.active=!0,t.handCtr.TouchCycle(e,o,3,.5),t.canClick=!0}),this.creatBgTouch()},e.prototype.creatTip=function(){return s(this,void 0,void 0,function(){var t,e;return r(this,function(){for(t=0;t<this.snake_config.foodText.length;t++)(e=cc.instantiate(this.englishText)).setParent(this.leftBoard),this.leftMask.push(e),e.getChildByName("mask").active=!0,e.getChildByName("light").active=!0,e.getComponent(cc.Sprite).enabled=!0,e.getChildByName("text").opacity=255,e.getChildByName("text").getComponent(cc.Label).string=this.snake_config.foodText[t],this.maxMaskHeight=e.height;return[2]})})},e.prototype.creatBgTouch=function(){this.bg.on("touchstart",this.onTouchStart,this),this.bg.on("touchmove",this.onTouchMove,this),this.bg.on("touchend",this.onTouchEnd,this),this.bg.on("touchcancel",this.onTouchCancel,this)},e.prototype.onTouchStart=function(t){if(this.canClick){this.gameBegin=!0,this.isClick=!0,this.handCtr.node.active=!1;var e=this.bg.convertToNodeSpaceAR(t.getLocation());cc.log("\u70b9\u51fb\u5c40\u90e8\u5750\u6807\uff1a ",e.x,e.y),this.joyStickPanel.x=e.x-this.joyStickPanel.width/2,this.joyStickPanel.y=e.y}},e.prototype.onTouchMove=function(t){if(this.isClick){var e=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(e)),this.dir=this.joyStickBtn.position.normalize()}},e.prototype.onTouchEnd=function(){this.joyStickBtn.setPosition(cc.v2(this.head.x,this.head.y))},e.prototype.onTouchCancel=function(){this.joyStickBtn.setPosition(cc.v2(0,0))},e.prototype.creatNewFood=function(t,e,o){var n=cc.instantiate(t);if(n.getComponent("SnakeNewFood").InitData(this.snake_config),e.addChild(n),o||n.setPosition(this.randomPos()),this.foodPos.push([this.foodX,this.foodY]),o){n.setPosition(this.randomPos());var i=this.changeText();n.getComponent("SnakeNewFood").change(this.board.width,this.board.height),n.getComponent("SnakeNewFood").creatTextFood(i);var a=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],s=Math.floor(8*Math.random()),r=n.getComponent(cc.RigidBody).linearVelocity;r.x=100*a[s][0],r.y=100*a[s][1],n.getComponent(cc.RigidBody).linearVelocity=r}},e.prototype.randomPos=function(){var t=this.board.width-100,e=this.board.height-100;return this.foodX=0,this.foodY=0,this.changePos(t,e),cc.v2(this.foodX,this.foodY)},e.prototype.changePos=function(t,e){for(var o=!0,n=Math.round(Math.random()*t)-t/2,i=Math.round(Math.random()*e)-e/2,a=0;a<this.foodPos.length;a++)o&&n<=this.foodPos[a][0]+100&&n>=this.foodPos[a][0]-100&&i<=this.foodPos[a][1]+100&&i>=this.foodPos[a][1]-100&&(o=!1);n<=this.head.x+100&&n>=this.head.x-100&&i>=this.head.y-100&&i<=this.head.y+100&&(o=!1),o?(this.foodX=n,this.foodY=i):this.changePos(t,e)},e.prototype.changeText=function(){for(var t=[],e=0;e<this.leftMask.length;e++)this.leftMask[e].getChildByName("mask").height>0&&t.push(this.snake_config.foodText[e]);if(t.length>=1)return t[o=Math.floor(Math.random()*t.length)];this.end(),this.head.getComponent(d.default).stopSnake(),this.gameBegin=!1;var o=Math.floor(Math.random()*this.snake_config.foodText.length);return this.snake_config.foodText[o]},e.prototype.getNewBody=function(){var t=cc.instantiate(this.bodyPrefab);if(1==this.snakeArray.length){var e=this.head.position.normalize();t.setPosition(this.head.position.sub(e.mul(this.snake_config.sectionLen)))}else{var o=this.snakeArray[this.snakeArray.length-1];e=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize(),t.setPosition(o.position.sub(e.mul(this.snake_config.sectionLen)))}t.color=this.head.color,this.board.addChild(t),this.snakeArray.push(t),this.snakeArray.length>this.snake_config.bodyNum?this.snakeArray[this.snakeArray.length-1].curIndex=this.snakeArray[this.snakeArray.length-2].curIndex:this.snakeArray[this.snakeArray.length-1].curIndex=0,this.recordPoints(),this.changeZIndex()},e.prototype.recordPoints=function(){for(var t=0,e=0;t<this.snake_config.sectionLen;){t+=this.speed;var o=this.snakeArray[this.snakeArray.length-1],n=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize(),i=o.position.add(n.mul(t));this.pointsArray.splice(e,0,i),e+=1}},e.prototype.changeZIndex=function(){for(var t=0;t<this.snakeArray.length;t++)this.snakeArray[t].zIndex=cc.macro.MAX_ZINDEX-t},e.prototype.moveSnake=function(){var t=this.dir.mul(this.speed);this.head.setPosition(this.head.position.add(t)),this.head.x>this.board.width/2?this.head.x=-this.board.width/2:this.head.x<-this.board.width/2&&(this.head.x=this.board.width/2),this.head.y>this.board.height/2?this.head.y=-this.board.height/2:this.head.y<-this.board.height/2&&(this.head.y=this.board.height/2),this.pointsArray.push(this.head.position),this.headPointsNum+=1;for(var e=1;e<this.snakeArray.length;e++){var o=Math.floor((this.pointsArray.length-this.headPointsNum)/(this.snakeArray.length-1)*(this.snakeArray.length-1-e));this.snakeArray[e].setPosition(this.pointsArray[o+this.snakeArray[e].curIndex]),this.snakeArray[e].curIndex+=1}},e.prototype.rotateHead=function(t){var e=180*cc.v2(1,0).signAngle(t)/Math.PI;this.head.angle=e-90},e.prototype.collisionEnter=function(t){if(this.gameBegin)switch(t.node.name){case"snake_food":this.eatFood(t.node);break;case"snake_bigFood":this.eatBigFood(t.node);break;case"snake_text":this.eatText(t.node)}},e.prototype.eatFood=function(t){this.foodIndex++,h.default.playEffect(this.snake_config.bundleName,"res/audios/SE_tanchishe_02_ytz",function(){}),this.foodIndex==this.snake_config.foodMax&&(this.foodIndex=0,this.getNewBody()),this.creatNewFood(this.foodPrefab,this.foodBoard);for(var e=0;e<this.foodPos.length;e++)t.x==this.foodPos[e][0]&&t.y==this.foodPos[e][1]&&this.foodPos.splice(e,1);t.removeFromParent()},e.prototype.eatBigFood=function(t){h.default.playEffect(this.snake_config.bundleName,"res/audios/SE_tanchishe_01_ytz",function(){}),this.creatNewFood(this.bigFoodPrefab,this.bigFoodBoard);for(var e=0;e<this.foodPos.length;e++)t.x==this.foodPos[e][0]&&t.y==this.foodPos[e][1]&&this.foodPos.splice(e,1);for(var o=Number(t.getChildByName("color").getComponent(cc.Label).string),n=0;n<this.snakeArray.length;n++)this.snakeArray[n].color=cc.color(this.snake_config.snakeColor[o][0],this.snake_config.snakeColor[o][1],this.snake_config.snakeColor[o][2]);t.removeFromParent()},e.prototype.eatText=function(t){for(var e=0;e<this.snake_config.textMax;e++)this.getNewBody();for(e=0;e<this.leftMask.length;e++)t.getChildByName("text").getComponent(cc.Label).string==this.leftMask[e].getChildByName("text").getComponent(cc.Label).string&&(this.leftMask[e].getChildByName("mask").height=this.leftMask[e].getChildByName("mask").height-this.maxMaskHeight/this.snake_config.gameIndex,cc.tween(this.leftMask[e].getChildByName("light")).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).start());for(this.creatNewFood(this.textPrefab,this.textBoard,!0),h.default.playEffect(this.snake_config.bundleName,"res/audios/game_right"),e=0;e<this.snake_config.foodText.length;e++)t.getChildByName("text").getComponent(cc.Label).string==this.snake_config.foodText[e]&&h.default.playAudioSound(this.snake_config.gameBundle,"res/audios/"+this.snake_config.textAudio[e]);this.feedBack.node.active=!0,this.feedBack.showRightAnimation(this.head.position),t.removeFromParent()},e.prototype.end=function(){var t=this;h.default.playEffect(this.snake_config.bundleName,"res/audios/well_done_ytz",function(){cc.tween(t.board).to(1,{opacity:0}).call(function(){return s(t,void 0,void 0,function(){var t=this;return r(this,function(e){switch(e.label){case 0:return this.board.removeAllChildren(),this.scheduleOnce(function(){h.default.playEffect(t.snake_config.gameBundle,"res/audios/"+t.snake_config.textAudio[0],function(){})},.5),this.scheduleOnce(function(){h.default.playEffect(t.snake_config.gameBundle,"res/audios/"+t.snake_config.textAudio[2])},2),this.endSpin.active=!0,[4,this.playSpin(this.endSpin.getChildByName("end0").getComponent(sp.Skeleton),"kong_dong",!1)];case 1:return e.sent(),[4,this.playSpin(this.endSpin.getChildByName("end1").getComponent(sp.Skeleton),"kong_dong",!1)];case 2:return e.sent(),this.gameEnd(),[2]}})})}).start(),cc.tween(t.leftBoard).to(1,{opacity:0}).start()})},e.prototype.update=function(){var t=this.joyStickBtn.position.mag()/(this.joyStickPanel.width/2);t>1&&this.joyStickBtn.setPosition(this.joyStickBtn.position.div(t)),this.dir&&(this.rotateHead(this.dir),this.moveSnake())},e.prototype.playSpin=function(t,e,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=0),!o)return new Promise(function(i){var a=t.setAnimation(n,e,o);t.setTrackCompleteListener(a,function(){i(null)})});Promise.resolve().then(function(){t.setAnimation(n,e,o)})},a([f({type:cc.Node,displayName:"\u5de6\u4fa7\u770b\u677f"})],e.prototype,"leftBoard",void 0),a([f({type:cc.Node,displayName:"\u86c7\u5934"})],e.prototype,"head",void 0),a([f({type:cc.Node,displayName:"\u80cc\u666f"})],e.prototype,"bg",void 0),a([f({type:cc.Node,displayName:"\u64cd\u4f5c\u7248"})],e.prototype,"board",void 0),a([f({type:cc.Node,displayName:"joyStickPanel"})],e.prototype,"joyStickPanel",void 0),a([f({type:cc.Node,displayName:"joyStickBtn"})],e.prototype,"joyStickBtn",void 0),a([f({type:cc.Node,displayName:"foodBoard"})],e.prototype,"foodBoard",void 0),a([f({type:cc.Node,displayName:"bigFoodBoard"})],e.prototype,"bigFoodBoard",void 0),a([f({type:cc.Node,displayName:"textBoard"})],e.prototype,"textBoard",void 0),a([f({type:cc.Node,displayName:"endSpin"})],e.prototype,"endSpin",void 0),a([f({type:[cc.Label],displayName:"endText"})],e.prototype,"endText",void 0),a([f({type:cc.Prefab,displayName:"leftEnglish"})],e.prototype,"englishText",void 0),a([f({type:cc.Prefab,displayName:"body"})],e.prototype,"bodyPrefab",void 0),a([f({type:cc.Prefab,displayName:"food"})],e.prototype,"foodPrefab",void 0),a([f({type:cc.Prefab,displayName:"bigFood"})],e.prototype,"bigFoodPrefab",void 0),a([f({type:cc.Prefab,displayName:"text"})],e.prototype,"textPrefab",void 0),a([p],e)}(c.default);o.default=u,cc._RF.pop()},{"../../../../module/component/scripts/GameCompBase":void 0,"../../../../module/kit/audio/AudioManager":void 0,"./Snake1Head":"Snake1Head"}],Snake2Head:[function(t,e,o){"use strict";cc._RF.push(e,"d20c8ugybROIZSDCaUt3fre","Snake2Head");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Snake2Main"),r=cc._decorator,c=r.ccclass,h=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.snake=null,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.onCollisionEnter=function(t,e){this.snake.getComponent(s.default).collisionEnter(t,e)},e.prototype.start=function(){},e.prototype.startSnake=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.stopSnake=function(){cc.director.getCollisionManager().enabled=!1},a([h({type:cc.Node,displayName:"snake"})],e.prototype,"snake",void 0),a([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Snake2Main":"Snake2Main"}],Snake2Main:[function(t,e,o){"use strict";cc._RF.push(e,"1afbfai6FRJJLrX5it5T+Xq","Snake2Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function r(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,r)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(r){a=[6,r],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../module/component/scripts/GameCompBase"),h=t("../../../../module/kit/assets/AssetsManger"),d=t("../../../../module/kit/audio/AudioManager"),l=t("../../../../module/kit/event/BaseEvent"),p=t("../../../../module/kit/event/ListenerManager"),f=t("./Snake2Head"),u=cc._decorator,g=u.ccclass,y=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftBoard=null,e.head=null,e.bg=null,e.board=null,e.joyStickPanel=null,e.joyStickBtn=null,e.foodBoard=null,e.bigFoodBoard=null,e.textBoard=null,e.endBox=null,e.englishText=null,e.bodyPrefab=null,e.foodPrefab=null,e.bigFoodPrefab=null,e.textPrefab=null,e.endImagePrefab=null,e.handCtr=null,e.word=null,e.leftMask=[],e.dir=null,e.pointsArray=[],e.headPointsNum=0,e.snakeArray=[],e.foodPos=[],e.foodX=null,e.foodY=null,e.foodIndex=0,e.bigFoodIndex=0,e.textIndex=0,e.textIndex1=0,e.bigTextIndex=0,e.bigTextIndex1=0,e.gameBegin=!1,e.canClick=!1,e.isClick=!1,e.feedBack=null,e.mustStop=!1,e.eatIndex=[],e.endTweenTime=0,e}return i(e,t),e.prototype.InitData=function(t){var e=this;this.snake_config=t,cc.log(this.snake_config),this.speed=this.snake_config.sectionLen/this.snake_config.time,this.creatTip().then(function(){for(var t=0;t<e.snake_config.textNum;t++)e.creatNewFood(e.textPrefab,e.textBoard,!0)}),this.creatEnd(),this.head.setPosition(1,1),this.rotateHead(this.head.position),this.snakeArray.push(this.head);for(var o=0;o<this.snake_config.bodyNum;o++)this.getNewBody();for(o=0;o<this.snake_config.foodNum;o++)this.creatNewFood(this.foodPrefab,this.foodBoard);for(o=0;o<this.snake_config.bigFoodNum;o++)this.creatNewFood(this.bigFoodPrefab,this.bigFoodBoard)},e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),cc.director.getPhysicsManager().enabled=!0,p.ListenerManager.on(l.BaseEvent.EVENT_FOLLOW_UP_RIGHT,function(){e.followUpRight()},this)},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.initHandComponent().then(function(t){e.handCtr=t,e.handCtr.node.scale=.5}),this.initFeedBackComponent().then(function(t){e.feedBack=t,e.feedBack.node.parent=e.board,e.feedBack.node.scale=.5}),this.initColorWordComponent().then(function(t){e.word=t}),this.initRecordComponent()},e.prototype.onGameStart=function(){t.prototype.onGameStart.call(this),this.gameInit()},e.prototype.gameEnd=function(){t.prototype.gameEnd.call(this)},e.prototype.gameInit=function(){var t=this;d.default.playMusic(this.snake_config.bundleName,"res/audios/BGM_tanchishe_01_ytz"),d.default.playEffect(this.snake_config.bundleName,"res/audios/drag_and_pop_the_bubbles_ytz",function(){var e=cc.v2(100,0),o=cc.v2(300,200);t.handCtr.node.active=!0,t.handCtr.TouchCycle(e,o,3,.5),t.canClick=!0}),this.creatBgTouch()},e.prototype.creatTip=function(){return s(this,void 0,void 0,function(){var t,e,o,n,i=this;return r(this,function(a){switch(a.label){case 0:t=this.snake_config.tipMargin*(this.snake_config.textImage.length-1),e=function(e){var n;return r(this,function(a){switch(a.label){case 0:return(n=cc.instantiate(o.englishText)).setParent(o.leftBoard),o.leftMask.push(n),o.eatIndex.push(0),n.getChildByName("text").getComponent(cc.Label).string=o.snake_config.textImage[e],[4,h.default.instance.loadImg("res/images/"+o.snake_config.textImage[e],o.snake_config.gameBundle).then(function(o){n.getChildByName("image0").getComponent(cc.Sprite).spriteFrame=o,n.getChildByName("image1").getComponent(cc.Sprite).spriteFrame=o,n.getChildByName("image0").height=n.getChildByName("image0").height*i.snake_config.tipScale,n.getChildByName("image0").width=n.getChildByName("image0").width*i.snake_config.tipScale,n.getChildByName("image1").height=n.getChildByName("image1").height*i.snake_config.tipScale,n.getChildByName("image1").width=n.getChildByName("image1").width*i.snake_config.tipScale,n.height=n.getChildByName("image1").height*i.snake_config.tipScale,n.width=n.getChildByName("image1").width*i.snake_config.tipScale,t+=n.height,e==i.snake_config.textImage.length-1&&(i.leftBoard.getComponent(cc.Layout).spacingY=i.snake_config.tipMargin,i.leftBoard.getComponent(cc.Layout).paddingTop=(i.leftBoard.height-t)/2)})];case 1:return a.sent(),[2]}})},o=this,n=0,a.label=1;case 1:return n<this.snake_config.textImage.length?[5,e(n)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.creatBgTouch=function(){this.bg.on("touchstart",this.onTouchStart,this),this.bg.on("touchmove",this.onTouchMove,this),this.bg.on("touchend",this.onTouchEnd,this),this.bg.on("touchcancel",this.onTouchCancel,this)},e.prototype.onTouchStart=function(t){if(this.canClick){this.isClick=!0;var e=this.bg.convertToNodeSpaceAR(t.getLocation());cc.log("\u70b9\u51fb\u5c40\u90e8\u5750\u6807\uff1a ",e.x,e.y),this.joyStickPanel.x=e.x-this.joyStickPanel.width/2,this.joyStickPanel.y=e.y}},e.prototype.onTouchMove=function(t){if(this.isClick){this.gameBegin=!0,this.handCtr.node.active=!1;var e=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(e)),this.dir=this.joyStickBtn.position.normalize()}},e.prototype.onTouchEnd=function(){this.joyStickBtn.setPosition(cc.v2(this.head.x,this.head.y))},e.prototype.onTouchCancel=function(){this.joyStickBtn.setPosition(cc.v2(0,0))},e.prototype.creatNewFood=function(t,e,o){var n=cc.instantiate(t);if(n.getComponent("SnakeNewFood").InitData(this.snake_config),e.addChild(n),o||n.setPosition(this.randomPos()),this.foodPos.push([this.foodX,this.foodY]),o){n.setPosition(this.randomPos());var i=this.changeText();n.getComponent("SnakeNewFood").change(this.board.width,this.board.height),n.getComponent("SnakeNewFood").creatTextFood(i);var a=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],s=Math.floor(8*Math.random()),r=n.getComponent(cc.RigidBody).linearVelocity;r.x=100*a[s][0],r.y=100*a[s][1],n.getComponent(cc.RigidBody).linearVelocity=r}},e.prototype.randomPos=function(){var t=this.board.width-100,e=this.board.height-100;return this.foodX=0,this.foodY=0,this.changePos(t,e),cc.v2(this.foodX,this.foodY)},e.prototype.changePos=function(t,e){for(var o=!0,n=Math.round(Math.random()*t)-t/2,i=Math.round(Math.random()*e)-e/2,a=0;a<this.foodPos.length;a++)o&&n<=this.foodPos[a][0]+100&&n>=this.foodPos[a][0]-100&&i<=this.foodPos[a][1]+100&&i>=this.foodPos[a][1]-100&&(o=!1);n<=this.head.x+100&&n>=this.head.x-100&&i>=this.head.y-100&&i<=this.head.y+100&&(o=!1),o?(this.foodX=n,this.foodY=i):this.changePos(t,e)},e.prototype.changeText=function(){for(var t=[],e=0;e<this.leftMask.length;e++)this.leftMask[e].getChildByName("image1").getComponent(cc.Sprite).fillRange<1&&t.push(this.snake_config.textImage[e]);if(t.length>=1)return t[o=Math.floor(Math.random()*t.length)];this.gameBegin=!1;var o=Math.floor(Math.random()*this.snake_config.textImage.length);return this.snake_config.textImage[o]},e.prototype.getNewBody=function(){var t=cc.instantiate(this.bodyPrefab);if(1==this.snakeArray.length){var e=this.head.position.normalize();t.setPosition(this.head.position.sub(e.mul(this.snake_config.sectionLen)))}else{var o=this.snakeArray[this.snakeArray.length-1];e=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize(),t.setPosition(o.position.sub(e.mul(this.snake_config.sectionLen)))}t.color=this.head.color,this.board.addChild(t),this.snakeArray.push(t),this.snakeArray.length>this.snake_config.bodyNum?this.snakeArray[this.snakeArray.length-1].curIndex=this.snakeArray[this.snakeArray.length-2].curIndex:this.snakeArray[this.snakeArray.length-1].curIndex=0,this.recordPoints(),this.changeZIndex()},e.prototype.recordPoints=function(){for(var t=0,e=0;t<this.snake_config.sectionLen;){t+=this.speed;var o=this.snakeArray[this.snakeArray.length-1],n=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize(),i=o.position.add(n.mul(t));this.pointsArray.splice(e,0,i),e+=1}},e.prototype.changeZIndex=function(){for(var t=0;t<this.snakeArray.length;t++)this.snakeArray[t].zIndex=cc.macro.MAX_ZINDEX-t},e.prototype.moveSnake=function(){var t=this.dir.mul(this.speed);this.head.setPosition(this.head.position.add(t)),this.head.x>this.board.width/2?this.head.x=-this.board.width/2:this.head.x<-this.board.width/2&&(this.head.x=this.board.width/2),this.head.y>this.board.height/2?this.head.y=-this.board.height/2:this.head.y<-this.board.height/2&&(this.head.y=this.board.height/2),this.pointsArray.push(this.head.position),this.headPointsNum+=1;for(var e=1;e<this.snakeArray.length;e++){var o=Math.floor((this.pointsArray.length-this.headPointsNum)/(this.snakeArray.length-1)*(this.snakeArray.length-1-e));this.snakeArray[e].setPosition(this.pointsArray[o+this.snakeArray[e].curIndex]),this.snakeArray[e].curIndex+=1}},e.prototype.rotateHead=function(t){var e=180*cc.v2(1,0).signAngle(t)/Math.PI;this.head.angle=e-90},e.prototype.collisionEnter=function(t){if(this.gameBegin)switch(t.node.name){case"snake_food":this.eatFood(t.node);break;case"snake_bigFood":this.eatBigFood(t.node);break;case"snake_text":this.eatText(t.node)}},e.prototype.eatFood=function(t){this.foodIndex++,d.default.playEffect(this.snake_config.bundleName,"res/audios/SE_tanchishe_02_ytz",function(){}),this.foodIndex==this.snake_config.foodMax&&(this.foodIndex=0,this.getNewBody()),this.creatNewFood(this.foodPrefab,this.foodBoard);for(var e=0;e<this.foodPos.length;e++)t.x==this.foodPos[e][0]&&t.y==this.foodPos[e][1]&&this.foodPos.splice(e,1);t.removeFromParent()},e.prototype.eatBigFood=function(t){d.default.playEffect(this.snake_config.bundleName,"res/audios/SE_tanchishe_01_ytz",function(){}),this.creatNewFood(this.bigFoodPrefab,this.bigFoodBoard);for(var e=0;e<this.foodPos.length;e++)t.x==this.foodPos[e][0]&&t.y==this.foodPos[e][1]&&this.foodPos.splice(e,1);for(var o=Number(t.getChildByName("color").getComponent(cc.Label).string),n=0;n<this.snakeArray.length;n++)this.snakeArray[n].color=cc.color(this.snake_config.snakeColor[o][0],this.snake_config.snakeColor[o][1],this.snake_config.snakeColor[o][2]);t.removeFromParent()},e.prototype.eatText=function(t){this.creatNewFood(this.textPrefab,this.textBoard,!0);for(var e=0;e<this.snake_config.textMax;e++)this.getNewBody();for(e=0;e<this.leftMask.length;e++)t.getChildByName("text").getComponent(cc.Label).string==this.leftMask[e].getChildByName("text").getComponent(cc.Label).string&&(this.leftMask[e].getChildByName("image1").getComponent(cc.Sprite).fillRange+=1/this.snake_config.gameIndex,this.eatIndex[e]++,this.eatIndex[e]==this.snake_config.gameIndex?(this.word.node.active=!1,this.beginFollowUp(e)):this.word.showWordAni(this.snake_config.followUpText[e]));for(d.default.playEffect(this.snake_config.bundleName,"res/audios/game_right"),e=0;e<this.snake_config.textImage.length;e++)t.getChildByName("text").getComponent(cc.Label).string==this.snake_config.textImage[e]&&d.default.playAudioSound(this.bundleName,"res/audios/"+this.snake_config.textAudio[e]);this.feedBack.node.active=!0,this.feedBack.showRightAnimation(this.head.position),t.removeFromParent()},e.prototype.beginFollowUp=function(t){var e=this;this.mustStop=!0,this.canClick=!1,this.isClick=!1,this.head.getComponent(f.default).stopSnake(),this.scheduleOnce(function(){p.ListenerManager.dispatch(l.BaseEvent.EVENT_FOLLOW_UP,{text:e.snake_config.followUpText[t],textString:e.snake_config.followUpText[t],word:!0,img:"res/images/"+e.snake_config.followUpImage[t],imgScale:1,music:"res/audios/"+e.snake_config.followUpAudio[t],time:3,lesson:"L2"})},1)},e.prototype.followUpRight=function(){var t=this;this.scheduleOnce(function(){t.mustStop=!1,t.canClick=!0,t.head.getComponent(f.default).startSnake();for(var e=0;e<t.eatIndex.length;e++)for(;t.eatIndex[e]<t.snake_config.gameIndex;)return;t.head.getComponent(f.default).stopSnake(),t.end()},1)},e.prototype.end=function(){var t=this;cc.tween(this.board).to(.5,{opacity:0}).call(function(){t.board.active=!1,t.endBox.opacity=255,t.endTween()}).start(),cc.tween(this.leftBoard).by(.5,{x:-500}).start()},e.prototype.creatEnd=function(){return s(this,void 0,void 0,function(){var t,e,o,n,i=this;return r(this,function(a){switch(a.label){case 0:t=this.snake_config.endMargin*(this.snake_config.textImage.length-1),e=function(e){var n;return r(this,function(a){switch(a.label){case 0:return(n=cc.instantiate(o.endImagePrefab)).parent=o.endBox.getChildByName("imageBox"),[4,h.default.instance.loadImg("res/images/"+o.snake_config.textImage[e],o.snake_config.gameBundle).then(function(o){n.getComponent(cc.Sprite).spriteFrame=o,n.width=n.width*i.snake_config.endImageScale,n.height=n.height*i.snake_config.endImageScale,t+=n.width/n.scale,e==i.snake_config.textImage.length-1&&(i.endBox.getChildByName("imageBox").getComponent(cc.Layout).spacingX=i.snake_config.endMargin,i.endBox.getChildByName("imageBox").getComponent(cc.Layout).paddingLeft=(i.endBox.getChildByName("imageBox").width-t)/2)})];case 1:return a.sent(),[2]}})},o=this,n=0,a.label=1;case 1:return n<this.snake_config.textImage.length?[5,e(n)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.endTween=function(){var t=this;cc.tween(this.endBox.getChildByName("imageBox").children[this.endTweenTime]).to(.3,{scale:this.snake_config.endImageScale+.2}).call(function(){t.word.showWordAni(t.snake_config.followUpText[t.endTweenTime]),d.default.playAudioSound(t.snake_config.gameBundle,"res/audios/"+t.snake_config.followUpAudio[t.endTweenTime],function(){t.endTweenTime<t.endBox.getChildByName("imageBox").children.length-1?(cc.tween(t.endBox.getChildByName("imageBox").children[t.endTweenTime]).to(.2,{scale:t.snake_config.endImageScale}).start(),t.endTweenTime++,t.endTween()):cc.tween(t.endBox.getChildByName("imageBox").children[t.endTweenTime]).to(.2,{scale:t.snake_config.endImageScale}).call(function(){t.gameEnd()}).start()})},this).start()},e.prototype.update=function(){if(!this.mustStop){var t=this.joyStickBtn.position.mag()/(this.joyStickPanel.width/2);t>1&&this.joyStickBtn.setPosition(this.joyStickBtn.position.div(t)),this.dir&&(this.rotateHead(this.dir),this.moveSnake())}},e.prototype.playSpin=function(t,e,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=0),!o)return new Promise(function(i){var a=t.setAnimation(n,e,o);t.setTrackCompleteListener(a,function(){i(null)})});Promise.resolve().then(function(){t.setAnimation(n,e,o)})},a([y({type:cc.Node,displayName:"\u5de6\u4fa7\u770b\u677f"})],e.prototype,"leftBoard",void 0),a([y({type:cc.Node,displayName:"\u86c7\u5934"})],e.prototype,"head",void 0),a([y({type:cc.Node,displayName:"\u80cc\u666f"})],e.prototype,"bg",void 0),a([y({type:cc.Node,displayName:"\u64cd\u4f5c\u7248"})],e.prototype,"board",void 0),a([y({type:cc.Node,displayName:"joyStickPanel"})],e.prototype,"joyStickPanel",void 0),a([y({type:cc.Node,displayName:"joyStickBtn"})],e.prototype,"joyStickBtn",void 0),a([y({type:cc.Node,displayName:"foodBoard"})],e.prototype,"foodBoard",void 0),a([y({type:cc.Node,displayName:"bigFoodBoard"})],e.prototype,"bigFoodBoard",void 0),a([y({type:cc.Node,displayName:"textBoard"})],e.prototype,"textBoard",void 0),a([y({type:cc.Node,displayName:"end"})],e.prototype,"endBox",void 0),a([y({type:cc.Prefab,displayName:"leftEnglish"})],e.prototype,"englishText",void 0),a([y({type:cc.Prefab,displayName:"body"})],e.prototype,"bodyPrefab",void 0),a([y({type:cc.Prefab,displayName:"food"})],e.prototype,"foodPrefab",void 0),a([y({type:cc.Prefab,displayName:"bigFood"})],e.prototype,"bigFoodPrefab",void 0),a([y({type:cc.Prefab,displayName:"text"})],e.prototype,"textPrefab",void 0),a([y({type:cc.Prefab,displayName:"endImage"})],e.prototype,"endImagePrefab",void 0),a([g],e)}(c.default);o.default=m,cc._RF.pop()},{"../../../../module/component/scripts/GameCompBase":void 0,"../../../../module/kit/assets/AssetsManger":void 0,"../../../../module/kit/audio/AudioManager":void 0,"../../../../module/kit/event/BaseEvent":void 0,"../../../../module/kit/event/ListenerManager":void 0,"./Snake2Head":"Snake2Head"}],Snake3Head:[function(t,e,o){"use strict";cc._RF.push(e,"03ab7VcpfBK/4AwAtP57zw4","Snake3Head");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Snake3Main"),r=cc._decorator,c=r.ccclass,h=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.snake=null,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.onCollisionEnter=function(t,e){this.snake.getComponent(s.default).collisionEnter(t,e)},e.prototype.start=function(){},e.prototype.startSnake=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.stopSnake=function(){cc.director.getCollisionManager().enabled=!1},a([h({type:cc.Node,displayName:"snake"})],e.prototype,"snake",void 0),a([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Snake3Main":"Snake3Main"}],Snake3Main:[function(t,e,o){"use strict";cc._RF.push(e,"4b0cbYGoQBCr7dfVVQfZVK3","Snake3Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function r(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,r)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(r){a=[6,r],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../module/component/scripts/GameCompBase"),h=t("../../../../module/kit/assets/AssetsManger"),d=t("../../../../module/kit/audio/AudioManager"),l=t("../../../../module/kit/event/BaseEvent"),p=t("../../../../module/kit/event/ListenerManager"),f=t("./Snake3Head"),u=cc._decorator,g=u.ccclass,y=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftBoard=null,e.head=null,e.bg=null,e.board=null,e.joyStickPanel=null,e.joyStickBtn=null,e.foodBoard=null,e.bigFoodBoard=null,e.textBoard=null,e.endBox=null,e.beginBoard=null,e.beginBoardBox=null,e.beginBoardTextArr=[],e.englishText=null,e.bodyPrefab=null,e.foodPrefab=null,e.bigFoodPrefab=null,e.textPrefab=null,e.endImagePrefab=null,e.handCtr=null,e.word=null,e.leftMask=[],e.dir=null,e.pointsArray=[],e.headPointsNum=0,e.snakeArray=[],e.foodPos=[],e.foodX=null,e.foodY=null,e.foodIndex=0,e.bigFoodIndex=0,e.textIndex=0,e.textIndex1=0,e.bigTextIndex=0,e.bigTextIndex1=0,e.gameBegin=!1,e.canClick=!1,e.isClick=!1,e.feedBack=null,e.mustStop=!1,e.endTweenTime=0,e.eatIndex=0,e.gameIndex=0,e.rightText=[],e.endTextArr=[],e}return i(e,t),e.prototype.InitData=function(t){var e=this;this.snake_config=t,cc.log(this.snake_config),this.speed=this.snake_config.sectionLen/this.snake_config.time,this.creatTip().then(function(){for(var t=0;t<e.snake_config.textNum;t++)e.creatNewFood(e.textPrefab,e.textBoard,!0)}),this.creatEnd(),this.head.setPosition(1,1),this.rotateHead(this.head.position),this.snakeArray.push(this.head);for(var o=0;o<this.snake_config.bodyNum;o++)this.getNewBody();for(o=0;o<this.snake_config.foodNum;o++)this.creatNewFood(this.foodPrefab,this.foodBoard);for(o=0;o<this.snake_config.bigFoodNum;o++)this.creatNewFood(this.bigFoodPrefab,this.bigFoodBoard);this.creatBeginBoard()},e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),cc.director.getPhysicsManager().enabled=!0,p.ListenerManager.on(l.BaseEvent.EVENT_FOLLOW_UP_RIGHT,function(){e.followUpRight()},this)},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.initHandComponent().then(function(t){e.handCtr=t,e.handCtr.node.scale=.5}),this.initFeedBackComponent().then(function(t){e.feedBack=t,e.feedBack.node.parent=e.board,e.feedBack.node.scale=.5}),this.initColorWordComponent().then(function(t){e.word=t}),this.initRecordComponent()},e.prototype.onGameStart=function(){t.prototype.onGameStart.call(this),this.gameInit()},e.prototype.gameEnd=function(){t.prototype.gameEnd.call(this)},e.prototype.gameInit=function(){d.default.playMusic(this.snake_config.bundleName,"res/audios/BGM_tanchishe_01_ytz"),this.beginBoardMove(),this.creatBgTouch()},e.prototype.creatTip=function(){return s(this,void 0,void 0,function(){var t,e,o;return r(this,function(){for(this.leftMask=[],this.eatIndex=0,this.rightText=[],t=20*(this.snake_config.tipImage[this.gameIndex].length-1),e=0;e<this.snake_config.tipImage[this.gameIndex].length;e++)(o=cc.instantiate(this.englishText)).setParent(this.leftBoard),this.leftMask.push(o),o.getChildByName("text").opacity=255,o.getChildByName("text").scale=.7,o.getChildByName("text0").opacity=255,o.getChildByName("text0").scale=.7,this.rightText.push(this.snake_config.textImage[this.gameIndex][e]),o.getChildByName("text").getComponent(cc.Label).string=this.snake_config.tipImage[this.gameIndex][e],o.getChildByName("text0").getComponent(cc.Label).string=this.snake_config.tipImage[this.gameIndex][e],o.getChildByName("text0").getComponent(cc.Label)._forceUpdateRenderData(),o.width=o.getChildByName("text0").width*o.getChildByName("text0").scale,t+=o.getChildByName("text0").width*o.getChildByName("text0").scale,e==this.snake_config.tipImage[this.gameIndex].length-1&&(this.leftBoard.width=t,this.leftBoard.getComponent(cc.Layout).spacingX=this.snake_config.tipMargin);return[2]})})},e.prototype.creatBgTouch=function(){this.bg.on("touchstart",this.onTouchStart,this),this.bg.on("touchmove",this.onTouchMove,this),this.bg.on("touchend",this.onTouchEnd,this),this.bg.on("touchcancel",this.onTouchCancel,this)},e.prototype.onTouchStart=function(t){if(this.canClick){this.isClick=!0;var e=this.bg.convertToNodeSpaceAR(t.getLocation());cc.log("\u70b9\u51fb\u5c40\u90e8\u5750\u6807\uff1a ",e.x,e.y),this.joyStickPanel.x=e.x-this.joyStickPanel.width/2,this.joyStickPanel.y=e.y}},e.prototype.onTouchMove=function(t){if(this.isClick){this.gameBegin=!0,this.handCtr.node.active=!1;var e=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(e)),this.dir=this.joyStickBtn.position.normalize()}},e.prototype.onTouchEnd=function(){this.joyStickBtn.setPosition(cc.v2(this.head.x,this.head.y))},e.prototype.onTouchCancel=function(){this.joyStickBtn.setPosition(cc.v2(0,0))},e.prototype.creatNewFood=function(t,e,o){var n=cc.instantiate(t);if(n.getComponent("SnakeNewFood").InitData(this.snake_config),e.addChild(n),o||n.setPosition(this.randomPos()),this.foodPos.push([this.foodX,this.foodY]),o){n.setPosition(this.randomPos());var i=this.changeText();n.getComponent("SnakeNewFood").change(this.board.width,this.board.height),n.getComponent("SnakeNewFood").creatTextFood(i);var a=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],s=Math.floor(8*Math.random()),r=n.getComponent(cc.RigidBody).linearVelocity;r.x=100*a[s][0],r.y=100*a[s][1],n.getComponent(cc.RigidBody).linearVelocity=r}},e.prototype.randomPos=function(){var t=this.board.width-100,e=this.board.height-100;return this.foodX=0,this.foodY=0,this.changePos(t,e),cc.v2(this.foodX,this.foodY)},e.prototype.changePos=function(t,e){for(var o=!0,n=Math.round(Math.random()*t)-t/2,i=Math.round(Math.random()*e)-e/2,a=0;a<this.foodPos.length;a++)o&&n<=this.foodPos[a][0]+100&&n>=this.foodPos[a][0]-100&&i<=this.foodPos[a][1]+100&&i>=this.foodPos[a][1]-100&&(o=!1);n<=this.head.x+100&&n>=this.head.x-100&&i>=this.head.y-100&&i<=this.head.y+100&&(o=!1),o?(this.foodX=n,this.foodY=i):this.changePos(t,e)},e.prototype.changeText=function(){for(var t=0;t<this.leftMask.length;t++)if(this.leftMask[t].getChildByName("text0").active)return this.snake_config.textImage[this.gameIndex][t]},e.prototype.getNewBody=function(){var t=cc.instantiate(this.bodyPrefab);if(1==this.snakeArray.length){var e=this.head.position.normalize();t.setPosition(this.head.position.sub(e.mul(this.snake_config.sectionLen)))}else{var o=this.snakeArray[this.snakeArray.length-1];e=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize(),t.setPosition(o.position.sub(e.mul(this.snake_config.sectionLen)))}t.color=this.head.color,this.board.addChild(t),this.snakeArray.push(t),this.snakeArray.length>this.snake_config.bodyNum?this.snakeArray[this.snakeArray.length-1].curIndex=this.snakeArray[this.snakeArray.length-2].curIndex:this.snakeArray[this.snakeArray.length-1].curIndex=0,this.recordPoints(),this.changeZIndex()},e.prototype.recordPoints=function(){for(var t=0,e=0;t<this.snake_config.sectionLen;){t+=this.speed;var o=this.snakeArray[this.snakeArray.length-1],n=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize(),i=o.position.add(n.mul(t));this.pointsArray.splice(e,0,i),e+=1}},e.prototype.changeZIndex=function(){for(var t=0;t<this.snakeArray.length;t++)this.snakeArray[t].zIndex=cc.macro.MAX_ZINDEX-t},e.prototype.moveSnake=function(){var t=this.dir.mul(this.speed);this.head.setPosition(this.head.position.add(t)),this.head.x>this.board.width/2?this.head.x=-this.board.width/2:this.head.x<-this.board.width/2&&(this.head.x=this.board.width/2),this.head.y>this.board.height/2?this.head.y=-this.board.height/2:this.head.y<-this.board.height/2&&(this.head.y=this.board.height/2),this.pointsArray.push(this.head.position),this.headPointsNum+=1;for(var e=1;e<this.snakeArray.length;e++){var o=Math.floor((this.pointsArray.length-this.headPointsNum)/(this.snakeArray.length-1)*(this.snakeArray.length-1-e));this.snakeArray[e].setPosition(this.pointsArray[o+this.snakeArray[e].curIndex]),this.snakeArray[e].curIndex+=1}},e.prototype.rotateHead=function(t){var e=180*cc.v2(1,0).signAngle(t)/Math.PI;this.head.angle=e-90},e.prototype.collisionEnter=function(t){if(this.gameBegin)switch(t.node.name){case"snake_food":this.eatFood(t.node);break;case"snake_bigFood":this.eatBigFood(t.node);break;case"snake_text":this.eatText(t.node)}},e.prototype.eatFood=function(t){this.foodIndex++,d.default.playEffect(this.snake_config.bundleName,"res/audios/SE_tanchishe_02_ytz",function(){}),this.foodIndex==this.snake_config.foodMax&&(this.foodIndex=0,this.getNewBody()),this.creatNewFood(this.foodPrefab,this.foodBoard);for(var e=0;e<this.foodPos.length;e++)t.x==this.foodPos[e][0]&&t.y==this.foodPos[e][1]&&this.foodPos.splice(e,1);t.removeFromParent()},e.prototype.eatBigFood=function(t){d.default.playEffect(this.snake_config.bundleName,"res/audios/SE_tanchishe_01_ytz",function(){}),this.creatNewFood(this.bigFoodPrefab,this.bigFoodBoard);for(var e=0;e<this.foodPos.length;e++)t.x==this.foodPos[e][0]&&t.y==this.foodPos[e][1]&&this.foodPos.splice(e,1);for(var o=Number(t.getChildByName("color").getComponent(cc.Label).string),n=0;n<this.snakeArray.length;n++)this.snakeArray[n].color=cc.color(this.snake_config.snakeColor[o][0],this.snake_config.snakeColor[o][1],this.snake_config.snakeColor[o][2]);t.removeFromParent()},e.prototype.eatText=function(t){for(var e=0;e<this.snake_config.textMax;e++)this.getNewBody();for(d.default.playEffect(this.snake_config.bundleName,"res/audios/game_right"),e=0;e<this.snake_config.tipImage[this.gameIndex].length;e++)t.getChildByName("text").getComponent(cc.Label).string==this.snake_config.textImage[this.gameIndex][e]&&d.default.playAudioSound(this.bundleName,"res/audios/"+this.snake_config.textAudio[this.gameIndex][e]);t.getChildByName("text").getComponent(cc.Label).string==this.rightText[this.eatIndex]&&(this.leftMask[this.eatIndex].getChildByName("text0").active=!1,this.eatIndex++),this.eatIndex==this.leftMask.length?(this.textBoard.removeAllChildren(),this.beginFollowUp(this.gameIndex)):this.creatNewFood(this.textPrefab,this.textBoard,!0),this.feedBack.node.active=!0,this.feedBack.showRightAnimation(this.head.position),t.removeFromParent()},e.prototype.beginFollowUp=function(t){var e=this;this.mustStop=!0,this.canClick=!1,this.isClick=!1,this.head.getComponent(f.default).stopSnake(),this.scheduleOnce(function(){e.leftBoard.removeAllChildren(),p.ListenerManager.dispatch(l.BaseEvent.EVENT_FOLLOW_UP,{text:e.snake_config.followUpText[t],textString:e.snake_config.followUpText[t],word:!0,img:"res/images/"+e.snake_config.followUpImage[t],imgScale:1,music:"res/audios/"+e.snake_config.followUpAudio[t],time:3,lesson:"L2"})},1)},e.prototype.followUpRight=function(){var t=this;this.gameIndex++,this.gameIndex<this.snake_config.tipImage.length?this.beginBoardMove():this.scheduleOnce(function(){t.end()},1)},e.prototype.end=function(){var t=this;cc.tween(this.board).to(.5,{opacity:0}).call(function(){t.board.active=!1,t.endBox.opacity=255,t.endTween()}).start(),cc.tween(this.leftBoard).by(.5,{x:-500}).start()},e.prototype.creatEnd=function(){return s(this,void 0,void 0,function(){var t;return r(this,function(){for(t=0;t<this.snake_config.endText.length;t++)this.endTextArr.push(this.endBox.getChildByName("textBox").children[t]),this.endTextArr[t].getComponent(cc.Label).string=this.snake_config.endText[t];return[2]})})},e.prototype.endTween=function(){var t=this;cc.tween(this.endTextArr[this.endTweenTime]).by(.3,{y:100,scale:.2}).call(function(){d.default.playAudioSound(t.snake_config.gameBundle,"res/audios/"+t.snake_config.followUpAudio[t.endTweenTime],function(){t.endTweenTime<t.endTextArr.length-1?(cc.tween(t.endTextArr[t.endTweenTime]).by(.3,{y:-100,scale:-.2}).start(),t.endTweenTime++,t.endTween()):cc.tween(t.endTextArr[t.endTweenTime]).by(.3,{y:-100,scale:-.2}).call(function(){t.gameEnd()}).start()})},this).start()},e.prototype.creatBeginBoard=function(){var t=this;h.default.instance.loadImg("res/images/"+this.snake_config.beginImage,this.snake_config.gameBundle).then(function(e){t.beginBoardBox.getChildByName("image").getComponent(cc.Sprite).spriteFrame=e}),this.beginBoardBox.getChildByName("image").setPosition(this.snake_config.beginIamgePos[0],this.snake_config.beginIamgePos[1]);for(var e=0;e<this.beginBoardTextArr.length;e++)this.beginBoardTextArr[e].getChildByName("text").getComponent(cc.Label).string=this.snake_config.beginBoardText[e],this.beginBoardTextArr[e].getChildByName("text").getComponent(cc.Label)._forceUpdateRenderData(),this.beginBoardTextArr[e].getChildByName("bg").width=this.beginBoardTextArr[e].getChildByName("text").width+100},e.prototype.beginBoardMove=function(){var t=this;this.beginBoard.active=!0,this.beginBoardTextArr[this.gameIndex].active=!0,cc.tween(this.beginBoardBox).to(1.5,{y:0}).delay(.5).call(function(){d.default.playAudioSound(t.snake_config.gameBundle,"res/audios/"+t.snake_config.followUpAudio[t.gameIndex],function(){cc.tween(t.beginBoardBox).delay(.5).to(1.5,{y:2e3}).call(function(){t.beginBoardMoveEnd()}).start()})}).start()},e.prototype.beginBoardMoveEnd=function(){for(var t=this,e=0;e<this.beginBoardTextArr.length;e++)this.beginBoardTextArr[e].active=!1;this.beginBoard.active=!1,0==this.gameIndex?d.default.playEffect(this.snake_config.bundleName,"res/audios/eat_the_words_liz_ytz",function(){var e=cc.v2(100,0),o=cc.v2(300,200);t.handCtr.node.active=!0,t.handCtr.TouchCycle(e,o,3,.5),t.canClick=!0}):(this.leftBoard.opacity=0,this.creatTip(),this.scheduleOnce(function(){t.leftBoard.opacity=255;for(var e=0;e<t.snake_config.textNum;e++)t.creatNewFood(t.textPrefab,t.textBoard,!0)},.5),this.scheduleOnce(function(){t.mustStop=!1,t.canClick=!0,t.head.getComponent(f.default).startSnake()},1))},e.prototype.update=function(){if(!this.mustStop){var t=this.joyStickBtn.position.mag()/(this.joyStickPanel.width/2);t>1&&this.joyStickBtn.setPosition(this.joyStickBtn.position.div(t)),this.dir&&(this.rotateHead(this.dir),this.moveSnake())}},e.prototype.playSpin=function(t,e,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=0),!o)return new Promise(function(i){var a=t.setAnimation(n,e,o);t.setTrackCompleteListener(a,function(){i(null)})});Promise.resolve().then(function(){t.setAnimation(n,e,o)})},a([y({type:cc.Node,displayName:"\u5de6\u4fa7\u770b\u677f"})],e.prototype,"leftBoard",void 0),a([y({type:cc.Node,displayName:"\u86c7\u5934"})],e.prototype,"head",void 0),a([y({type:cc.Node,displayName:"\u80cc\u666f"})],e.prototype,"bg",void 0),a([y({type:cc.Node,displayName:"\u64cd\u4f5c\u7248"})],e.prototype,"board",void 0),a([y({type:cc.Node,displayName:"joyStickPanel"})],e.prototype,"joyStickPanel",void 0),a([y({type:cc.Node,displayName:"joyStickBtn"})],e.prototype,"joyStickBtn",void 0),a([y({type:cc.Node,displayName:"foodBoard"})],e.prototype,"foodBoard",void 0),a([y({type:cc.Node,displayName:"bigFoodBoard"})],e.prototype,"bigFoodBoard",void 0),a([y({type:cc.Node,displayName:"textBoard"})],e.prototype,"textBoard",void 0),a([y({type:cc.Node,displayName:"end"})],e.prototype,"endBox",void 0),a([y({type:cc.Node,displayName:"beginBoard"})],e.prototype,"beginBoard",void 0),a([y({type:cc.Node,displayName:"beginBoardBox"})],e.prototype,"beginBoardBox",void 0),a([y({type:[cc.Node],displayName:"beginBoardText"})],e.prototype,"beginBoardTextArr",void 0),a([y({type:cc.Prefab,displayName:"leftEnglish"})],e.prototype,"englishText",void 0),a([y({type:cc.Prefab,displayName:"body"})],e.prototype,"bodyPrefab",void 0),a([y({type:cc.Prefab,displayName:"food"})],e.prototype,"foodPrefab",void 0),a([y({type:cc.Prefab,displayName:"bigFood"})],e.prototype,"bigFoodPrefab",void 0),a([y({type:cc.Prefab,displayName:"text"})],e.prototype,"textPrefab",void 0),a([y({type:cc.Prefab,displayName:"endImage"})],e.prototype,"endImagePrefab",void 0),a([g],e)}(c.default);o.default=m,cc._RF.pop()},{"../../../../module/component/scripts/GameCompBase":void 0,"../../../../module/kit/assets/AssetsManger":void 0,"../../../../module/kit/audio/AudioManager":void 0,"../../../../module/kit/event/BaseEvent":void 0,"../../../../module/kit/event/ListenerManager":void 0,"./Snake3Head":"Snake3Head"}],SnakeNewFood:[function(t,e,o){"use strict";cc._RF.push(e,"18130TO/cdGq6nvoLTenMpz","SnakeNewFood");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function r(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,r)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(r){a=[6,r],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../module/kit/assets/AssetsManger"),h=cc._decorator,d=h.ccclass,l=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxWidth=null,e.maxHeight=null,e}return i(e,t),e.prototype.InitData=function(t){this.snake_config=t},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return r(this,function(){switch(cc.director.getPhysicsManager().enabled=!0,this.node.name){case"snake_food":this.creatFood();break;case"snake_bigFood":this.creatBigFood()}return[2]})})},e.prototype.creatFood=function(){return s(this,void 0,void 0,function(){var t,e=this;return r(this,function(o){switch(o.label){case 0:return t=Math.floor(30*Math.random()),[4,c.default.instance.loadImg("res/images/food/small"+t,this.snake_config.bundleName).then(function(t){e.node.getComponent(cc.Sprite).spriteFrame=t})];case 1:return o.sent(),[2]}})})},e.prototype.creatBigFood=function(){return s(this,void 0,void 0,function(){var t,e=this;return r(this,function(o){switch(o.label){case 0:return t=Math.floor(5*Math.random()),this.node.children[0].getComponent(cc.Label).string=String(t),[4,c.default.instance.loadImg("res/images/food/big"+t,this.snake_config.bundleName).then(function(t){e.node.getComponent(cc.Sprite).spriteFrame=t})];case 1:return o.sent(),[2]}})})},e.prototype.creatTextFood=function(t){var e=this;switch(this.snake_config.snakeVersion){case"snake1":this.node.getChildByName("text").opacity=255,this.node.getChildByName("text").getComponent(cc.Label).string=t;break;case"snake2":this.node.scale=this.snake_config.textScale,this.node.getChildByName("image").scale=this.snake_config.textImageScale,this.node.getChildByName("text").getComponent(cc.Label).string=t,c.default.instance.loadImg("res/images/"+t,this.snake_config.gameBundle).then(function(t){e.node.getChildByName("image").getComponent(cc.Sprite).spriteFrame=t});break;case"snake3":this.node.getChildByName("pao").active=!1,this.node.getChildByName("text").opacity=255,this.node.getChildByName("text").getComponent(cc.Label).string=t,this.node.getChildByName("text").getComponent(cc.Label)._forceUpdateRenderData(),this.node.width=this.node.getChildByName("text").width*this.node.getChildByName("text").scale,this.node.getComponent(cc.PhysicsCircleCollider).enabled=!1,this.node.getComponent(cc.PhysicsBoxCollider).enabled=!0,this.node.getComponent(cc.PhysicsBoxCollider).size.width=this.node.width,this.node.getComponent(cc.PhysicsBoxCollider).apply(),this.node.getComponent(cc.CircleCollider).enabled=!1,this.node.getComponent(cc.BoxCollider).enabled=!0,this.node.getComponent(cc.BoxCollider).size.width=this.node.width}},e.prototype.randomColor=function(){var t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),o=Math.round(255*Math.random());return new cc.Color(t,e,o)},e.prototype.randomPos=function(){var t=this.maxWidth,e=this.maxHeight,o=Math.round(Math.random()*t)-t/2,n=Math.round(Math.random()*e)-e/2;return cc.v2(o,n)},e.prototype.change=function(t,e){this.maxWidth=t,this.maxHeight=e},e.prototype.update=function(){if("snake_text"==this.node.name){var t=this.node.getComponent(cc.RigidBody).linearVelocity;t.x>150?t.x=150:t.x<-150?t.x=-150:t.x>0&&t.x<20?t.x=40:t.x<0&&t.x>-20&&(t.x=-40),t.y>150?t.y=150:t.y<-150?t.y=-150:t.y>0&&t.y<20?t.y=40:t.y<0&&t.y>-20&&(t.y=-40),0==t.x&&0==t.y&&(t.x=Math.round(10*Math.random())-5,t.y=Math.round(10*Math.random())-5),this.node.getComponent(cc.RigidBody).linearVelocity=t}},a([d],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../module/kit/assets/AssetsManger":void 0}]},{},["SnakeNewFood","Snake1Head","Snake1Main","Snake2Head","Snake2Main","Snake3Head","Snake3Main"]);