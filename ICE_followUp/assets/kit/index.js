window.__require=function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var u=s.split("/");if(u=u[u.length-1],!e[u]){var c="function"==typeof __require&&__require;if(!a&&c)return c(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+s+"'")}s=u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){return i(e[s][1][t]||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({AssetItem:[function(t,e,n){"use strict";cc._RF.push(e,"9ab33GEBZVO0aYyAJmt1SOX","AssetItem");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{u(o.next(t))}catch(e){r(e)}}function a(t){try{u(o.throw(t))}catch(e){r(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return u([t,e])}}function u(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetItem=n.AssetData=void 0;n.AssetData=function(){};var r=function(){function t(t,e){this.assetBundle=e,this.prefabMap=new Map,this.audioMap=new Map,this.spriteFrameMap=new Map,this.skeletonMap=new Map,this.MaterialMap=new Map,this.bundleName=t}return t.prototype.preloadType=function(){},t.prototype.preLoadRes=function(t,e){this.prefabMap.has(t)||this.loadRes(t,e)},t.prototype.getPrefab=function(t){return o(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return this.prefabMap.has(t)?[3,2]:[4,this.loadRes(t,cc.Prefab)];case 1:return[2,e.sent()];case 2:return[2,this.prefabMap.get(t)]}})})},t.prototype.getSpine=function(t){return o(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return this.skeletonMap.has(t)?[3,2]:[4,this.loadRes(t,sp.SkeletonData)];case 1:return[2,e.sent()];case 2:return[2,this.skeletonMap.get(t)]}})})},t.prototype.getMaterial=function(t){return o(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return this.skeletonMap.has(t)?[3,2]:[4,this.loadRes(t,cc.Material)];case 1:return[2,e.sent()];case 2:return[2,this.MaterialMap.get(t)]}})})},t.prototype.getAudio=function(t){return o(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return this.audioMap.has(t)?[3,2]:[4,this.loadRes(t,cc.AudioClip)];case 1:return[2,e.sent()];case 2:return[2,this.audioMap.get(t)]}})})},t.prototype.getSpriteFrame=function(t){return o(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return this.spriteFrameMap.has(t)?[3,2]:[4,this.loadRes(t,cc.SpriteFrame)];case 1:return[2,e.sent()];case 2:return[2,this.spriteFrameMap.get(t)]}})})},t.prototype.loadRes=function(t,e){return o(this,void 0,Promise,function(){var n=this;return i(this,function(){return[2,new Promise(function(o){n.assetBundle.load(t,e,function(e,n){e?(console.log("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: url:",t,"\u9519\u8bef\u65e5\u5fd7:",e),o(void 0)):o(n)})})]})})},t.prototype.defRes=function(){return null},t.prototype.clearAllRes=function(){var t=cc.assetManager.getBundle(this.bundleName);cc.assetManager.removeBundle(t),this.prefabMap.forEach(function(t){cc.assetManager.releaseAsset(t)}),this.audioMap.forEach(function(t){cc.assetManager.releaseAsset(t)}),this.spriteFrameMap.forEach(function(t){cc.assetManager.releaseAsset(t)}),this.skeletonMap.forEach(function(t){cc.assetManager.releaseAsset(t)}),this.MaterialMap.forEach(function(t){cc.assetManager.releaseAsset(t)})},t.prototype.releaseBundle=function(){},t}();n.AssetItem=r,cc._RF.pop()},{}],AssetsManger:[function(t,e,n){"use strict";cc._RF.push(e,"ef45cV3D9lOi7NSG05lL3LW","AssetsManger");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{u(o.next(t))}catch(e){r(e)}}function a(t){try{u(o.throw(t))}catch(e){r(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return u([t,e])}}function u(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./AssetItem"),s=function(){function t(){this.bundleMap=new Map}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.preloadBundle=function(t){var e=this;return new Promise(function(n){e.bundleMap.has(t)?n(e.bundleMap.get(t)):cc.assetManager.loadBundle(t,function(o,i){if(o)console.error(o);else{var s=new r.AssetItem(t,i);e.bundleMap.set(t,s),n(i)}})}).catch(function(){})},t.prototype.preLoadRes=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return this.bundleMap.has(t)?[3,2]:[4,this.preloadBundle(t)];case 1:o.sent(),o.label=2;case 2:return this.bundleMap.get(t).preLoadRes(e,n),[2]}})})},t.prototype.loadPrefab=function(t,e){return o(this,void 0,void 0,function(){var n=this;return i(this,function(){return[2,new Promise(function(r){return o(n,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return this.bundleMap.has(e)?[3,2]:[4,this.preloadBundle(e)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.bundleMap.get(e).getPrefab(t)];case 3:return n=i.sent(),r(n),[3,5];case 4:return o=i.sent(),console.error(o),[3,5];case 5:return[2]}})})}).then().catch(function(){})]})})},t.prototype.loadAudio=function(t,e){var n=this;return new Promise(function(r){return o(n,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return this.bundleMap.has(e)?[3,2]:[4,this.preloadBundle(e)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.bundleMap.get(e).getAudio(t)];case 3:return n=i.sent(),r(n),[3,5];case 4:return o=i.sent(),console.error(o),[3,5];case 5:return[2]}})})})},t.prototype.loadImg=function(t,e){var n=this;return void 0===e&&(e=null),new Promise(function(r){return o(n,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return this.bundleMap.has(e)?[3,2]:[4,this.preloadBundle(e)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.bundleMap.get(e).getSpriteFrame(t)];case 3:return n=i.sent(),r(n),[3,5];case 4:return o=i.sent(),console.error(o),[3,5];case 5:return[2]}})})})},t.prototype.loadSpineData=function(t,e){var n=this;return void 0===e&&(e=null),new Promise(function(r){return o(n,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return this.bundleMap.has(e)?[3,2]:[4,this.preloadBundle(e)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.bundleMap.get(e).getSpine(t)];case 3:return n=i.sent(),r(n),[3,5];case 4:return o=i.sent(),console.error(o),[3,5];case 5:return[2]}})})})},t.prototype.loadMaterial=function(t,e){var n=this;return void 0===e&&(e=null),new Promise(function(r){return o(n,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return this.bundleMap.has(e)?[3,2]:[4,this.preloadBundle(e)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.bundleMap.get(e).getMaterial(t)];case 3:return n=i.sent(),r(n),[3,5];case 4:return o=i.sent(),console.error(o),[3,5];case 5:return[2]}})})})},t.prototype.delPrefab=function(){},t.prototype.clearBundle=function(t){this.bundleMap.has(t)&&(this.bundleMap.get(t).clearAllRes(),this.bundleMap.delete(t))},t.prototype.defAudio=function(){},t}();n.default=s,cc._RF.pop()},{"./AssetItem":"AssetItem"}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"dce94FFCuBC7IYGJtfakMT6","AudioManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{u(o.next(t))}catch(e){r(e)}}function a(t){try{u(o.throw(t))}catch(e){r(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return u([t,e])}}function u(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./AudioUtil"),s=function(){function t(){}return t.init=function(){var e="false"===cc.sys.localStorage.getItem(t.EFFECT_TAG),n="false"===cc.sys.localStorage.getItem(t.MUSIC_TAG);t._effectFlag=!e,t._musicFlag=!n,this.setEffectStatus(t._effectFlag),this.setMusicStatus(t._musicFlag)},t.playAudioSound=function(e,n,o){e&&""!==e?t._effectFlag&&r.default.playAudioSound(e,n,o):cc.warn("playAudio bundleName nil! audio name: "+n)},t.playEffect=function(e,n,o){e&&""!==e?t._effectFlag&&r.default.playEffect(e,n,o):cc.warn("playEffect bundleName nil! audio name: "+n)},t.playEffectByName=function(e,n,s,a){return void 0===s&&(s=!0),void 0===a&&(a=!1),o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return e&&""!==e?t._effectFlag?[4,r.default.playEffectByName(e,n,s,a)]:[3,2]:[2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},t.playEffectAudioClip=function(t,e,n){void 0===n&&(n=!1),t instanceof cc.AudioClip&&r.default.playEffectAudioClip(t,e,n)},t.stopEffect=function(){r.default.stopEffect()},t.stopAudioSound=function(){r.default.stopAudioSound()},t.stopEffectByName=function(t,e){r.default.stopEffectByName(t+"/"+e)},t.destroyAudio=function(t,e){r.default.destroyAudio(t,e)},t.playLoopEffect=function(e,n){t._effectFlag&&r.default.playLoopEffect(e,n)},t.stopLoopEffect=function(t,e){r.default.stopLoopEffect(t,e)},t.pauseLoopEffects=function(){r.default.pauseLoopEffects()},t.resumeLoopEffects=function(){t._effectFlag&&r.default.resumeLoopEffects()},t.playMusic=function(e,n){if(e instanceof cc.AudioClip)return t._curMusic=e.name,t._curBundle=e.name,void(t._musicFlag&&r.default.playMusic(e,e.name));e&&""!==e&&(t._curMusic=n,t._curBundle=e,t._musicFlag&&r.default.playMusic(e,n))},t.playMusicByAudioClip=function(e){e instanceof cc.AudioClip&&(t._curMusic=e.name,t._curBundle=e.name,t._musicFlag&&r.default.playMusic(e,e.name))},t.stopMusic=function(){r.default.stopMusic()},t.passMusic=function(){r.default.passMusic()},t.resumeMusic=function(){r.default.resumeMusic()},t.setMusicStatus=function(e){t._musicFlag=e,cc.sys.localStorage.setItem(t.MUSIC_TAG,e),e?t.playMusic(t._curBundle,t._curMusic):t.stopMusic()},t.setEffectStatus=function(e){t._effectFlag=e,cc.sys.localStorage.setItem(t.EFFECT_TAG,e),cc.log("AudioManager.setEffectStatus.flag"+e),e?this.resumeLoopEffects():this.pauseLoopEffects()},Object.defineProperty(t,"effectFlag",{get:function(){return t._effectFlag},enumerable:!1,configurable:!0}),Object.defineProperty(t,"musicFlag",{get:function(){return t._musicFlag},enumerable:!1,configurable:!0}),t.EFFECT_TAG="ChineseAi_EFFECT_TAG",t.MUSIC_TAG="ChineseAi_MUSIC_TAG",t._effectFlag=!0,t._musicFlag=!0,t._curMusic="",t}();n.default=s,cc._RF.pop()},{"./AudioUtil":"AudioUtil"}],AudioUtil:[function(t,e,n){"use strict";cc._RF.push(e,"424b0MMitNPnawl42j840ex","AudioUtil");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{u(o.next(t))}catch(e){r(e)}}function a(t){try{u(o.throw(t))}catch(e){r(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return u([t,e])}}function u(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.MusicType=void 0;var r,s=t("../assets/AssetsManger"),a=t("../timer/TimerSystem");(function(t){t[t.SOUND=0]="SOUND",t[t.MUSIC=1]="MUSIC",t[t.AUDIO_SOUND=2]="AUDIO_SOUND",t[t.LOOP_SOUND=3]="LOOP_SOUND"})(r=n.MusicType||(n.MusicType={}));var u=function(){function t(){}return t.getFixedPath=function(t,e){return t+"/"+e},t.playEffectAudioClip=function(e,n,o){if(void 0===o&&(o=!1),!t._pauseFlag){var i=(new Date).getTime();t._curSound=e.name,t._lastSoundTime=i;var s=t.getFixedPath(e.name,e.name),a=t.getEffectFromPool(s);a?a.palyAudioClip(e,n,o):(a=new c(e.name,e.name,r.SOUND),t.addEffectToPool(s,a),a.palyAudioClip(e,n,o))}},t.playEffect=function(e,n,o){if(!t._pauseFlag){var i=(new Date).getTime();if(n===t._curSound&&i-t._lastSoundTime<50)return;t._curSound=n,t._lastSoundTime=i;var s=t.getFixedPath(e,n),a=t.getEffectFromPool(s);a?a.play(!1,o):(a=new c(e,n,r.SOUND),t.addEffectToPool(s,a),a.play(!1,o))}},t.stopEffect=function(){t._soundPool.forEach(function(t){if(t)for(var e=0,n=t;e<n.length;e++)n[e].stop()})},t.playAudioSound=function(e,n,o){if(!t._pauseFlag){var i=(new Date).getTime();if(n===t._curSound&&i-t._lastSoundTime<50)return;t._curSound=n,t._lastSoundTime=i;var s=t.getFixedPath(e,n),a=t.getEffectFromPool(s);t.stopAudioSound(),a?a.play(!1,o):(a=new c(e,n,r.AUDIO_SOUND),t.addEffectToPool(s,a),a.play(!1,o))}},t.stopAudioSound=function(){t._soundPool.forEach(function(t){if(t)for(var e=0,n=t;e<n.length;e++){var o=n[e];o.musicType==r.AUDIO_SOUND&&o.stop()}})},t.playLoopEffect=function(e,n){if(!t._pauseFlag){var o=t.getFixedPath(e,n),i=t._loopSoundPool.get(o);i||(i=new c(e,n,r.LOOP_SOUND),t._loopSoundPool.set(o,i)),i.play(!0)}},t.stopLoopEffect=function(e,n){var o=t.getFixedPath(e,n),i=t._loopSoundPool.get(o);i&&i.stop()},t.playMusic=function(e,n){if(!t._pauseFlag){t._curMusic&&t._curMusic.stop();var o="",i="",s=!0;"string"==typeof e?(o=t.getFixedPath(e,n),i=e,s=!1):(o=t.getFixedPath(e.name,n),i=e.name,s=!0);var a=t._musicPool.get(o);a?a.play(!0):(a=new c(i,n,r.MUSIC,e),t._musicPool.set(o,a),a.play(!0,function(){},s)),t._curMusic=a}},t.stopMusic=function(){t._curMusic&&t._curMusic.stop()},t.passMusic=function(){t._curMusic&&t._curMusic.pause()},t.resumeMusic=function(){t._curMusic&&t._curMusic.resume()},t.getEffectFromPool=function(e){var n=t._soundPool.get(e);if(n)for(var o=0,i=n;o<i.length;o++){var r=i[o];if(!r.isPlaying())return r}return null},t.addEffectToPool=function(e,n){var o=t._soundPool.get(e);o?o.push(n):((o=[]).push(n),t._soundPool.set(e,o))},t.setPauseFlag=function(e,n){void 0===n&&(n=0),t._level=n,t._pauseFlag=e,e?(t._curMusic&&t._curMusic.pause(),t.pauseLoopEffects()):(t._curMusic&&t._curMusic.resume(),t.resumeLoopEffects())},t.pauseLoopEffects=function(){t._loopSoundPool.forEach(function(t){t.pause()})},t.resumeLoopEffects=function(){t._loopSoundPool.forEach(function(t){t.resume()})},t.stopEffectByName=function(e){var n=t._soundPool.get(e);n&&n.forEach(function(t){t.stop()})},t.playEffectByName=function(e,n,s,a){return void 0===s&&(s=!0),void 0===a&&(a=!1),o(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(o){if(t._pauseFlag)o();else{var i=(new Date).getTime();if(n===t._curSound&&i-t._lastSoundTime<50)return void o();var u=t.getFixedPath(e,n);s&&t.stopEffectByName(u),t._curSound=n,t._lastSoundTime=i;var l=null;(l=a?t._loopSoundPool.get(u):t.getEffectFromPool(u))?l.play(a,function(){o()}):(l=new c(e,n,r.SOUND),a?t._loopSoundPool.set(u,l):t.addEffectToPool(u,l),l.play(a,function(){o()}))}})]})})},t.destroyAudio=function(e,n){var o=t.getFixedPath(e,n);t._soundPool.has(o)&&(t.stopEffectByName(o),t._soundPool.get(o).forEach(function(t){t.destroy()}),t._soundPool.delete(o)),t._musicPool.has(o)&&(t.stopMusic(),t._musicPool.get(o).destroy(),t._musicPool.delete(o)),t._loopSoundPool.has(o)&&(t.stopLoopEffect(e,n),t._loopSoundPool.get(o).destroy(),t._loopSoundPool.delete(o))},t._musicPool=new Map,t._soundPool=new Map,t._loopSoundPool=new Map,t._curSound="",t._lastSoundTime=0,t._pauseFlag=!1,t._level=0,t}();n.default=u;var c=function(){function t(t,e,n,o){this._loaded=!1,this._audioSource=null,this._path="",this.state={},this._bundleName=t,this._path=e,this._musicType=n,this._audioSource=o}return Object.defineProperty(t.prototype,"musicType",{get:function(){return this._musicType},enumerable:!1,configurable:!0}),t.prototype.loadRes=function(t){var e=this;this._loaded||s.default.instance.loadAudio(this._path,this._bundleName).then(function(n){e._audioSource=n,e._loaded=!0,t&&t()})},t.prototype.play=function(t,e,n){var o=this;if(void 0===n&&(n=!1),this._isStop=!1,this._loaded||n){if(this.stop(),t||(t=!1),this.state.isLoop=t,this.state.isPlaying=!0,this._musicType==r.MUSIC?this.state.id=cc.audioEngine.playMusic(this._audioSource,t):this.state.id=cc.audioEngine.playEffect(this._audioSource,t),!t){var i=this._audioSource.duration;a.default.instance.doOnce(1e3*i,function(){e&&e(),o.state.isPlaying=!1},this,null,!1)}}else this.loadRes(function(){o._isStop||o.play(t,e)})},t.prototype.palyAudioClip=function(t,e,n){var o=this;if(void 0===n&&(n=!1),this._loaded=!0,this.stop(),this.state.isLoop=n,this.state.isPlaying=!0,this.state.id=cc.audioEngine.playEffect(t,n),!n){var i=t.duration;a.default.instance.doOnce(1e3*i,function(){e&&e(),o.state.isPlaying=!1},this,null,!1)}},t.prototype.playEffect=function(t){return o(this,void 0,void 0,function(){var e=this;return i(this,function(){return[2,new Promise(function(n){e.play(t,function(){n()})})]})})},t.prototype.isPlaying=function(){return this.state.isPlaying},t.prototype.stop=function(){this._isStop=!0,this.state.isPlaying=!1,this._loaded&&null!=this.state.id&&null!=this.state.id&&(this._musicType==r.MUSIC?cc.audioEngine.stopMusic():cc.audioEngine.stopEffect(this.state.id))},t.prototype.pause=function(){this._loaded&&this.state.id&&(this._musicType==r.MUSIC?cc.audioEngine.pauseMusic():cc.audioEngine.pauseEffect(this.state.id))},t.prototype.resume=function(){this._loaded&&this.state.id&&(this._musicType==r.MUSIC?cc.audioEngine.resumeMusic():cc.audioEngine.resumeEffect(this.state.id))},t.prototype.destroy=function(){this.stop(),this._audioSource&&(cc.assetManager.releaseAsset(this._audioSource),this._audioSource.destroy(),this._audioSource=null)},t}();cc._RF.pop()},{"../assets/AssetsManger":"AssetsManger","../timer/TimerSystem":"TimerSystem"}],BaseEvent:[function(t,e,n){"use strict";cc._RF.push(e,"94f1f9/B9FJnKQanN4PcXQR","BaseEvent"),Object.defineProperty(n,"__esModule",{value:!0}),n.BaseEvent=void 0,function(t){t[t.BASE_EVENT_RECORD_AIN_END=0]="BASE_EVENT_RECORD_AIN_END",t[t.EVENT_RECORD_AIN_START=1]="EVENT_RECORD_AIN_START",t[t.ANSWER_COMPLETED=2]="ANSWER_COMPLETED",t[t.AUDIO_COMPLETED=3]="AUDIO_COMPLETED",t.EVENT_SHOW_QUIT_PANEL="event_show_quit_panel",t.EVENT_NATIVE_CALL_COCOS="event_native_call_cocos",t.EVENT_NATIVE_LOADED="event_native_loaded",t.EVENT_FOLLOW_UP="event_follow_up",t.EVENT_FOLLOW_UP_RIGHT="event_follow_up_right",t.EVENT_FOLLOW_UP_WRONG="event_follow_up_wrong"}(n.BaseEvent||(n.BaseEvent={})),cc._RF.pop()},{}],EntityManager:[function(t,e,n){"use strict";cc._RF.push(e,"a8edbvePL1Ehbm5z4Hzr8SM","EntityManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._length=0,this._entityMap={}}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.release=function(){this._entityMap=null,t._instance=null},t.prototype.registerEntity=function(t){this._entityMap[t.sid]=t},t.prototype.getEntityFromID=function(t){return this._entityMap[t]},t.prototype.removeEntity=function(t){var e;for(e in this._entityMap)this._entityMap[e]==t&&delete this._entityMap[e]},t.prototype.getAllEntity=function(){return this._entityMap},t.prototype.getAvailableEntity=function(t){var e;for(e in this._entityMap){var n=this._entityMap[e];if(n instanceof t&&null!=n)return n}return this.createEntity(t)},t.prototype.createEntity=function(t){var e=new t;return this.registerEntity(e),this._length++,e},Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),t}();n.default=o,cc._RF.pop()},{}],EventEmitter:[function(t,e,n){"use strict";cc._RF.push(e,"ed626tVGbFLZY6DIL5K3J+B","EventEmitter");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o};Object.defineProperty(n,"__esModule",{value:!0}),n.EventEmitter=void 0;var i=function(){function t(){}return t.prototype.getListeners=function(t){var e,n,o=this._getEvents();if(t instanceof RegExp)for(n in e={},o)o.hasOwnProperty(n)&&t.test(n)&&(e[n]=o[n]);else e=o[t]||(o[t]=[]);return e},t.prototype.addListener=function(t,e,n){if(void 0===n&&(n=null),!this.isValidListener(e))throw new TypeError("listener must be a function");var o,i=this.getListenersAsObject(t),r="object"==typeof e;for(o in i)i.hasOwnProperty(o)&&-1===this.indexOfListener(i[o],e,n)&&i[o].push(r?e:{listener:e,once:!1,target:n});return this},t.prototype.on=function(t,e,n){return this.addListener(t,e,n)},t.prototype.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},t.prototype.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},t.prototype.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},t.prototype.once=function(t,e){return this.addOnceListener(t,e)},t.prototype.defineEvent=function(t){return this.getListeners(t),this},t.prototype.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},t.prototype.removeListener=function(t,e,n){void 0===n&&(n=null);var o,i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1!==(o=this.indexOfListener(r[i],e,n))&&r[i].splice(o,1);return this},t.prototype.off=function(t,e,n){return void 0===n&&(n=null),this.removeListener(t,e,n)},t.prototype.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},t.prototype.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},t.prototype.manipulateListeners=function(t,e,n){var o,i,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(o=n.length;o--;)r.call(this,e,n[o]);else for(o in e)e.hasOwnProperty(o)&&(i=e[o])&&("function"==typeof i?r.call(this,o,i):s.call(this,o,i));return this},t.prototype.removeEvent=function(t){var e,n=typeof t,o=this._getEvents();if("string"===n)delete o[t];else if(t instanceof RegExp)for(e in o)o.hasOwnProperty(e)&&t.test(e)&&delete o[e];else delete this._events;return this},t.prototype.removeAllListeners=function(t){return this.removeEvent(t)},t.prototype.emitEvent=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r,s,a,u,c=this.getListenersAsObject(t);for(u in c)if(c.hasOwnProperty(u))for(r=c[u].slice(0),a=0;a<r.length;a++)!0===(s=r[a]).once&&this.removeListener(t,s.listener),(e=s.listener).apply.apply(e,o([s.target||this],n||[]))===this.onceReturnValue&&this.removeListener(t,s.listener);return this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.emitEvent.apply(this,o([t],e))},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.emitEvent(t,e)},Object.defineProperty(t.prototype,"onceReturnValue",{get:function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},set:function(t){this._onceReturnValue=t},enumerable:!1,configurable:!0}),t.prototype._getEvents=function(){return this._events||(this._events={})},t.prototype.isValidListener=function(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&this.isValidListener(t)},t.prototype.indexOfListener=function(t,e,n){for(var o=t.length;o--;)if(t[o].listener===e&&n==t[o].target)return o;return-1},t}();n.EventEmitter=i,cc._RF.pop()},{}],EventSystem:[function(t,e,n){"use strict";cc._RF.push(e,"f3062iZOwRCfLraUCwV7jaE","EventSystem"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./EventEmitter"),i=function(){function t(){}return t.on=function(t,e,n){this._emitter.on(t,e,n)},t.once=function(t,e){this._emitter.once(t,e)},t.off=function(t,e,n){this._emitter.off(t,e,n)},t.emit=function(t,e){var n={};n.event=t,n.data=e,this._emitter.emit(t,n)},t.release=function(){this._emitter.removeEvent()},t._emitter=new o.EventEmitter,t}();n.default=i,cc._RF.pop()},{"./EventEmitter":"EventEmitter"}],IEntity:[function(t,e,n){"use strict";cc._RF.push(e,"81616bjSeJOWL0nHMekuFsX","IEntity"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IPoolHandlerComp:[function(t,e,n){"use strict";cc._RF.push(e,"8f9f9Xcty9Dca9kfjqZz1Z4","IPoolHandlerComp"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IState:[function(t,e,n){"use strict";cc._RF.push(e,"46e8dUHrbBGY7eZK0x5Ad6J","IState"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ListenerManager:[function(t,e,n){"use strict";cc._RF.push(e,"f972ebJY8pBYaH1SNRxPIgX","ListenerManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ListenerManager=void 0;var o=function(){function t(){this.handle={}}return t.getInstance=function(){return null===this._instance&&(this._instance=new t),this._instance},t.prototype.on=function(t,e,n){if(!this.hasEvent(t,e,n)){this.handle[t]||(this.handle[t]=[]);var o={func:e,target:n};this.handle[t].push(o)}},t.prototype.off=function(t,e,n){var o=this.handle[t];if(o&&!(o.length<=0))for(var i=0;i<o.length;i++){var r=o[i];if(e==r.func&&(!n||n==r.target)){o.splice(i,1);break}}},t.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.handle[t];if(o&&!(o.length<=0))for(var i=0;i<o.length;i++){var r=o[i];r.func.apply(r.target,e)}},t.prototype.removeAll=function(t){if(t)for(var e in this.handle)for(var n=0,o=(i=this.handle[e]).length;n<o;n++)i[n].target==t&&(i.splice(n,1),o>0&&o--,n--);else for(var e in this.handle)for(var i=this.handle[e];i.length>0;)i.pop()},t.prototype.hasEvent=function(t,e,n){var o=this.handle[t];if(!o||o.length<=0)return!1;for(var i=0;i<o.length;i++){var r=o[i];if(e==r.func&&(!n||n==r.target))return!0}return!1},t._instance=null,t}();n.ListenerManager=o.getInstance(),cc._RF.pop()},{}],MessageDispatcher:[function(t,e,n){"use strict";cc._RF.push(e,"69c6ax5ZJpBEpK92jLDJz1D","MessageDispatcher");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TreeSet=n.MessageDispatcher=void 0;var r=t("../entity/EntityManager"),s=t("./Telegram"),a=function(){function t(){this.SEND_MSG_IMMEDIATELY=0,this.NO_ADDITIONAL_INFO=0,this.PriorityQ=new u(function(t,e){return t-e}),this.showList=new Array}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.Discharge=function(t,e){this.showList.push(e),t.stateMachine.HandleMessage(e)},Object.defineProperty(t.prototype,"showListData",{get:function(){return this.showList},enumerable:!1,configurable:!0}),t.prototype.DispatchMessage=function(t,e,n,o,i){void 0===o&&(o=null),void 0===i&&(i=0),r.default.instance.getEntityFromID(t);var a=r.default.instance.getEntityFromID(e);if(null!=a){var u=new s.Telegram(0,t,e,n,o);i<=0?this.Discharge(a,u):(u.DispatchTime=Date.now(),this.PriorityQ.add(u))}else console.warn("\nWarning! No Receiver with ID of "+e+" found")},t.prototype.DispatchDelayedMessages=function(){for(;!this.PriorityQ.isEmpty&&this.PriorityQ.first.DispatchTime<=Date.now()&&this.PriorityQ.first.DispatchTime>0;){var t=this.PriorityQ.first,e=r.default.instance.getEntityFromID(t.Receiver);this.Discharge(e,t),this.PriorityQ.remove(this.PriorityQ.first)}},t.prototype.DispatchSimpleMessage=function(t,e){var n=t,o=e;if(null!=o){var i=new s.Telegram(0,n.sid,e.sid,0,null);this.Discharge(o,i)}else console.warn("\nWarning! No Receiver with ID of "+e+" found")},t}();n.MessageDispatcher=a;var u=function(t){function e(e){var n=t.call(this)||this;return n.sortFun=e,n}return i(e,t),e.prototype.add=function(e){return t.prototype.add.call(this,e)},e.prototype.remove=function(t){return this.delete(t)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e}(Set);n.TreeSet=u,cc._RF.pop()},{"../entity/EntityManager":"EntityManager","./Telegram":"Telegram"}],MessageType:[function(t,e,n){"use strict";cc._RF.push(e,"ae711usnvJAFaoPZpVvkVVa","MessageType"),Object.defineProperty(n,"__esModule",{value:!0}),n.MessageType=void 0;n.MessageType=function(){},cc._RF.pop()},{}],PrefabPool:[function(t,e,n){"use strict";cc._RF.push(e,"759bf7Bj25OdZtTX0hppNJE","PrefabPool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.get=function(e,n,o){var i;void 0===o&&(o=null),null==t.mPoolList[n]&&(t.mPoolList[n]=[]);var r=t.mPoolList[n];r.length>0?i=r.pop():(i=cc.instantiate(e)).poolKey=n;var s=o?i.getComponent(o):null;return s&&s.reuse&&s.reuse.apply(s,arguments),i},t.put=function(e,n,o){if(void 0===o&&(o=null),e.hasOwnProperty("poolKey")){var i=t.mPoolList[n];if(i&&-1==i.indexOf(e)){e.removeFromParent(!1);var r=o?e.getComponent(o):null;r&&r.unuse&&r.unuse(),i.push(e)}}else cc.warn("put "+e.name+" failed, can't find property poolKey.")},t.clear=function(e){var n=t.mPoolList[e];if(n)for(var o=void 0;n.length;)(o=n.shift())&&o.destroy()},t.clearAll=function(){for(var e in t.mPoolList)this.clear(e);t.mPoolList={}},t.size=function(e){var n=t.mPoolList[e];return n?n.length:0},t.mPoolList={},t}();n.default=o,cc._RF.pop()},{}],StateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"ead94P1jsVNu6ScrAUL7Dsv","StateMachine"),Object.defineProperty(n,"__esModule",{value:!0}),n.StateMachine=void 0;var o=function(){function t(t){this.m_pOwner=t,this.m_pCurrentState=null,this.m_pPreviousState=null,this.m_pGlobalState={}}return t.prototype.release=function(){if(this.m_pCurrentState&&this.m_pCurrentState.exit(),this.m_pGlobalState){for(var t in this.m_pGlobalState)this.m_pGlobalState[t].exit(),delete this.m_pGlobalState[t];this.m_pGlobalState=null}},t.prototype.AddGlobalState=function(t,e){var n=new t;n.entity=this.m_pOwner,this.m_pGlobalState[t]=n,n.enter(e)},t.prototype.RemoveGlobalState=function(t){this.m_pGlobalState[t]&&(this.m_pGlobalState[t].exit(),delete this.m_pGlobalState[t])},t.prototype.Update=function(t){if(null!==this.m_pGlobalState)for(var e in this.m_pGlobalState)this.m_pGlobalState[e].execute(t);null!==this.m_pCurrentState&&this.m_pCurrentState.execute(t)},t.prototype.Transition=function(t){this.m_pPreviousState=this.m_pCurrentState;var e=t(this.m_pPreviousState);this.m_pCurrentState=e},t.prototype.ChangeState=function(t,e){this.m_pPreviousState=this.m_pCurrentState,this.m_pPreviousState&&this.m_pPreviousState.exit(this.m_pOwner),this.m_pCurrentState=new t,this.m_pCurrentState.entity=this.m_pOwner,this.m_pCurrentState.enter(e)},t.prototype.HandleMessage=function(t){var e=this;return!(!this.m_pCurrentState||!this.m_pCurrentState.onMessage(this.m_pOwner,t))||(this.m_pGlobalState&&this.m_pGlobalState.forEach(function(n){n.onMessage(e.m_pOwner,t)}),!1)},t.prototype.RevertPreviousState=function(){this.ChangeState(this.m_pPreviousState)},t.prototype.isInState=function(t){var e=this.m_pCurrentState instanceof t,n=!1;for(var o in this.m_pGlobalState)if(this.m_pGlobalState[o]instanceof t){n=!0;break}return e||n},t.prototype.exitCurrentState=function(t){this.CurrentState&&this.CurrentState.exit(t),this.m_pCurrentState.entity=null,this.m_pPreviousState=null,this.m_pCurrentState=null},Object.defineProperty(t.prototype,"CurrentState",{get:function(){return this.m_pCurrentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GlobalState",{get:function(){return this.m_pGlobalState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"PreviousState",{get:function(){return this.m_pPreviousState},enumerable:!1,configurable:!0}),t}();n.StateMachine=o,cc._RF.pop()},{}],Telegram:[function(t,e,n){"use strict";cc._RF.push(e,"9960dDCS2xDJKOSmbHYNFbj","Telegram"),Object.defineProperty(n,"__esModule",{value:!0}),n.Telegram=void 0;var o=function(){function t(t,e,n,o,i){void 0===i&&(i=null),this.SmallestDelay=.25,this.Sender=e,this.Receiver=n,this.Msg=o,this.DispatchTime=t,this.time=Date.now(),this.ExtraInfo=i}return Object.defineProperty(t.prototype,"sortSerial",{get:function(){return this.DispatchTime},enumerable:!1,configurable:!0}),t}();n.Telegram=o,cc._RF.pop()},{}],TigoManager:[function(t,e,n){"use strict";cc._RF.push(e,"8305fn4aM1EUZF6HtfZGz6/","TigoManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./event/BaseEvent"),i=t("./event/ListenerManager"),r=function(){function t(){this.appInfo=null,this.userId="",this.classId="",this.moduleId="",this.lessonModuleId="",this.manageMentIndex=1,this.packageId="",this.nextLessonModelId="",this.nextType="",this.ManageType={CocosIn:1001,CocosOut:1002,gameLink:1003,gameScore:1004,gameEvent:1005},this.ManageResult={CocosIn:0,CocosOut:0,gameScore:0,gameLink_Right:1,gameLink_Error:0,gameEvent:1},this.ReportType={report_reward:"api/reward/info",report_speed:"api/course/speed",report_operate:"api/operate/infoV2"},this.CocosByNativeAction={TiGoHttp:"TiGoHttp",TiGoClose:"TiGoClose",replayOrNext:"replayOrNext",TiGoStorage:"TiGoStorage",TiGoBaseInfo:"TiGoBaseInfo",TiGoLifecycle:"TiGoLifecycle",TiGoStopRecord:"TiGoStopRecord",TiGoStartRecord:"TiGoStartRecord",TiGoRecordFinish:"TiGoRecordFinish",TiGoVoiceEvaluation:"TiGoVoiceEvaluation",TiGoVoiceEvaluationFinish:"TiGoVoiceEvaluationFinish",TiGoStarsAnimation:"TiGoStarsAnimation",TiGoStartMotion:"TiGoStartMotion",TiGoStopMotion:"TiGoStopMotion",TiGoAnalyse:"TiGoAnalyse"}}return t.getInstance=function(){return this._instance||(this._instance=new t,this._instance.getBaseInfo()),console.log("TigoManager _instance is success"),this._instance},t.prototype.setBaseInfo=function(t){console.log("setBaseInfo ====== "+t);var e=JSON.parse(t);e&&(this.appInfo=e,this.setUserId(e.userId),this.setClassId(e.lessonId),this.setModuleId(e.moduleId),this.setLessonModuleId(e.lessonModuleId),this.setPackageId(e.packageId),this.setNextLessonModelId(e.nextLessonModelId),this.setNextType(e.nextType))},t.prototype.setClassId=function(t){t&&(this.classId=t)},t.prototype.setUserId=function(t){t&&(this.userId=t)},t.prototype.setModuleId=function(t){t&&(this.moduleId=t)},t.prototype.setLessonModuleId=function(t){t&&(this.lessonModuleId=t)},t.prototype.setPackageId=function(t){t&&(this.packageId=t)},t.prototype.setNextLessonModelId=function(t){t&&(this.nextLessonModelId=t)},t.prototype.setNextType=function(t){t&&(this.nextType=t)},t.prototype.callAppToClose=function(t,e){void 0===e&&(e=!1);var n=e?{action:this.CocosByNativeAction.TiGoClose,param:{closeNext:t}}:{action:this.CocosByNativeAction.TiGoClose,param:{}};console.log("callAppToClose ============== "+JSON.stringify(n)),this.getNative(n)},t.prototype.callMotion=function(t){void 0===t&&(t=!1);var e={action:t?this.CocosByNativeAction.TiGoStartMotion:this.CocosByNativeAction.TiGoStopMotion};this.getNative(e),cc.log("callMotion ============== "+JSON.stringify(e))},t.prototype.callAppToRecord=function(t,e){var n={action:this.CocosByNativeAction.TiGoStartRecord,param:{name:"record",time:t.toString(),standardText:e}};this.getNative(n),console.log("callAppToRecord ============== "+JSON.stringify(n))},t.prototype.callAppToStopRecord=function(){var t={action:this.CocosByNativeAction.TiGoStopRecord};this.getNative(t),console.log("callAppToStopRecord ============== "+JSON.stringify(t))},t.prototype.callAppToResult=function(t,e){var n={action:this.CocosByNativeAction.TiGoVoiceEvaluation,param:{standardText:t||"",path:e}};this.getNative(n),console.log("callAppToResult ============== "+JSON.stringify(n))},t.prototype.callAppToStorage=function(t,e,n){void 0===n&&(n=0);var o="";switch(t){case"PUT":o=n.toString()}var i={action:this.CocosByNativeAction.TiGoStorage,param:{method:t,key:e,value:o.toString()}};if(console.log("callAppToStorage ============== "+JSON.stringify(i)),window.tiGo)return window.tiGo.callApp(JSON.stringify(i));if(window.webkit){var r=window.prompt("callApp",JSON.stringify(i));return console.log(r),r}},t.prototype.callAppToHttp=function(t,e,n){var o=this.userId,i=this.classId,r=this.lessonModuleId;console.log("userId ====== "+o+"   lessonId ====== "+i+"    lessonModuleId ===== "+r);var s={userId:o,lessonId:i,lessonModelId:r,redVal:e,openVal:n},a={action:this.CocosByNativeAction.TiGoHttp,param:{url:this.ReportType.report_reward,method:t,params:s,unique:this.classId}};this.getNative(a),console.log("callAppToHttp ============== "+JSON.stringify(a))},t.prototype.callAppToLoaded=function(){var t={action:this.CocosByNativeAction.TiGoLifecycle,param:{name:"loaded",param:""}};this.getNative(t),console.log("callAppToLoaded ============== "+JSON.stringify(t))},t.prototype.getBaseInfo=function(){var t={action:this.CocosByNativeAction.TiGoBaseInfo};if(console.log("getBaseInfo ============== "+JSON.stringify(t)),window.tiGo){var e=window.tiGo.callApp(JSON.stringify(t));return this.setBaseInfo(e),console.log(e),console.log("tiGo BaseInfo ==== "+e),e}if(window.webkit)return e=window.prompt("callApp",JSON.stringify(t)),this.setBaseInfo(e),console.log("webkit BaseInfo ==== "+e),e},t.prototype.getAppInfo=function(){var t={action:this.CocosByNativeAction.TiGoBaseInfo},e=null;return null==this.appInfo&&(window.tiGo?(e=window.tiGo.callApp(JSON.stringify(t)),this.appInfo=JSON.parse(e)):window.webkit&&(e=window.prompt("callApp",JSON.stringify(t)),this.appInfo=JSON.parse(e))),this.appInfo},t.prototype.callAppToCollect=function(t,e,n){var o={userId:this.userId,lessonId:this.classId,lessonModelId:this.lessonModuleId,gameIndex:t,type:e,result:n,timestamp:this.getTime()},i={action:this.CocosByNativeAction.TiGoHttp,param:{url:this.ReportType.report_operate,method:"POST",params:o}};this.getNative(i),console.log("callAppToCollect ============== "+JSON.stringify(i))},t.prototype.getTime=function(){var t=Date.now().toString();return t.substr(0,10)},t.prototype.callAppToSpeed=function(){var t=this.ReportType.report_speed,e={userId:this.userId,type:this.moduleId,speedVal:2,lessonModelId:this.lessonModuleId,packageId:this.packageId,nextLessonModelId:this.nextLessonModelId,nextType:this.nextType};this.callAppToHttp(t,"POST",e)},t.prototype.getNative=function(t){window.tiGo&&window.tiGo.callApp(JSON.stringify(t)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(t))},t.prototype.callAppToTigoStar=function(t){var e={action:this.CocosByNativeAction.TiGoStarsAnimation,param:{score:t.toString()}};this.getNative(e),console.log("callAppToTigoStar ============== "+JSON.stringify(e))},t.prototype.callPoint=function(t,e){var n={action:this.CocosByNativeAction.TiGoAnalyse,param:{analyseAction:"logEvent",analyseParam:{analyseId:t,analyseData:e}}};this.getNative(n),console.log("callAppToLoaded ============== "+JSON.stringify(n))},t._instance=null,t}();window.callCocos=function(t){return"TiGoLifecycle"==t.action?i.ListenerManager.dispatch(o.BaseEvent.EVENT_NATIVE_LOADED,t):i.ListenerManager.dispatch(o.BaseEvent.EVENT_NATIVE_CALL_COCOS,t),"callByAndroidParam ok!"},n.default=r.getInstance(),cc._RF.pop()},{"./event/BaseEvent":"BaseEvent","./event/ListenerManager":"ListenerManager"}],TimerSystem:[function(t,e,n){"use strict";cc._RF.push(e,"38429vE6/hOeYvTa+IgeeYh","TimerSystem"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._pool=new Array,this._handlers={},this._currTimer=0,this._currFrame=0,this._count=0,this._index=0,this._startTime=0,this._counterMap=new Map}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t,t._instance.init()),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this;return new Promise(function(n){e._startTime=Date.now(),e._currTimer=Date.now(),cc.director.getScheduler().enableForTarget(e),cc.director.getScheduler().schedule(e.onEnterFrame,e,t.INTERVAL),n()})},t.prototype.onEnterFrame=function(t){var e,n=this;this._currFrame++,this._currTimer=Date.now();var o=[];for(e in this._handlers)if("undefined"!==e){var i=this._handlers[e],r=i.userFrame?this._currFrame:this._currTimer;if(r>=i.exeTime){var s=i.method,a=i.args||[t];if(i.repeat)for(;r>=i.exeTime&&e in this._handlers;)i.exeTime+=i.delay,s.apply(i.thisObj,a);else s.apply(i.thisObj,a),o.push(e)}}else console.log(e);o.forEach(function(t){n.clearTimer(t)})},t.prototype.create=function(t,e,n,o,r,s,a){var u;if(void 0===r&&(r=null),void 0===s&&(s=null),void 0===a&&(a=!0),a?(this.clearTimer(o),u=o):u=this._index++,n<1)return o.apply(null,s),-1;var c=this._pool.length>0?this._pool.pop():new i;return c.userFrame=t,c.repeat=e,c.delay=n,c.method=o,c.thisObj=r,c.args=s,c.exeTime=n+(t?this._currFrame:this._currTimer),this._handlers[u]=c,this._count++,u},t.prototype.timerStart=function(t){if(t){if(this._counterMap.has(t)){var e=this._counterMap.get(t),n=e.durTime;return e.resetDurTime(),n}var o=new r(t);this._counterMap.set(t,o)}else cc.error("timerStart signKey null!")},t.prototype.timerEnd=function(t){if(t){if(!this._counterMap.has(t))return 0;var e=this._counterMap.get(t).durTime;return this._counterMap.delete(t),e}cc.error("timerStart signKey null!")},t.prototype.doOnce=function(t,e,n,o,i){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=!0),this.create(!1,!1,t,e,n,o,i)},t.prototype.doLoop=function(t,e,n,o,i){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=!0),this.create(!1,!0,t,e,n,o,i)},t.prototype.doFrameOnce=function(t,e,n,o,i){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=!0),this.create(!0,!1,t,e,n,o,i)},t.prototype.doFrameLoop=function(t,e,n,o,i){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=!0),this.create(!0,!0,t,e,n,o,i)},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),t.prototype.clearTimer=function(t){var e=this._handlers[t];null!=e&&(delete this._handlers[t],e.clear(),this._pool.push(e),this._count--)},t.prototype.running=function(t){return null!=this._handlers[t]},t.prototype.release=function(){for(var t in this._handlers)this.clearTimer(this._handlers[t])},t.INTERVAL=1/60,t}();n.default=o;var i=function(){function t(){this.delay=0,this.exeTime=0}return t.prototype.clear=function(){this.method=null,this.args=null,this.thisObj=null},t}(),r=function(){function t(t){this.signKey=t}return t.prototype.resetDurTime=function(){this.durTime=0},t}();cc._RF.pop()},{}],cancelable:[function(t,e,n){"use strict";cc._RF.push(e,"c20983bZNZMr7JanIuLef9o","cancelable");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{u(o.next(t))}catch(e){r(e)}}function a(t){try{u(o.throw(t))}catch(e){r(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return u([t,e])}}function u(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};function r(t,e){var n=this;void 0===e&&(e=!1);var r,s,a,u=!1,c=new Promise(function(t,e){r=t,s=e});return Object.defineProperty(c,"canceled",{configurable:!0,enumerable:!0,get:function(){return u}}),c.cancel=function(){return o(n,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:if(u)return[3,5];u=!0,n.label=1;case 1:return n.trys.push([1,4,,5]),t?[4,t()]:[3,3];case 2:a=n.sent(),n.label=3;case 3:return r(a),[3,5];case 4:return e=n.sent(),s(e),[3,5];case 5:return[2,a]}})})},e&&c.cancel(),c}function s(t){var e=r(function(){return Promise.all(t.map(function(t){return t.cancel()}))});return Promise.all(t).then(function(){return e.cancel()}),e}Object.defineProperty(n,"__esModule",{value:!0}),n.syncCancelables=n.combineCancelables=n.isCancelable=n.createCancelable=void 0,n.createCancelable=r,n.isCancelable=function(t){return t instanceof Promise&&t.cancel instanceof Function&&"boolean"==typeof t.canceled},n.combineCancelables=s,n.syncCancelables=function t(e){if((e=e.filter(function(t){return t})).length>2){var n=s(e);e.forEach(function(e){return t([e,n])})}else 2===e.length&&(e[0].then(function(){return e[1].cancel()}),e[1].then(function(){return e[0].cancel()}));return e},cc._RF.pop()},{}]},{},["TigoManager","AssetItem","AssetsManger","AudioManager","AudioUtil","cancelable","BaseEvent","EventEmitter","EventSystem","ListenerManager","StateMachine","EntityManager","IEntity","MessageDispatcher","MessageType","Telegram","IState","IPoolHandlerComp","PrefabPool","TimerSystem"]);