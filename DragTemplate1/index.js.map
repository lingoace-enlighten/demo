{"version":3,"sources":["assets/Pages/DragTemplate1/scripts/DragTemplate1Config.ts","assets/Pages/DragTemplate1/scripts/DragTemplate1.ts"],"names":["exports","DragTemplate1Config","gameBg","drag","dragImage","dragAudio","zIndexDrag","dragPosition","dragRightImage","dragRightPosition","dragEndImage","dragEndPosition","zIndexDragRight","else","DragTemplate1Config_1","require","_a","cc","_decorator","ccclass","property","DragTemplate1","_super","_this","apply","this","arguments","answerNode","dragNode","dragBox","dragEndBox","dragBoxMask","answerBox","elseBox","TemplateGameType","message","dragStart","dragNum","rightArr","rightNum","errorNum","dragArr","dragArr2","dragEndArr","dragEndArr2","canMove","canClick","dragData","__extends","prototype","onLoad","gameData","state","changeData","gameInit","content","open","center","components","type","StartGame","show","snapShot","getSnapshot","console","log","receiveMessage","onGameReady","lessonConfig","i","data","elseDragRightImage","length","loadImage","then","img","getComponent","Sprite","spriteFrame","_loop_1","newDrag","instantiate","this_1","setParent","x","y","zIndex","getChildByName","width","height","push","newDragRight","_loop_2","this_2","_loop_3","this_3","on","Node","EventType","TOUCH_START","TOUCH_MOVE","event","dragMove","TOUCH_END","dragEnd","TOUCH_CANCEL","_loop_4","this_4","active","_loop_5","this_5","dragStartEdit","dragMoveEdit","dragEndEdit","_loop_6","this_6","_loop_7","this_7","_loop_8","this_8","arr","index","delta","touch","getDelta","scale","parent","name","saveData","JSON","stringify","postMessage","errNum","__awaiter","Promise","getData","parse","kit","Audio","playEffect","dragRight","dragError","bundleName","errorTween","sent","node","resolve","tween","by","call","start","timeout","update","url","CCMLoader","image","SpriteFrame","__decorate","Prefab","displayName","SubGameBase","default"],"mappings":"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","sourcesContent":["export const DragTemplate1Config = {\n    \"gameBg\": \"res/images/image29\",\n    \"drag\": [\n        {\n            \"dragImage\": \"res/images/image35\",\n            \"dragAudio\": \"res/audios/media5\",\n            \"zIndexDrag\": 1,\n            \"dragPosition\": [-567, 314],\n            \"dragRightImage\": \"res/images/image33\",\n            \"dragRightPosition\": [140, 51],\n            \"dragEndImage\": \"res/images/image35\",\n            \"dragEndPosition\": [320, 115],\n            \"zIndexDragRight\": 3,\n        },\n        {\n            \"dragImage\": \"res/images/image36\",\n            \"dragAudio\": \"res/audios/media6\",\n            \"zIndexDrag\": 2,\n            \"dragPosition\": [-567, 58],\n            \"dragRightImage\": \"res/images/image32\",\n            \"dragRightPosition\": [300, 330],\n            \"dragEndImage\": \"res/images/image36\",\n            \"dragEndPosition\": [477, 340],\n            \"zIndexDragRight\": 2,\n        },\n        {\n            \"dragImage\": \"res/images/image37\",\n            \"dragAudio\": \"res/audios/media4\",\n            \"zIndexDrag\": 3,\n            \"dragPosition\": [-567, -178],\n            \"dragRightImage\": \"res/images/image34\",\n            \"dragRightPosition\": [461, -314],\n            \"dragEndImage\": \"res/images/image37\",\n            \"dragEndPosition\": [535, -232],\n            \"zIndexDragRight\": 4,\n        },\n    ],\n    \"else\": [\n        {\n            \"dragRightImage\": \"res/images/image31\",\n            \"dragRightPosition\": [-330, 340],\n            \"zIndexDragRight\": 1,\n        }\n    ]\n}\n","import { DragTemplate1Config } from \"./DragTemplate1Config\";\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class DragTemplate1 extends center.SubGameBase {\n    @property({ type: cc.Prefab, displayName: \"answerNode\" }) answerNode: cc.Prefab = null\n    @property({ type: cc.Prefab, displayName: \"dragNode\" }) dragNode: cc.Prefab = null\n    @property({ type: cc.Node, displayName: \"dragBox\" }) dragBox: cc.Node = null\n    @property({ type: cc.Node, displayName: \"dragEndBox\" }) dragEndBox: cc.Node = null\n    @property({ type: cc.Node, displayName: \"dragBoxMask\" }) dragBoxMask: cc.Node = null\n    @property({ type: cc.Node, displayName: \"answerBox\" }) answerBox: cc.Node = null\n    @property({ type: cc.Node, displayName: \"elseBox\" }) elseBox: cc.Node = null\n    @property({ type: cc.Node, displayName: \"gameBg\" }) gameBg: cc.Node = null\n    private TemplateGameType = \"edit\"\n    private message = {\n        dragStart: false,\n        dragNum: null,\n        rightArr: [],\n        rightNum: null,\n        errorNum: null,\n    }\n    private gameData\n    private dragArr = []\n    private dragArr2 = []\n    private dragEndArr = []\n    private dragEndArr2 = []\n    private canMove = false\n    private canClick = true\n    private dragData={\n        drag:[\n            {\n                \"dragPosition\": [-567, 314],\n                \"dragRightPosition\": [140, 51],\n                \"dragEndPosition\": [320, 115],\n            },\n            {\n                \"dragPosition\": [-567, 58],\n                \"dragRightPosition\": [300, 330],\n                \"dragEndPosition\": [477, 340],\n            },\n            {\n                \"dragPosition\": [-567, -178],\n                \"dragRightPosition\": [461, -314],\n                \"dragEndPosition\": [535, -232],\n            },\n        ],\n        \"else\": [\n            {\n                \"dragRightPosition\": [-330, 340],\n            }\n        ]\n    }\n    onLoad() {\n        this.gameData = DragTemplate1Config;\n        if (this.state == \"game\") {\n            this.TemplateGameType = \"game\"\n        }\n        // this.lessonConfig = {\n        //     \"data\": [\n        //         {\n        //             \"dragRightImage2\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/bf629f5851ad80af4651be27112d221c.png\",\n        //             \"dragRightImage1\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/2d128f090a3eacd23bf0001b7c2d1732.png\",\n        //             \"Option1\": \"1\",\n        //             \"dragRightImage3\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/a64caa88b08754516927179fd4e1b710.png\",\n        //             \"elseDragRightImage\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/4bf85c113418d8daeac3543a8a611a98.png\",\n        //             \"dragEndImage2\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/56c8ff5f03901c0791a144e0714edf98.png\",\n        //             \"dragEndImage3\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/120014f41f46e7dd938283b26efdc753.png\",\n        //             \"dragEndImage1\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/51897b384416998a680619c6edfb4d6f.png\",\n        //             \"dragImage3\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/120014f41f46e7dd938283b26efdc753.png\",\n        //             \"dragImage2\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/56c8ff5f03901c0791a144e0714edf98.png\",\n        //             \"dragImage1\": \"\",\n        //             \"gameBg\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/10f965eac4bff904223560fe87945394.png\",\n        //             \"dragAudio3\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/2d4ab849839f361f7e46943f64016851.mp3\",\n        //             \"dragAudio2\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/4f8b1cc056bb24734c1b803e259422e2.mp3\",\n        //             \"dragAudio1\": \"https://test-cdn.lingo-ace.com/teach/test/unity/classIn/2022/0823/06f9c2f48107fcec758b592cd8435314.mp3\",\n        //             \"dragData\":\"\",\n        //         }\n        //     ]\n        // }\n        this.changeData();\n        \n        this.gameInit()\n        if (CC_BUILD) {\n            this.content.open<center.components.StartGame>(center.components.type.StartGame).show(() => {\n            }, this);\n            let snapShot: any = this.content.getSnapshot();\n            if (snapShot) {\n                console.log(\"重连\");\n                this.receiveMessage(snapShot);\n            }\n            this.onGameReady();\n        } else {\n            this.isTeacher = true;\n        }\n    }\n    private changeData(){\n        console.log(\"得到lessonConfig\",this.lessonConfig);\n        for (let i = 1; i < 4; i++) {\n            if(this.lessonConfig.data[0][\"dragImage\"+i]){\n                this.gameData.drag[i-1].dragImage=this.lessonConfig.data[0][\"dragImage\"+i]\n            }\n            if(this.lessonConfig.data[0][\"dragEndImage\"+i]){\n                this.gameData.drag[i-1].dragEndImage=this.lessonConfig.data[0][\"dragEndImage\"+i]\n            }\n            if(this.lessonConfig.data[0][\"dragAudio\"+i]){\n                this.gameData.drag[i-1].dragAudio=this.lessonConfig.data[0][\"dragAudio\"+i]\n            }\n            if(this.lessonConfig.data[0][\"dragRightImage\"+i]){\n                this.gameData.drag[i-1].dragRightImage=this.lessonConfig.data[0][\"dragRightImage\"+i]\n            }\n        }\n        if(this.lessonConfig.data[0][\"gameBg\"]){\n            this.gameData.gameBg=this.lessonConfig.data[0][\"gameBg\"]\n        }\n        if(this.lessonConfig.data[0][\"elseDragRightImage\"]){\n            this.gameData.elseDragRightImage=this.lessonConfig.data[0][\"elseDragRightImage\"]\n        }\n        \n        if(this.lessonConfig.data[0][\"dragData\"]){\n            for (let i = 0; i < this.lessonConfig.data[0][\"dragData\"].drag.length; i++) {\n                this.dragData.drag[i].dragPosition[0] = this.lessonConfig.data[\"dragData\"].drag[i].dragPosition[0];\n                this.dragData.drag[i].dragPosition[1] = this.lessonConfig.data[\"dragData\"].drag[i].dragPosition[1];\n                this.dragData.drag[i].dragEndPosition[0] = this.lessonConfig.data[\"dragData\"].drag[i].dragEndPosition[0];\n                this.dragData.drag[i].dragEndPosition[1] = this.lessonConfig.data[\"dragData\"].drag[i].dragEndPosition[1];\n                this.dragData.drag[i].dragRightPosition[0] = this.lessonConfig.data[\"dragData\"].drag[i].dragRightPosition[0];\n                this.dragData.drag[i].dragRightPosition[1] = this.lessonConfig.data[\"dragData\"].drag[i].dragRightPosition[1];\n            }\n            for (let i = 0; i < this.lessonConfig.data[0][\"dragData\"].else.length; i++) {\n                this.dragData.else[i].dragRightPosition[0] = this.lessonConfig.data[\"dragData\"].else[i].dragRightPosition[0];\n                this.dragData.else[i].dragRightPosition[1] = this.lessonConfig.data[\"dragData\"].else[i].dragRightPosition[1];\n            }\n        }\n    }\n    private gameInit() {\n        console.log(`gameData`, this.gameData);\n        this.loadImage(this.gameData.gameBg).then((img) => {\n            this.gameBg.getComponent(cc.Sprite).spriteFrame = img;\n        });\n        //添加拖拽元素\n        for (let i = 0; i < this.gameData.drag.length; i++) {\n            //drag\n            let newDrag = cc.instantiate(this.dragNode);\n            newDrag.setParent(this.dragBoxMask);\n            newDrag.x = this.gameData.drag[i].dragPosition[0];\n            newDrag.y = this.gameData.drag[i].dragPosition[1];\n            newDrag.zIndex = this.gameData.drag[i].zIndexDrag;\n            this.loadImage(this.gameData.drag[i].dragImage).then((img) => {\n                newDrag.getChildByName(\"image\").getComponent(cc.Sprite).spriteFrame = img;\n                newDrag.width = newDrag.getChildByName(\"image\").width;\n                newDrag.height = newDrag.getChildByName(\"image\").height;\n            })\n\n            this.loadImage(this.gameData.drag[i].dragEndImage).then((img) => {\n                newDrag.getChildByName(\"endImage\").getComponent(cc.Sprite).spriteFrame = img;\n            });\n            this.dragArr.push(newDrag);\n            //dragRight\n            let newDragRight = cc.instantiate(this.answerNode);\n            newDragRight.setParent(this.answerBox);\n            newDragRight.x = this.gameData.drag[i].dragRightPosition[0];\n            newDragRight.y = this.gameData.drag[i].dragRightPosition[1];\n            newDragRight.zIndex = this.gameData.drag[i].zIndexDragRight;\n            this.loadImage(this.gameData.drag[i].dragRightImage).then((img) => {\n                newDragRight.getChildByName(\"image\").getComponent(cc.Sprite).spriteFrame = img;\n                newDragRight.width = newDragRight.getChildByName(\"image\").width;\n                newDragRight.height = newDragRight.getChildByName(\"image\").height;\n            });\n            this.dragEndArr.push(newDragRight);\n        }\n        //添加干扰元素\n        for (let i = 0; i < this.gameData.else.length; i++) {\n            let newDragRight = cc.instantiate(this.answerNode);\n            newDragRight.setParent(this.elseBox);\n            newDragRight.x = this.gameData.else[i].dragRightPosition[0];\n            newDragRight.y = this.gameData.else[i].dragRightPosition[1];\n            newDragRight.zIndex = this.gameData.else[i].zIndexDragRight;\n            this.loadImage(this.gameData.else[i].dragRightImage).then((img) => {\n                newDragRight.getChildByName(\"image\").getComponent(cc.Sprite).spriteFrame = img;\n                newDragRight.width = newDragRight.getChildByName(\"image\").width;\n                newDragRight.height = newDragRight.getChildByName(\"image\").height;\n            });\n            this.dragEndArr2.push(newDragRight);\n        }\n\n        //添加拖拽事件\n        if (this.TemplateGameType==\"game\") {\n            for (let i = 0; i < this.dragArr.length; i++) {\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_START, () => { this.dragStart(i) })\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_MOVE, (event) => { this.dragMove(i, event) })\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_END, () => { this.dragEnd(i) })\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_CANCEL, () => { this.dragEnd(i) })\n            }\n        } else {\n            //添加拖拽元素\n            for (let i = 0; i < this.gameData.drag.length; i++) {\n                //drag\n                let newDrag = cc.instantiate(this.dragNode);\n                newDrag.setParent(this.dragEndBox);\n                newDrag.x = this.gameData.drag[i].dragEndPosition[0];\n                newDrag.y = this.gameData.drag[i].dragEndPosition[1];\n                newDrag.getChildByName(\"text\").active = true;\n                newDrag.zIndex = this.gameData.drag[i].zIndexDrag;\n                this.loadImage(this.gameData.drag[i].dragEndImage).then((img) => {\n                    newDrag.getChildByName(\"image\").getComponent(cc.Sprite).spriteFrame = img;\n                    newDrag.width = newDrag.getChildByName(\"image\").width;\n                    newDrag.height = newDrag.getChildByName(\"image\").height;\n                });\n                this.dragArr2.push(newDrag);\n            }\n            for (let i = 0; i < this.dragArr.length; i++) {\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_START, () => { this.dragStartEdit(this.dragArr, i) })\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_MOVE, (event) => { this.dragMoveEdit(this.dragArr, i, event) })\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_END, () => { this.dragEndEdit(this.dragArr, i) })\n                this.dragArr[i].on(cc.Node.EventType.TOUCH_CANCEL, () => { this.dragEndEdit(this.dragArr, i) })\n            }\n            for (let i = 0; i < this.dragArr2.length; i++) {\n                this.dragArr2[i].on(cc.Node.EventType.TOUCH_START, () => { this.dragStartEdit(this.dragArr2, i) })\n                this.dragArr2[i].on(cc.Node.EventType.TOUCH_MOVE, (event) => { this.dragMoveEdit(this.dragArr2, i, event) })\n                this.dragArr2[i].on(cc.Node.EventType.TOUCH_END, () => { this.dragEndEdit(this.dragArr2, i) })\n                this.dragArr2[i].on(cc.Node.EventType.TOUCH_CANCEL, () => { this.dragEndEdit(this.dragArr2, i) })\n            }\n            for (let i = 0; i < this.dragEndArr.length; i++) {\n                this.dragEndArr[i].on(cc.Node.EventType.TOUCH_START, () => { this.dragStartEdit(this.dragEndArr, i) })\n                this.dragEndArr[i].on(cc.Node.EventType.TOUCH_MOVE, (event) => { this.dragMoveEdit(this.dragEndArr, i, event) })\n                this.dragEndArr[i].on(cc.Node.EventType.TOUCH_END, () => { this.dragEndEdit(this.dragEndArr, i) })\n                this.dragEndArr[i].on(cc.Node.EventType.TOUCH_CANCEL, () => { this.dragEndEdit(this.dragEndArr, i) })\n            }\n            for (let i = 0; i < this.dragEndArr2.length; i++) {\n                this.dragEndArr2[i].on(cc.Node.EventType.TOUCH_START, () => { this.dragStartEdit(this.dragEndArr2, i) })\n                this.dragEndArr2[i].on(cc.Node.EventType.TOUCH_MOVE, (event) => { this.dragMoveEdit(this.dragEndArr2, i, event) })\n                this.dragEndArr2[i].on(cc.Node.EventType.TOUCH_END, () => { this.dragEndEdit(this.dragEndArr2, i) })\n                this.dragEndArr2[i].on(cc.Node.EventType.TOUCH_CANCEL, () => { this.dragEndEdit(this.dragEndArr2, i) })\n            }\n        }\n    }\n    private dragStartEdit(arr, index) {\n\n    }\n    private dragMoveEdit(arr, index, event) {\n        let delta = event.touch.getDelta();\n        arr[index].x += delta.x / this.dragBox.scale;\n        arr[index].y += delta.y / this.dragBox.scale;\n    }\n    private dragEndEdit(arr, index) {\n        switch (arr[index].parent.name) {\n            case \"dragBoxMask\":\n                this.dragData.drag[index].dragPosition[0] = arr[index].x;\n                this.dragData.drag[index].dragPosition[1] = arr[index].y;\n                break;\n            case \"dragEndBox\":\n                this.dragData.drag[index].dragEndPosition[0] = arr[index].x;\n                this.dragData.drag[index].dragEndPosition[1] = arr[index].y;\n                break;\n            case \"answerBox\":\n                this.dragData.drag[index].dragRightPosition[0] = arr[index].x;\n                this.dragData.drag[index].dragRightPosition[1] = arr[index].y;\n                break;\n            case \"elseBox\":\n                this.dragData.else[index].dragRightPosition[0] = arr[index].x;\n                this.dragData.else[index].dragRightPosition[1] = arr[index].y;\n                break;\n            default:\n                break;\n        }\n        console.log(\"游戏发给大厅数据\", this.dragData);\n        this.saveData(JSON.stringify(this.dragData))\n    }\n    private dragStart(index) {\n        if (!this.canClick) return\n        if (this.message.rightArr) {\n            for (let i = 0; i < this.message.rightArr.length; i++) {\n                if (index == this.message.rightArr[i]) return\n            }\n        }\n        this.canMove = true;\n        this.message.dragStart = true;\n        this.message.dragNum = index;\n        this.postMessage(JSON.stringify(this.message))\n    }\n    private dragMove(index, event) {\n        if (!this.canMove) return\n        let delta = event.touch.getDelta();\n        this.dragArr[index].x += delta.x / this.dragBox.scale;\n        this.dragArr[index].y += delta.y / this.dragBox.scale;\n        this.dragArr[index].zIndex = 100;\n    }\n    private dragEnd(index) {\n        if (!this.canMove) return\n        this.canMove = false;\n        this.message.dragNum = index;\n        this.dragArr[index].zIndex = this.gameData.drag[index].zIndexDrag;\n        if (this.dragArr[index].x >= this.dragEndArr[index].x - this.dragEndArr[index].width / 2\n            && this.dragArr[index].x <= this.dragEndArr[index].x + this.dragEndArr[index].width / 2\n            && this.dragArr[index].y >= this.dragEndArr[index].y - this.dragEndArr[index].height / 2\n            && this.dragArr[index].y <= this.dragEndArr[index].y + this.dragEndArr[index].height / 2\n        ) {\n            this.message.rightArr.push(index);\n            this.message.rightNum = index;\n            this.message.errorNum = null;\n        } else {\n            let errNum = -1;\n            for (let i = 0; i < this.dragEndArr.length; i++) {\n                if (this.dragArr[index].x >= this.dragEndArr[i].x - this.dragEndArr[i].width / 2\n                    && this.dragArr[index].x <= this.dragEndArr[i].x + this.dragEndArr[i].width / 2\n                    && this.dragArr[index].y >= this.dragEndArr[i].y - this.dragEndArr[i].height / 2\n                    && this.dragArr[index].y <= this.dragEndArr[i].y + this.dragEndArr[i].height / 2\n                ) {\n                    errNum = i\n                }\n            }\n            this.message.rightNum = null;\n            this.message.errorNum = errNum;\n        }\n        this.postMessage(JSON.stringify(this.message))\n\n    }\n    async receiveMessage(data: any): Promise<void> {\n        // 游戏自己实现接收消息的处理\n        let getData = JSON.parse(data);\n        console.log(\"getData\", getData);\n        if (!getData) return\n        for (let i = 0; i < getData.rightArr.length; i++) {\n            this.dragArr[getData.rightArr[i]].x = this.gameData.drag[getData.rightArr[i]].dragEndPosition[0];\n            this.dragArr[getData.rightArr[i]].y = this.gameData.drag[getData.rightArr[i]].dragEndPosition[1];\n            this.dragArr[getData.rightArr[i]].getChildByName(\"image\").active = false;\n            this.dragArr[getData.rightArr[i]].getChildByName(\"endImage\").active = true;\n        }\n        if (getData.dragStart) {\n            kit.Audio.playEffect(this.gameData.drag[getData.dragNum].dragAudio)\n            // AudioManager.playAudioSound(\"DragTemplate1\", this.gameData.drag[getData.dragNum].dragAudio)\n            this.message.dragStart = false;\n            this.message.dragNum = null;\n            this.dragArr[getData.dragNum].parent = this.dragBox;\n        } else {\n            if (getData.rightNum != null) {\n                this.dragRight(getData);\n            } else {\n                this.dragError(getData);\n            }\n            this.message = getData;\n        }\n    }\n    private async dragRight(getData) {\n        this.dragArr[getData.dragNum].x = this.gameData.drag[getData.dragNum].dragEndPosition[0];\n        this.dragArr[getData.dragNum].y = this.gameData.drag[getData.dragNum].dragEndPosition[1];\n        this.dragArr[getData.dragNum].getChildByName(\"image\").active = false;\n        this.dragArr[getData.dragNum].getChildByName(\"endImage\").active = true;\n        kit.Audio.playEffect( \"res/audios/media7\",{bundleName:\"DragTemplate1\"})\n    }\n    private async dragError(getData) {\n        this.canClick = false;\n        if (getData.errorNum != -1) {\n            kit.Audio.playEffect( \"res/audios/media8\",{bundleName:\"DragTemplate1\"})\n            await this.errorTween(this.dragEndArr[getData.errorNum]);\n        }\n        this.canClick = true\n        this.dragArr[getData.dragNum].x = this.gameData.drag[getData.dragNum].dragPosition[0];\n        this.dragArr[getData.dragNum].y = this.gameData.drag[getData.dragNum].dragPosition[1];\n        this.dragArr[getData.dragNum].parent = this.dragBoxMask;\n    }\n    private errorTween(node: cc.Node) {\n        return new Promise<void>((resolve, reject) => {\n            cc.tween(node)\n                .by(0.1, { x: 15 })\n                .by(0.2, { x: -30 })\n                .by(0.2, { x: 30 })\n                .by(0.1, { x: -15 })\n                .call(() => {\n                    resolve()\n                })\n                .start()\n        })\n\n    }\n    timeout(): void {\n        // 游戏自己实现超时的功能,暂时可以不实现\n    }\n    update(dt) {\n    }\n\n    private loadImage(url) {\n        return new Promise<cc.SpriteFrame>((resolve, reject) => {\n            // if (url.startsWith(\"http\") || url.startsWith(\"https\")) {\n            kit.CCMLoader.loadImage(url, \"DragTemplate1\").then((img) => {\n                let image = new cc.SpriteFrame(img)\n                resolve(image)\n            })\n            // } else {\n            //     console.log(\"图片地址错误，使用默认图片\");\n            //     AssetsManger.instance.loadImg(url, \"DragTemplate1\").then((img) => {\n            //         resolve(img)\n            //     });\n            // }\n        })\n    }\n}\n"],"file":"index.js"}