{"version":3,"sources":["assets/makeASentence/scripts/AnswerItem.ts","assets/makeASentence/scripts/Config.ts","assets/makeASentence/scripts/Delegate.ts","assets/makeASentence/scripts/MakeASentenceScript.ts","assets/makeASentence/scripts/QuestionItem.ts"],"names":["_a","cc","_decorator","ccclass","property","AnswerItem","_super","__extends","_this","apply","this","arguments","label","AnswerItem_1","prototype","setString","value","string","getString","isValueEqual","item","onDestroy","unuse","kit","pool","PrefabPool","put","node","reuse","log","__decorate","Label","Component","exports","default","Config","data","index","correctAnswer","questions","stopCode","require","Config_1","QuestionItem_1","Delegate","rootParam","lastOpTime","tipSpaceTime","root","operateLock","start","addListener","operation","resumeGameStatus","gameStart","isTeacher","scheduleOnce","startPos","questionNode","children","convertToWorldSpaceAR","Vec3","ZERO","convertToNodeSpaceAR","v2","x","y","endPos","rootNode","guildHand","delListener","curRoundData","curTarget","curTargetBasePos","setOperationLock","timeout","clearTimeout","backToBase","setOperationFree","step","setTimeout","checkShowOpTip","now","Date","words_1","forEach","correct","push","content","tipShow","tempData","curString_1","getComponent","position","clone","tween","to","easeCubicActionOut","call","exportOperationData","on","Node","EventType","TOUCH_START","onTouchBegin","TOUCH_MOVE","onTouchMoved","TOUCH_END","onTouchReleased","TOUCH_CANCEL","off","event","stopHand","stopTip","removeLayoutFromRoot","touchPos","getLocation","str","getCorrect","boundWorld","getBoundingBoxToWorld","contains","getPosition","setSiblingIndex","childrenCount","getDeltaX","getDeltaY","touchPos_1","curString_2","correct_1","intersectRect_1","moveToPos_1","split","indexOf","curBoundWorld","intersects","containRect","Rect","intersection","rect","length","maxRect","i","tempSize","size","tempArea","width","height","lastSize","lastArea","playersHurt","checkAllCorrect","curRound","round","removeAllChildren","createRoundElement","resumePosition","nodeStr","itemData","setPosition","nextRound","sentenceComplete","addItemToQuestion","addItemToRoot","addLayoutToRoot","tempData_1","layout","Layout","type","Type","GRID","resizeMode","ResizeMode","CONTAINER","startAxis","AxisDirection","HORIZONTAL","spacingX","spacingY","updateLayout","NONE","answers","count","get","answerPrefab","includes","substring","parent","questionPrefab","synchronous","opDt","temp","syncItemPosition","child","bool","allCorrect","hideLaser","Delegate_1","MakeASentenceScript","hand","leftDoor","rightDoor","lasers","max","melinda","mili","onLoad","delegate","laserBaseOpacity","laser","opacity","onGameReady","playIdle","snapData","actionData","showLasers","onStart","bind","cloneActDt","source","JSON","parse","stringify","setParams","setContent","snapShot","getSnapshot","receiveMessage","action","callBack","that","active","delay","playSpine","repeatForever","set","Tween","stopAllByTarget","words","showTip","hideTip","roundComplete","openTheDoor","onNextRound","easeCircleActionOut","onGameComplete","postMessage","dispatch","onToggleSwitch","ske","animation","loop","clearTracks","setToSetupPose","setAnimation","setCompleteListener","Prefab","sp","Skeleton","QuestionItem","scale"],"mappings":"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","sourcesContent":["import IItem from \"./IItem\";\n\n\nconst { ccclass, property } = cc._decorator;\n/**\n * 游戏显示逻辑\n */\n@ccclass\nexport default class AnswerItem extends cc.Component implements IItem, kit.pool.IPoolHandlerComp {\n    @property(cc.Label)\n    label: cc.Label = null;\n\n    setString(value: string) {\n        this.label.string = value;\n    }\n    getString(): string {\n        return this.label.string;\n    }\n\n    isValueEqual(item: IItem): boolean {\n        return item.getString() == this.getString();\n    }\n\n    onDestroy(): void {\n        this.unuse();\n        kit.pool.PrefabPool.put(this.node, \"answerItem\", AnswerItem);\n    }\n\n    reuse(): void {\n        cc.log(\"reuse item\");\n    }\n\n    unuse(): void {\n        cc.log(\"unuse item\");\n    }\n}","/**\n * 游戏配置\n */\nexport const Config = {\n    data: [\n        {\n            index: 0,\n            correctAnswer: \"What's your name\",\n            questions: [\n                \"your\",\n                \"name\",\n                \"What's\"\n            ],\n            stopCode: \"?\"\n        },\n        {\n            index: 1,\n            correctAnswer: \"How old are you\",\n            questions: [\n                \"old\",\n                \"you\",\n                \"are\",\n                \"How\"\n            ],\n            stopCode: \"?\"\n        },\n        {\n            index: 2,\n            correctAnswer: \"I am seven\",\n            questions: [\n                \"am\",\n                \"I\",\n                \"seven\"\n            ],\n            stopCode: \".\"\n        },\n        {\n            index: 3,\n            correctAnswer: \"Raise your hand please\",\n            questions: [\n                \"please\",\n                \"your\",\n                \"Raise\",\n                \"hand\"\n            ],\n            stopCode: \".\"\n        },\n        {\n            index: 4,\n            correctAnswer: \"Be quiet please\",\n            questions: [\n                \"quiet\",\n                \"Be\",\n                \"please\"\n            ],\n            stopCode: \".\"\n        }\n    ]\n};\n\n/**\n * 物品数据\n */\nexport type ItemData = {\n    content: string,\n    position: cc.Vec2,\n    correct: boolean\n}\n/**\n * 知识点数据\n */\nexport type Knowledge = {\n    index: number,\n    correctAnswer: string,\n    questions: string[],\n    stopCode: string\n}\n/**\n * 操作数据\n */\nexport type OperationData = {\n    round: number,\n    step: number,\n    data: ItemData[]\n}\n/**\n * 游戏轮次数据\n */\nexport type RoundData = {\n    data: Knowledge[]\n}","import AnswerItem from \"./AnswerItem\";\nimport { Config, ItemData, Knowledge, OperationData } from \"./Config\";\nimport MakeASentenceScript from \"./MakeASentenceScript\";\nimport QuestionItem from \"./QuestionItem\";\n/**\n * 游戏逻辑代理\n */\nexport default class Delegate {\n    private root: MakeASentenceScript;\n    private operation: OperationData;\n    private operateLock: boolean;\n    private curRound: number;\n    private curRoundData: Knowledge;\n    private curTarget: cc.Node;\n    private curTargetBasePos: cc.Vec2;\n    private step: number;\n    private lastOpTime: number = 0;\n    private tipSpaceTime: number = 5000;\n    private timeout: number;\n    constructor(rootParam: MakeASentenceScript) {\n        this.root = rootParam;\n        // let opDt = cc.sys.localStorage.getItem(\"operation\");\n        // if (opDt) {\n        //     this.operation = JSON.parse(opDt);\n        // }\n        this.operateLock = false;\n    }\n\n    start(): void {\n        this.addListener();\n        this.operation ? this.resumeGameStatus() : this.gameStart();\n        if (!this.root.isTeacher) {\n            this.root.scheduleOnce(() => {\n                let startPos: any = this.root.questionNode.children[2].convertToWorldSpaceAR(cc.Vec3.ZERO);\n                startPos = this.root.node.convertToNodeSpaceAR(cc.v2(startPos.x, startPos.y));\n                let endPos: any = this.root.rootNode.children[0].convertToWorldSpaceAR(cc.Vec3.ZERO);\n                endPos = this.root.node.convertToNodeSpaceAR(cc.v2(endPos.x, endPos.y));\n                this.root.guildHand(startPos, endPos);\n            }, 0.5);\n        }\n    }\n\n    onDestroy(): void {\n        this.delListener();\n        this.root = null;\n        this.operation = null;\n        this.curRoundData = null;\n        this.curTarget = null;\n        this.curTargetBasePos = null;\n    }\n\n    setOperationLock(): void {\n        this.operateLock = true;\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.backToBase();\n    }\n\n    setOperationFree(): void {\n        this.operateLock = false;\n        if (this.step > 0) {\n            this.timeout = setTimeout(() => {\n                this.checkShowOpTip();\n            }, this.tipSpaceTime);\n        }\n    }\n\n    checkShowOpTip(): void {\n        let now = Date.now();\n        if (now - this.lastOpTime >= this.tipSpaceTime) {\n            this.lastOpTime = now;\n            let words: string[] = [];\n            this.operation.data.forEach(item => {\n                if (!item.correct) {\n                    words.push(item.content);\n                }\n            });\n            this.root.tipShow(words);\n        }\n    }\n\n    protected backToBase(): void {\n        if (this.curTarget && this.curTargetBasePos) {\n            let tempData: ItemData[] = this.operation.data;\n            let curString = this.curTarget.getComponent(QuestionItem).getString();\n            tempData.forEach(item => {\n                if (item.content == curString) {\n                    item.position = this.curTargetBasePos.clone();\n                }\n            });\n            cc.tween(this.curTarget)\n                .to(0.5, { x: this.curTargetBasePos.x, y: this.curTargetBasePos.y }, cc.easeCubicActionOut())\n                .call(() => {\n                    this.root.exportOperationData(this.operation, \"operation\", -1);\n                })\n                .start();\n            this.curTarget = null;\n            this.curTargetBasePos = null;\n        }\n    }\n\n    protected addListener(): void {\n        this.root.node.on(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\n        this.root.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMoved, this);\n        this.root.node.on(cc.Node.EventType.TOUCH_END, this.onTouchReleased, this);\n        this.root.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchReleased, this);\n    }\n\n    protected delListener(): void {\n        this.root.node.off(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\n        this.root.node.off(cc.Node.EventType.TOUCH_MOVE, this.onTouchMoved, this);\n        this.root.node.off(cc.Node.EventType.TOUCH_END, this.onTouchReleased, this);\n        this.root.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onTouchReleased, this);\n    }\n\n    private onTouchBegin(event: cc.Event.EventTouch): void {\n        if (this.operateLock) {\n            return;\n        }\n        this.root.stopHand();\n        this.root.stopTip();\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.removeLayoutFromRoot();\n        let touchPos = event.getLocation();\n        this.root.questionNode.children.forEach(item => {\n            let str = item.getComponent(QuestionItem).getString();\n            if (!this.getCorrect(str)) {\n                let boundWorld = item.getBoundingBoxToWorld();\n                if (!this.curTarget && boundWorld.contains(touchPos)) {\n                    this.curTarget = item;\n                    this.curTargetBasePos = this.curTarget.getPosition();\n                    this.curTarget.setSiblingIndex(this.root.questionNode.childrenCount - 1);\n                    cc.log(`get target, name: ${str}`);\n                }\n            }\n        });\n    }\n\n    private onTouchMoved(event: cc.Event.EventTouch): void {\n        if (this.operateLock) {\n            return;\n        }\n        if (this.curTarget) {\n            this.curTarget.x += event.getDeltaX();\n            this.curTarget.y += event.getDeltaY();\n        }\n    }\n\n    private onTouchReleased(event: cc.Event.EventTouch): void {\n        if (this.operateLock) {\n            return;\n        }\n        if (this.curTarget) {\n            let touchPos = event.getLocation();\n            this.operation.step++;\n            let curString = this.curTarget.getComponent(QuestionItem).getString();\n            let tempData: ItemData[] = this.operation.data;\n            let correct: boolean = false;\n            let intersectRect: { item: cc.Node, rect: cc.Rect, index: number }[] = [];\n            let moveToPos: cc.Vec3;\n            this.root.rootNode.children.forEach((item, index) => {\n                let boundWorld = item.getBoundingBoxToWorld();\n                if (this.curTarget && boundWorld.contains(touchPos)) {\n                    moveToPos = this.root.questionNode.convertToNodeSpaceAR(item.convertToWorldSpaceAR(cc.Vec3.ZERO));\n                    cc.tween(this.curTarget).to(0.25, { x: moveToPos.x, y: moveToPos.y }, cc.easeCubicActionOut()).start();\n                    if (index == this.curRoundData.correctAnswer.split(\" \").indexOf(curString)) {\n                        correct = true;\n                    }\n                } else {\n                    let curBoundWorld = this.curTarget.getBoundingBoxToWorld();\n                    if (curBoundWorld.intersects(boundWorld)) {\n                        let containRect = new cc.Rect();\n                        curBoundWorld.intersection(containRect, boundWorld);\n                        intersectRect.push({ item: item, rect: containRect, index: index });\n                    }\n                }\n            });\n\n            if (!correct && intersectRect.length > 0) {\n                let maxRect: { item: cc.Node, rect: cc.Rect, index: number };\n                let i = 0;\n                while (i < intersectRect.length) {\n                    if (!maxRect) {\n                        maxRect = intersectRect[i];\n                    } else {\n                        let tempSize = intersectRect[i].rect.size;\n                        let tempArea = tempSize.width * tempSize.height;\n                        let lastSize = maxRect.rect.size;\n                        let lastArea = lastSize.width * lastSize.height;\n                        if (lastArea < tempArea) {\n                            maxRect = intersectRect[i];\n                        }\n                    }\n                    i++;\n                }\n                if (maxRect) {\n                    moveToPos = this.root.questionNode.convertToNodeSpaceAR(maxRect.item.convertToWorldSpaceAR(cc.Vec3.ZERO));\n                    cc.tween(this.curTarget).to(0.25, { x: moveToPos.x, y: moveToPos.y }, cc.easeCubicActionOut()).start();\n                    if (maxRect.index == this.curRoundData.correctAnswer.split(\" \").indexOf(curString)) {\n                        correct = true;\n                    }\n                }\n            }\n            tempData.forEach(data => {\n                if (data.content == curString) {\n                    data.correct = correct;\n                    data.position = moveToPos ? cc.v2(moveToPos.x >> 0, moveToPos.y >> 0) : cc.v2(this.curTarget.x >> 0, this.curTarget.y >> 0);\n                }\n            });\n            this.root.exportOperationData(this.operation, \"operation\", correct ? 1 : 0);\n            if (!correct) {\n                this.root.playersHurt();\n                this.backToBase();\n            }\n            // let dataStr = JSON.stringify(this.operation);\n            // cc.sys.localStorage.setItem(\"operation\", dataStr);\n            this.checkAllCorrect();\n        }\n        this.curTarget = null;\n        this.timeout = setTimeout(() => {\n            this.checkShowOpTip();\n        }, this.tipSpaceTime);\n    }\n    /** 恢复游戏状态 */\n    protected resumeGameStatus(): void {\n        this.curRound = this.operation.round;\n        this.curRoundData = Config.data[this.curRound];\n        this.root.rootNode.removeAllChildren();\n        this.root.questionNode.removeAllChildren();\n        this.createRoundElement();\n        this.step = this.operation.step;\n        this.root.questionNode.children.forEach(node => {\n            this.resumePosition(node);\n        });\n    }\n    protected resumePosition(node: cc.Node): void {\n        let nodeStr = node.getComponent(QuestionItem).getString();\n        this.operation.data.forEach(itemData => {\n            if (nodeStr == itemData.content) {\n                node.setPosition(itemData.position);\n            }\n        });\n    }\n\n    protected gameStart(): void {\n        this.curRound = 0;\n        this.curRoundData = Config.data[this.curRound];\n        this.createRoundElement();\n    }\n\n\n    nextRound(): void {\n        this.operateLock = false;\n        this.curTarget = null;\n        this.curTargetBasePos = null;\n        this.curRound++;\n        if (this.curRound >= Config.data.length) {\n            // this.curRound = 0;\n            // this.root.showLasers();\n            this.root.sentenceComplete(true);\n            this.root.exportOperationData(this.operation, \"gameComplete\");\n            return;\n        }\n        this.curRoundData = Config.data[this.curRound];\n        this.root.rootNode.removeAllChildren();\n        this.root.questionNode.removeAllChildren();\n        this.operation = null;\n        this.createRoundElement();\n    }\n\n    createRoundElement(): void {\n        this.addItemToQuestion();\n        this.addItemToRoot();\n        if (!this.operation) {\n            this.addLayoutToRoot();\n            this.step = 0;\n            let tempData: ItemData[] = [];\n            this.root.questionNode.children.forEach(item => {\n                tempData.push({\n                    content: item.getComponent(QuestionItem).getString(),\n                    position: cc.v2(item.x >> 0, item.y >> 0),\n                    correct: false\n                });\n            });\n            this.operation = {\n                round: this.curRound,\n                step: this.step,\n                data: tempData\n            };\n            // let dataStr = JSON.stringify(this.operation);\n            // cc.sys.localStorage.setItem(\"operation\", dataStr);\n            if (this.curRound > 0) {\n                this.root.exportOperationData(this.operation, \"operation\", -1);\n            }\n            this.root.scheduleOnce(() => {\n                this.removeLayoutFromRoot();\n            }, 0.5);\n        }\n    }\n\n    addLayoutToRoot(): void {\n        if (this.root.questionNode) {\n            let layout = this.root.questionNode.getComponent(cc.Layout);\n            layout.type = cc.Layout.Type.GRID;\n            layout.resizeMode = cc.Layout.ResizeMode.CONTAINER;\n            layout.startAxis = cc.Layout.AxisDirection.HORIZONTAL;\n            layout.spacingX = 58;\n            layout.spacingY = 40;\n            layout.updateLayout();\n        }\n    }\n\n    removeLayoutFromRoot(): void {\n        if (this.root.questionNode) {\n            let layout = this.root.questionNode.getComponent(cc.Layout);\n            layout.resizeMode = cc.Layout.ResizeMode.NONE;\n            layout.type = cc.Layout.Type.NONE;\n        }\n    }\n\n    addItemToRoot(): void {\n        let answers = this.curRoundData.correctAnswer.split(\" \");\n        let count = answers.length, i = 0;\n        while (i < count) {\n            // const item =  new cc.Node();\n            // let label = item.addComponent(cc.Label);\n            // label.string = this.curRoundData.questions[i];\n            // item.name = `box${i}`;\n            // this.root.rootNode && (item.parent = this.root.rootNode);\n            const item = kit.pool.PrefabPool.get(this.root.answerPrefab, \"answerItem\", AnswerItem);\n            if (answers[i].includes(this.curRoundData.stopCode)) {\n                item.getComponent(AnswerItem).setString(answers[i].substring(0, answers[i].length - 1));\n            } else {\n                item.getComponent(AnswerItem).setString(answers[i]);\n            }\n            this.root.rootNode && (item.parent = this.root.rootNode);\n            i++;\n        }\n        this.root.stopCode.string = this.curRoundData.stopCode;\n    }\n\n    addItemToQuestion(): void {\n        if (this.curRoundData && this.curRoundData.questions) {\n            let count = this.curRoundData.questions.length, i = 0;\n            while (i < count) {\n                const item = kit.pool.PrefabPool.get(this.root.questionPrefab, \"questionItem\", QuestionItem);\n                item.getComponent(QuestionItem).setString(this.curRoundData.questions[i]);\n                item.parent = this.root.questionNode;\n                i++;\n            }\n        }\n    }\n\n    synchronous(opDt: any): void {\n        // if (!this.operation) {\n        //     this.operation = opDt;\n        //     this.resumeGameStatus();\n        // } else {\n        // this.operation.round = opDt.round;\n        // this.step = this.operation.step = opDt.step;\n        // let tempData = opDt.data;\n        // let index = 0;\n        // while (index < tempData.length) {\n        //     const temp = tempData[index];\n        //     if (temp && this.operation.data[index] && temp.content == this.operation.data[index].content) {\n        //         if (this.operation.data[index].position.x != temp.position.x || this.operation.data[index].position.y != temp.position.you) {\n        //             this.syncItemPosition(temp);\n        //             this.operation.data[index].position.x = temp.position.x;\n        //             this.operation.data[index].position.y = temp.position.y;\n        //         }\n        //     }\n        //     index++;\n        // }\n        // }\n\n        if (!this.operation || this.operation.round != opDt.round) {\n            this.operation = opDt;\n            this.operation.step == 0 ? this.addLayoutToRoot() : this.removeLayoutFromRoot();\n            this.resumeGameStatus();\n            this.operation.step == 0 && this.root.scheduleOnce(() => {\n                this.removeLayoutFromRoot();\n            }, 0.5);\n        } else {\n            this.removeLayoutFromRoot();\n            this.operation.round = opDt.round;\n            this.step = this.operation.step = opDt.step;\n            let tempData = opDt.data;\n            let index = 0;\n            while (index < tempData.length) {\n                const temp = tempData[index];\n                if (temp && this.operation.data[index] && temp.content == this.operation.data[index].content) {\n                    if (this.operation.data[index].position.x != temp.position.x || this.operation.data[index].position.y != temp.position.y) {\n                        this.syncItemPosition(temp);\n                        this.operation.data[index].position.x = temp.position.x;\n                        this.operation.data[index].position.y = temp.position.y;\n                    }\n                }\n                index++;\n            }\n        }\n    }\n\n    protected syncItemPosition(data: ItemData): void {\n        this.root.questionNode.children.forEach(child => {\n            if (child.getComponent(QuestionItem).getString() == data.content) {\n                cc.tween(child).to(0.5, { x: data.position.x, y: data.position.y }, cc.easeCubicActionOut()).start();\n            }\n        })\n    }\n\n    private getCorrect(str: string): boolean {\n        let bool = false;\n        this.operation.data.forEach(itemData => {\n            if (itemData.content == str) {\n                bool = itemData.correct;\n            }\n        });\n        return bool;\n    }\n\n    private checkAllCorrect(): void {\n        let allCorrect: boolean = true;\n        this.operation.data.forEach(itemData => {\n            allCorrect && (allCorrect = itemData.correct);\n        });\n        if (allCorrect) {\n            // this.operateLock = true;\n            // this.root.rootNode.children.forEach((node, index) => {\n            //     cc.tween(node).delay(0.5).to(0.5, { opacity: 0 }, cc.easeCubicActionOut()).call(() => {\n            //         if (index == (this.root.rootNode.childrenCount - 1)) {\n            //             this.nextRound();\n            //         }\n            //     }).start();\n            // });\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n                this.timeout = null;\n            }\n            this.root.hideLaser(this.operation.round);\n            this.root.exportOperationData(this.operation, \"roundComplete\");\n            this.root.sentenceComplete();\n        }\n    }\n}\n","import Delegate from \"./Delegate\";\nimport QuestionItem from \"./QuestionItem\";\n\nconst { ccclass, property } = cc._decorator;\n/**\n * 游戏显示逻辑\n */\n@ccclass\nexport default class MakeASentenceScript extends cc.Component implements center.ISubGame {\n    @property(cc.Prefab)\n    answerPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    questionPrefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    rootNode: cc.Node = null;\n\n    @property(cc.Label)\n    stopCode: cc.Label = null;\n\n    @property(cc.Node)\n    questionNode: cc.Node = null;\n\n    // @property(cc.Node)\n    // teacherNode: cc.Node = null;\n\n    // @property(cc.Toggle)\n    // lockOperation: cc.Toggle = null;\n\n    // @property(cc.Toggle)\n    // freeOperation: cc.Toggle = null;\n\n    // @property(cc.Label)\n    // studentStatus: cc.Label = null;\n\n    @property(cc.Node)\n    hand: cc.Node = null;\n\n    @property(cc.Node)\n    leftDoor: cc.Node = null;\n\n    @property(cc.Node)\n    rightDoor: cc.Node = null;\n\n    @property([sp.Skeleton])\n    lasers: sp.Skeleton[] = [];\n\n    @property(sp.Skeleton)\n    max: sp.Skeleton = null;\n\n    @property(sp.Skeleton)\n    melinda: sp.Skeleton = null;\n\n    @property(sp.Skeleton)\n    mili: sp.Skeleton = null;\n\n    bundleName: string;\n    content: center.IContent;\n    isTeacher: boolean;\n\n    // private startTime: number;\n    // private nextTickTime: number;\n    snapData: any;\n    private laserBaseOpacity: number[];\n    protected delegate: Delegate;\n\n    onLoad() {\n        this.delegate = new Delegate(this);\n        this.laserBaseOpacity = [];\n        let i = 0;\n        while (i < this.lasers.length) {\n            let laser = this.lasers[i];\n            this.laserBaseOpacity.push(laser.node.opacity);\n            laser.node.opacity = 0;\n            i++;\n        }\n    }\n\n    onDestroy(): void {\n        super.onDestroy();\n        this.delegate.onDestroy();\n        this.delegate = null;\n    }\n\n    start() {\n        this.content && this.content.onGameReady();\n        this.isTeacher && this.delegate.setOperationLock();\n        this.playIdle();\n        this.snapData ? this.delegate.synchronous(this.snapData.actionData) : this.showLasers(this.onStart.bind(this));\n    }\n\n    onStart(): void {\n        this.delegate.start();\n    }\n\n    private cloneActDt(source: any): any {\n        return JSON.parse(JSON.stringify(source));\n    }\n\n    setParams(data: { evn: center.EVN; isTeacher?: boolean; userInfo?: center.UserInfo; font?: cc.Font; }): void {\n        cc.log(`set params: ${JSON.stringify(data)}`);\n        this.isTeacher = data.isTeacher || false;\n    }\n\n    setContent(content: center.IContent): void {\n        this.content = content;\n        let snapShot = this.content.getSnapshot();\n        if (snapShot) {\n            this.snapData = JSON.parse(snapShot);\n        }\n    }\n\n    receiveMessage(data: any): void {\n        cc.log(`receiveMessage: ${data}`);\n        if (data.isTeacher) {\n            if (!this.isTeacher) {\n                let actionData = data.actionData;\n                switch (actionData) {\n                    case \"nextRound\":\n                        this.delegate.nextRound();\n                        break;\n                    // case \"lockOperation\":\n                    //     this.delegate.setOperationLock();\n                    //     this.studentStatus.string = \"lockOperation\";\n                    //     break;\n                    // case \"freeOperation\":\n                    //     this.delegate.setOperationFree();\n                    //     this.studentStatus.string = \"freeOperation\";\n                    //     break;\n                }\n            }\n        } else {\n            if (this.isTeacher) {\n                let action = data.action;\n                switch (action) {\n                    case \"operation\":\n                        this.delegate.synchronous(data.actionData);\n                        if (data.correct == 0) {\n                            this.playersHurt();\n                        }\n                        break;\n                    case \"roundComplete\":\n                        let round = data.actionData.round;\n                        this.hideLaser(round);\n                        this.sentenceComplete();\n                        break;\n                    case \"gameComplete\":\n                        this.sentenceComplete(true);\n                        break;\n                }\n            }\n        }\n    }\n\n    timeout(): void {\n\n    }\n    /**\n     * 游戏开始 显示激光\n     * @param callBack \n     */\n    showLasers(callBack?: Function): void {\n        let that = this;\n        let count: number = 0;\n        this.lasers.forEach((laser, index) => {\n            laser.node.active = true;\n            cc.tween(laser).delay(index * 0.2).call(() => {\n                laser.node.opacity = this.laserBaseOpacity[index];\n                that.playSpine(laser, \"appear\", false, () => {\n                    that.playSpine(laser, \"idle\", true);\n                    count++;\n                    if (count == that.lasers.length) {\n                        callBack && callBack.apply(null);\n                    }\n                });\n            }).start();\n        });\n    }\n    /**\n     * 隐藏指定轮次的激光\n     * @param round \n     */\n    hideLaser(round: number): void {\n        let that = this;\n        this.lasers.forEach((laser, index) => {\n            if (round == index) {\n                that.playSpine(laser, \"disappear\", false, () => {\n                    laser.node.active = false;\n                });\n            }\n        });\n    }\n    /**\n     * 游戏手势指引\n     * @param startPos 开始位置\n     * @param endPos 结束位置\n     */\n    guildHand(startPos: cc.Vec3, endPos: cc.Vec3): void {\n        if (this.hand) {\n            this.hand.active = true;\n            cc.tween(this.hand).repeatForever(\n                cc.tween()\n                    .set({ x: startPos.x, y: startPos.y })\n                    .to(1.5, { x: endPos.x, y: endPos.y }, cc.easeCubicActionOut())\n                    .delay(0.5)\n            ).start();\n        }\n    }\n    /**\n     * 结束手势指引\n     */\n    stopHand(): void {\n        cc.Tween.stopAllByTarget(this.hand);\n        this.hand.active = false;\n    }\n    /**\n     * 长时间未操作（5s) 提示\n     * @param words \n     */\n    tipShow(words: string[]): void {\n        this.questionNode.children.forEach(node => {\n            if (words.includes(node.getComponent(QuestionItem).getString())) {\n                // cc.Tween.stopAllByTarget(node);\n                // cc.tween(node).repeatForever(\n                //     cc.tween(node).to(0.5, { scale: 1.2 }, cc.easeCubicActionOut())\n                //         .delay(0.2)\n                //         .to(0.5, { scale: 1 }, cc.easeCubicActionOut())\n                // ).start();\n                node.getComponent(QuestionItem).showTip();\n            }\n        });\n    }\n    /**\n     * 结束 未操作 提示\n     */\n    stopTip(): void {\n        this.questionNode.children.forEach(node => {\n            // cc.Tween.stopAllByTarget(node);\n            // node.scale = 1;\n            node.getComponent(QuestionItem).hideTip();\n        });\n    }\n    /**\n     * 游戏内角色待机\n     */\n    playIdle(): void {\n        this.playSpine(this.max, \"idle\", true);\n        this.playSpine(this.melinda, \"daiji\", true);\n        this.playSpine(this.mili, \"daiji\", true);\n    }\n    /**\n     * 角色负反馈\n     */\n    playersHurt(): void {\n        cc.log(\"playersHurt\");\n        this.playSpine(this.max, \"shiluo\", false, () => {\n            this.playSpine(this.max, \"idle\", true);\n        });\n        this.playSpine(this.melinda, \"fu_fk\", false, () => {\n            this.playSpine(this.melinda, \"daiji\", true);\n        });\n        this.playSpine(this.mili, \"fu_fankui\", false, () => {\n            this.playSpine(this.mili, \"daiji\", true);\n        });\n    }\n    /**\n     * 正反馈\n     */\n    sentenceComplete(roundComplete: boolean = false): void {\n        cc.log(\"sentenceComplete\");\n        if (roundComplete) {\n            this.playSpine(this.max, \"qinzhu\", false, () => {\n                this.playSpine(this.max, \"idle\", true);\n            });\n            this.playSpine(this.melinda, \"qingzhu\", false, () => {\n                this.playSpine(this.melinda, \"daiji\", true);\n            });\n            this.playSpine(this.mili, \"qingzhu\", false, () => {\n                this.playSpine(this.mili, \"daiji\", true);\n            });\n            this.openTheDoor();\n        } else {\n            this.playSpine(this.max, \"kaixin\", false, () => {\n                this.playSpine(this.max, \"idle\", true);\n            });\n            this.playSpine(this.melinda, \"zheng_fk\", false, () => {\n                this.playSpine(this.melinda, \"daiji\", true);\n            });\n            this.playSpine(this.mili, \"zheng_fk\", false, () => {\n                this.playSpine(this.mili, \"daiji\", true);\n            });\n            this.scheduleOnce(this.onNextRound.bind(this), 2);\n        }\n    }\n\n    openTheDoor(): void {\n        cc.tween(this.leftDoor).to(1, { x: -164 }, cc.easeCubicActionOut()).start();\n        cc.tween(this.rightDoor).to(1, { x: 164 }, cc.easeCircleActionOut())\n            .delay(2)\n            .call(() => {\n                this.content && this.content.onGameComplete();\n                // this.localData && cc.sys.localStorage.setItem(\"operation\", JSON.stringify(this.localData));\n            })\n            .start();\n    }\n    // private localData: any[] = [];\n    /**\n     * 上报操作数据\n     * @param data \n     */\n    exportOperationData(data: any, action: string, correct: number = -1): void {\n        let tempData = { isTeacher: this.isTeacher, action: action, actionData: data, correct: correct };\n        this.content && this.content.postMessage(JSON.stringify(tempData));\n        // !this.isTeacher && this.localData.push(tempData);\n    }\n    /**\n     * 下一轮\n     */\n    onNextRound(dispatch: boolean = false): void {\n        let data = { isTeacher: this.isTeacher, actionData: \"nextRound\" };\n        dispatch && this.content && this.content.postMessage(JSON.stringify(data));\n        this.delegate && this.delegate.nextRound();\n        cc.log(\"onNextRound\");\n    }\n    /**\n     * 老师锁定 解锁\n     */\n    onToggleSwitch(): void {\n        let data = { isTeacher: this.isTeacher, actionData: \"\" };\n        // if (this.lockOperation.isChecked) {\n        //     data.actionData = \"lockOperation\";\n        //     cc.log(\"lockOperation\");\n        // } else {\n        //     data.actionData = \"freeOperation\";\n        //     cc.log(\"freeOperation\");\n        // }\n        this.content && this.content.postMessage(JSON.stringify(data));\n    }\n    /**\n     * 播放 Spine 动画\n     * @param ske \n     * @param animation \n     * @param loop \n     * @param callBack \n     */\n    protected playSpine(ske: sp.Skeleton, animation: string, loop: boolean = false, callBack?: Function): void {\n        if (ske && ske.animation != animation) {\n            ske.clearTracks();\n            ske.setToSetupPose();\n            ske.setAnimation(0, animation, loop);\n            callBack && ske.setCompleteListener(callBack);\n        }\n    }\n}\n","import AnswerItem from \"./AnswerItem\";\n\n\nconst { ccclass, property } = cc._decorator;\n/**\n * 游戏显示逻辑\n */\n@ccclass\nexport default class QuestionItem extends AnswerItem {\n    showTip(): void {\n        cc.Tween.stopAllByTarget(this.node);\n        cc.tween(this.node).repeatForever(\n            cc.tween(this.node).to(0.5, { scale: 1.2 }, cc.easeCubicActionOut())\n                .delay(0.2)\n                .to(0.5, { scale: 1 }, cc.easeCubicActionOut())\n        ).start();\n    }\n\n    hideTip(): void {\n        cc.Tween.stopAllByTarget(this.node);\n        this.node.scale = 1;\n    }\n\n    onDestroy(): void {\n        this.unuse();\n        kit.pool.PrefabPool.put(this.node, \"questionItem\", QuestionItem);\n    }\n\n    reuse(): void {\n        cc.log(\"QuestionItem reuse item\");\n    }\n\n    unuse(): void {\n        cc.log(\"QuestionItem un use\");\n    }\n}"],"file":"index.js"}