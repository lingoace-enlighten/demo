{"version":3,"sources":["assets/makeASentence/scripts/AnswerItem.ts","assets/makeASentence/scripts/Config.ts","assets/makeASentence/scripts/Delegate.ts","assets/makeASentence/scripts/MakeASentenceScript.ts","assets/makeASentence/scripts/QuestionItem.ts"],"names":["_a","cc","_decorator","ccclass","property","AnswerItem","_super","__extends","_this","apply","this","arguments","label","AnswerItem_1","prototype","setString","value","string","getString","isValueEqual","item","onDestroy","unuse","kit","pool","PrefabPool","put","node","reuse","log","__decorate","Label","Component","exports","default","Config","data","index","correctAnswer","questions","stopCode","require","Config_1","QuestionItem_1","Delegate","rootParam","lastOpTime","tipSpaceTime","root","operateLock","start","sync","addListener","gameStart","isTeacher","scheduleOnce","startPos","questionNode","children","convertToWorldSpaceAR","Vec3","ZERO","convertToNodeSpaceAR","v2","x","y","endPos","rootNode","guildHand","delListener","operation","curRoundData","curTarget","curTargetBasePos","setOperationLock","timeout","clearTimeout","backToBase","setOperationFree","step","setTimeout","checkShowOpTip","now","Date","words_1","forEach","correct","push","content","tipShow","tempData","curString_1","getComponent","position","clone","tween","to","easeCubicActionOut","call","exportOperationData","on","Node","EventType","TOUCH_START","onTouchBegin","TOUCH_MOVE","onTouchMoved","TOUCH_END","onTouchReleased","TOUCH_CANCEL","off","event","stopHand","stopTip","removeLayoutFromRoot","touchPos","getLocation","str","getCorrect","boundWorld","getBoundingBoxToWorld","contains","getPosition","setSiblingIndex","childrenCount","getDeltaX","getDeltaY","touchPos_1","curString_2","correct_1","intersectRect_1","moveToPos_1","split","indexOf","curBoundWorld","intersects","containRect","Rect","intersection","rect","length","maxRect","i","tempSize","size","tempArea","width","height","lastSize","lastArea","playersHurt","checkAllCorrect","resumeGameStatus","curRound","round","removeAllChildren","createRoundElement","resumePosition","nodeStr","itemData","setPosition","nextRound","sentenceComplete","addItemToQuestion","addItemToRoot","addLayoutToRoot","tempData_1","layout","Layout","type","Type","GRID","resizeMode","ResizeMode","CONTAINER","startAxis","AxisDirection","HORIZONTAL","spacingX","spacingY","updateLayout","NONE","answers","count","get","answerPrefab","includes","substring","parent","questionPrefab","synchronous","opDt","temp","syncItemPosition","child","bool","allCorrect","hideLaser","Delegate_1","MakeASentenceScript","hand","leftDoor","rightDoor","lasers","max","melinda","mili","onLoad","delegate","laserBaseOpacity","laser","opacity","onGameReady","playIdle","snapData","action","round_1","actionData","showLasers","onStart","bind","cloneActDt","source","JSON","parse","stringify","setParams","setContent","snapShot","getSnapshot","receiveMessage","callBack","that","active","delay","playSpine","repeatForever","set","Tween","stopAllByTarget","words","showTip","hideTip","roundComplete","openTheDoor","onNextRound","easeCircleActionOut","onGameComplete","postMessage","dispatch","onToggleSwitch","ske","animation","loop","clearTracks","setToSetupPose","setAnimation","setCompleteListener","Prefab","sp","Skeleton","QuestionItem","scale"],"mappings":"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","sourcesContent":["import IItem from \"./IItem\";\n\n\nconst { ccclass, property } = cc._decorator;\n/**\n * 游戏显示逻辑\n */\n@ccclass\nexport default class AnswerItem extends cc.Component implements IItem, kit.pool.IPoolHandlerComp {\n    @property(cc.Label)\n    label: cc.Label = null;\n\n    setString(value: string) {\n        this.label.string = value;\n    }\n    getString(): string {\n        return this.label.string;\n    }\n\n    isValueEqual(item: IItem): boolean {\n        return item.getString() == this.getString();\n    }\n\n    onDestroy(): void {\n        this.unuse();\n        kit.pool.PrefabPool.put(this.node, \"answerItem\", AnswerItem);\n    }\n\n    reuse(): void {\n        cc.log(\"reuse item\");\n    }\n\n    unuse(): void {\n        cc.log(\"unuse item\");\n    }\n}","/**\n * 游戏配置\n */\nexport const Config = {\n    data: [\n        {\n            index: 0,\n            correctAnswer: \"What's your name\",\n            questions: [\n                \"your\",\n                \"name\",\n                \"What's\"\n            ],\n            stopCode: \"?\"\n        },\n        {\n            index: 1,\n            correctAnswer: \"How old are you\",\n            questions: [\n                \"old\",\n                \"you\",\n                \"are\",\n                \"How\"\n            ],\n            stopCode: \"?\"\n        },\n        {\n            index: 2,\n            correctAnswer: \"I am seven\",\n            questions: [\n                \"am\",\n                \"I\",\n                \"seven\"\n            ],\n            stopCode: \".\"\n        },\n        {\n            index: 3,\n            correctAnswer: \"Raise your hand please\",\n            questions: [\n                \"please\",\n                \"your\",\n                \"Raise\",\n                \"hand\"\n            ],\n            stopCode: \".\"\n        },\n        {\n            index: 4,\n            correctAnswer: \"Be quiet please\",\n            questions: [\n                \"quiet\",\n                \"Be\",\n                \"please\"\n            ],\n            stopCode: \".\"\n        }\n    ]\n};\n\n/**\n * 物品数据\n */\nexport type ItemData = {\n    content: string,\n    position: cc.Vec2,\n    correct: boolean\n}\n/**\n * 知识点数据\n */\nexport type Knowledge = {\n    index: number,\n    correctAnswer: string,\n    questions: string[],\n    stopCode: string\n}\n/**\n * 操作数据\n */\nexport type OperationData = {\n    round: number,\n    step: number,\n    data: ItemData[]\n}\n/**\n * 游戏轮次数据\n */\nexport type RoundData = {\n    data: Knowledge[]\n}","import AnswerItem from \"./AnswerItem\";\nimport { Config, ItemData, Knowledge, OperationData } from \"./Config\";\nimport MakeASentenceScript from \"./MakeASentenceScript\";\nimport QuestionItem from \"./QuestionItem\";\n/**\n * 游戏逻辑代理\n */\nexport default class Delegate {\n    private root: MakeASentenceScript;\n    private operation: OperationData;\n    private operateLock: boolean;\n    private curRound: number;\n    private curRoundData: Knowledge;\n    private curTarget: cc.Node;\n    private curTargetBasePos: cc.Vec2;\n    private step: number;\n    private lastOpTime: number = 0;\n    private tipSpaceTime: number = 5000;\n    private timeout: number;\n    constructor(rootParam: MakeASentenceScript) {\n        this.root = rootParam;\n        // let opDt = cc.sys.localStorage.getItem(\"operation\");\n        // if (opDt) {\n        //     this.operation = JSON.parse(opDt);\n        // }\n        this.operateLock = false;\n    }\n\n    start(sync: boolean = false): void {\n        this.addListener();\n        // this.operation ? this.resumeGameStatus() : this.gameStart();\n        !sync && this.gameStart();\n        if (!sync && !this.root.isTeacher) {\n            this.root.scheduleOnce(() => {\n                let startPos: any = this.root.questionNode.children[2].convertToWorldSpaceAR(cc.Vec3.ZERO);\n                startPos = this.root.node.convertToNodeSpaceAR(cc.v2(startPos.x, startPos.y));\n                let endPos: any = this.root.rootNode.children[0].convertToWorldSpaceAR(cc.Vec3.ZERO);\n                endPos = this.root.node.convertToNodeSpaceAR(cc.v2(endPos.x, endPos.y));\n                this.root.guildHand(startPos, endPos);\n            }, 0.5);\n        }\n    }\n\n    onDestroy(): void {\n        this.delListener();\n        this.root = null;\n        this.operation = null;\n        this.curRoundData = null;\n        this.curTarget = null;\n        this.curTargetBasePos = null;\n    }\n\n    setOperationLock(): void {\n        this.operateLock = true;\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.backToBase();\n    }\n\n    setOperationFree(): void {\n        this.operateLock = false;\n        if (this.step > 0) {\n            this.timeout = setTimeout(() => {\n                this.checkShowOpTip();\n            }, this.tipSpaceTime);\n        }\n    }\n\n    checkShowOpTip(): void {\n        let now = Date.now();\n        if (now - this.lastOpTime >= this.tipSpaceTime) {\n            this.lastOpTime = now;\n            let words: string[] = [];\n            this.operation.data.forEach(item => {\n                if (!item.correct) {\n                    words.push(item.content);\n                }\n            });\n            this.root.tipShow(words);\n        }\n    }\n\n    protected backToBase(): void {\n        if (this.curTarget && this.curTargetBasePos) {\n            let tempData: ItemData[] = this.operation.data;\n            let curString = this.curTarget.getComponent(QuestionItem).getString();\n            tempData.forEach(item => {\n                if (item.content == curString) {\n                    item.position = this.curTargetBasePos.clone();\n                }\n            });\n            cc.tween(this.curTarget)\n                .to(0.5, { x: this.curTargetBasePos.x, y: this.curTargetBasePos.y }, cc.easeCubicActionOut())\n                .call(() => {\n                    this.root.exportOperationData(this.operation, \"operation\", -1);\n                })\n                .start();\n            this.curTarget = null;\n            this.curTargetBasePos = null;\n        }\n    }\n\n    protected addListener(): void {\n        this.root.node.on(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\n        this.root.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMoved, this);\n        this.root.node.on(cc.Node.EventType.TOUCH_END, this.onTouchReleased, this);\n        this.root.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchReleased, this);\n    }\n\n    protected delListener(): void {\n        this.root.node.off(cc.Node.EventType.TOUCH_START, this.onTouchBegin, this);\n        this.root.node.off(cc.Node.EventType.TOUCH_MOVE, this.onTouchMoved, this);\n        this.root.node.off(cc.Node.EventType.TOUCH_END, this.onTouchReleased, this);\n        this.root.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onTouchReleased, this);\n    }\n\n    private onTouchBegin(event: cc.Event.EventTouch): void {\n        if (this.operateLock) {\n            return;\n        }\n        this.root.stopHand();\n        this.root.stopTip();\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.removeLayoutFromRoot();\n        let touchPos = event.getLocation();\n        this.root.questionNode.children.forEach(item => {\n            let str = item.getComponent(QuestionItem).getString();\n            if (!this.getCorrect(str)) {\n                let boundWorld = item.getBoundingBoxToWorld();\n                if (!this.curTarget && boundWorld.contains(touchPos)) {\n                    this.curTarget = item;\n                    this.curTargetBasePos = this.curTarget.getPosition();\n                    this.curTarget.setSiblingIndex(this.root.questionNode.childrenCount - 1);\n                    cc.log(`get target, name: ${str}`);\n                }\n            }\n        });\n    }\n\n    private onTouchMoved(event: cc.Event.EventTouch): void {\n        if (this.operateLock) {\n            return;\n        }\n        if (this.curTarget) {\n            this.curTarget.x += event.getDeltaX();\n            this.curTarget.y += event.getDeltaY();\n        }\n    }\n\n    private onTouchReleased(event: cc.Event.EventTouch): void {\n        if (this.operateLock) {\n            return;\n        }\n        if (this.curTarget) {\n            let touchPos = event.getLocation();\n            this.operation.step++;\n            let curString = this.curTarget.getComponent(QuestionItem).getString();\n            let tempData: ItemData[] = this.operation.data;\n            let correct: boolean = false;\n            let intersectRect: { item: cc.Node, rect: cc.Rect, index: number }[] = [];\n            let moveToPos: cc.Vec3;\n            this.root.rootNode.children.forEach((item, index) => {\n                let boundWorld = item.getBoundingBoxToWorld();\n                if (this.curTarget && boundWorld.contains(touchPos)) {\n                    moveToPos = this.root.questionNode.convertToNodeSpaceAR(item.convertToWorldSpaceAR(cc.Vec3.ZERO));\n                    cc.tween(this.curTarget).to(0.25, { x: moveToPos.x, y: moveToPos.y }, cc.easeCubicActionOut()).start();\n                    if (index == this.curRoundData.correctAnswer.split(\" \").indexOf(curString)) {\n                        correct = true;\n                    }\n                } else {\n                    let curBoundWorld = this.curTarget.getBoundingBoxToWorld();\n                    if (curBoundWorld.intersects(boundWorld)) {\n                        let containRect = new cc.Rect();\n                        curBoundWorld.intersection(containRect, boundWorld);\n                        intersectRect.push({ item: item, rect: containRect, index: index });\n                    }\n                }\n            });\n\n            if (!correct && intersectRect.length > 0) {\n                let maxRect: { item: cc.Node, rect: cc.Rect, index: number };\n                let i = 0;\n                while (i < intersectRect.length) {\n                    if (!maxRect) {\n                        maxRect = intersectRect[i];\n                    } else {\n                        let tempSize = intersectRect[i].rect.size;\n                        let tempArea = tempSize.width * tempSize.height;\n                        let lastSize = maxRect.rect.size;\n                        let lastArea = lastSize.width * lastSize.height;\n                        if (lastArea < tempArea) {\n                            maxRect = intersectRect[i];\n                        }\n                    }\n                    i++;\n                }\n                if (maxRect) {\n                    moveToPos = this.root.questionNode.convertToNodeSpaceAR(maxRect.item.convertToWorldSpaceAR(cc.Vec3.ZERO));\n                    cc.tween(this.curTarget).to(0.25, { x: moveToPos.x, y: moveToPos.y }, cc.easeCubicActionOut()).start();\n                    if (maxRect.index == this.curRoundData.correctAnswer.split(\" \").indexOf(curString)) {\n                        correct = true;\n                    }\n                }\n            }\n            tempData.forEach(data => {\n                if (data.content == curString) {\n                    data.correct = correct;\n                    data.position = moveToPos ? cc.v2(moveToPos.x >> 0, moveToPos.y >> 0) : cc.v2(this.curTarget.x >> 0, this.curTarget.y >> 0);\n                }\n            });\n            this.root.exportOperationData(this.operation, \"operation\", correct ? 1 : 0);\n            if (!correct) {\n                this.root.playersHurt();\n                this.backToBase();\n            }\n            // let dataStr = JSON.stringify(this.operation);\n            // cc.sys.localStorage.setItem(\"operation\", dataStr);\n            this.checkAllCorrect();\n        }\n        this.curTarget = null;\n        this.timeout = setTimeout(() => {\n            this.checkShowOpTip();\n        }, this.tipSpaceTime);\n    }\n    /** 恢复游戏状态 */\n    protected resumeGameStatus(): void {\n        this.curRound = this.operation.round;\n        this.curRoundData = Config.data[this.curRound];\n        this.root.rootNode.removeAllChildren();\n        this.root.questionNode.removeAllChildren();\n        this.createRoundElement();\n        this.step = this.operation.step;\n        this.root.questionNode.children.forEach(node => {\n            this.resumePosition(node);\n        });\n    }\n    protected resumePosition(node: cc.Node): void {\n        let nodeStr = node.getComponent(QuestionItem).getString();\n        this.operation.data.forEach(itemData => {\n            if (nodeStr == itemData.content) {\n                node.setPosition(itemData.position);\n            }\n        });\n    }\n\n    protected gameStart(): void {\n        this.curRound = 0;\n        this.curRoundData = Config.data[this.curRound];\n        this.createRoundElement();\n    }\n\n\n    nextRound(): void {\n        this.curTarget = null;\n        this.curTargetBasePos = null;\n        this.curRound++;\n        if (this.curRound >= Config.data.length) {\n            // this.curRound = 0;\n            // this.root.showLasers();\n            this.root.sentenceComplete(true);\n            this.root.exportOperationData(this.operation, \"gameComplete\");\n            return;\n        }\n        this.curRoundData = Config.data[this.curRound];\n        this.root.rootNode.removeAllChildren();\n        this.root.questionNode.removeAllChildren();\n        this.operation = null;\n        this.createRoundElement();\n    }\n\n    createRoundElement(): void {\n        this.addItemToQuestion();\n        this.addItemToRoot();\n        if (!this.operation) {\n            this.addLayoutToRoot();\n            this.step = 0;\n            let tempData: ItemData[] = [];\n            this.root.questionNode.children.forEach(item => {\n                tempData.push({\n                    content: item.getComponent(QuestionItem).getString(),\n                    position: cc.v2(item.x >> 0, item.y >> 0),\n                    correct: false\n                });\n            });\n            this.operation = {\n                round: this.curRound,\n                step: this.step,\n                data: tempData\n            };\n            // let dataStr = JSON.stringify(this.operation);\n            // cc.sys.localStorage.setItem(\"operation\", dataStr);\n            if (this.curRound > 0) {\n                this.root.exportOperationData(this.operation, \"operation\", -1);\n            }\n            this.root.scheduleOnce(() => {\n                this.removeLayoutFromRoot();\n            }, 0.5);\n        }\n    }\n\n    addLayoutToRoot(): void {\n        if (this.root.questionNode) {\n            let layout = this.root.questionNode.getComponent(cc.Layout);\n            layout.type = cc.Layout.Type.GRID;\n            layout.resizeMode = cc.Layout.ResizeMode.CONTAINER;\n            layout.startAxis = cc.Layout.AxisDirection.HORIZONTAL;\n            layout.spacingX = 58;\n            layout.spacingY = 40;\n            layout.updateLayout();\n        }\n    }\n\n    removeLayoutFromRoot(): void {\n        if (this.root.questionNode) {\n            let layout = this.root.questionNode.getComponent(cc.Layout);\n            layout.resizeMode = cc.Layout.ResizeMode.NONE;\n            layout.type = cc.Layout.Type.NONE;\n        }\n    }\n\n    addItemToRoot(): void {\n        let answers = this.curRoundData.correctAnswer.split(\" \");\n        let count = answers.length, i = 0;\n        while (i < count) {\n            // const item =  new cc.Node();\n            // let label = item.addComponent(cc.Label);\n            // label.string = this.curRoundData.questions[i];\n            // item.name = `box${i}`;\n            // this.root.rootNode && (item.parent = this.root.rootNode);\n            const item = kit.pool.PrefabPool.get(this.root.answerPrefab, \"answerItem\", AnswerItem);\n            if (answers[i].includes(this.curRoundData.stopCode)) {\n                item.getComponent(AnswerItem).setString(answers[i].substring(0, answers[i].length - 1));\n            } else {\n                item.getComponent(AnswerItem).setString(answers[i]);\n            }\n            this.root.rootNode && (item.parent = this.root.rootNode);\n            i++;\n        }\n        this.root.stopCode.string = this.curRoundData.stopCode;\n    }\n\n    addItemToQuestion(): void {\n        if (this.curRoundData && this.curRoundData.questions) {\n            let count = this.curRoundData.questions.length, i = 0;\n            while (i < count) {\n                const item = kit.pool.PrefabPool.get(this.root.questionPrefab, \"questionItem\", QuestionItem);\n                item.getComponent(QuestionItem).setString(this.curRoundData.questions[i]);\n                item.parent = this.root.questionNode;\n                i++;\n            }\n        }\n    }\n\n    synchronous(opDt: any): void {\n        // if (!this.operation) {\n        //     this.operation = opDt;\n        //     this.resumeGameStatus();\n        // } else {\n        // this.operation.round = opDt.round;\n        // this.step = this.operation.step = opDt.step;\n        // let tempData = opDt.data;\n        // let index = 0;\n        // while (index < tempData.length) {\n        //     const temp = tempData[index];\n        //     if (temp && this.operation.data[index] && temp.content == this.operation.data[index].content) {\n        //         if (this.operation.data[index].position.x != temp.position.x || this.operation.data[index].position.y != temp.position.you) {\n        //             this.syncItemPosition(temp);\n        //             this.operation.data[index].position.x = temp.position.x;\n        //             this.operation.data[index].position.y = temp.position.y;\n        //         }\n        //     }\n        //     index++;\n        // }\n        // }\n\n        if (!this.operation || this.operation.round != opDt.round) {\n            this.operation = opDt;\n            this.operation.step == 0 ? this.addLayoutToRoot() : this.removeLayoutFromRoot();\n            this.resumeGameStatus();\n            this.operation.step == 0 && this.root.scheduleOnce(() => {\n                this.removeLayoutFromRoot();\n            }, 0.5);\n        } else {\n            this.removeLayoutFromRoot();\n            this.operation.round = opDt.round;\n            this.step = this.operation.step = opDt.step;\n            let tempData = opDt.data;\n            let index = 0;\n            while (index < tempData.length) {\n                const temp = tempData[index];\n                if (temp && this.operation.data[index] && temp.content == this.operation.data[index].content) {\n                    if (this.operation.data[index].position.x != temp.position.x || this.operation.data[index].position.y != temp.position.y) {\n                        this.syncItemPosition(temp);\n                        this.operation.data[index].position.x = temp.position.x;\n                        this.operation.data[index].position.y = temp.position.y;\n                    }\n                }\n                index++;\n            }\n        }\n    }\n\n    protected syncItemPosition(data: ItemData): void {\n        this.root.questionNode.children.forEach(child => {\n            if (child.getComponent(QuestionItem).getString() == data.content) {\n                cc.tween(child).to(0.5, { x: data.position.x, y: data.position.y }, cc.easeCubicActionOut()).start();\n            }\n        })\n    }\n\n    private getCorrect(str: string): boolean {\n        let bool = false;\n        this.operation.data.forEach(itemData => {\n            if (itemData.content == str) {\n                bool = itemData.correct;\n            }\n        });\n        return bool;\n    }\n\n    private checkAllCorrect(): void {\n        let allCorrect: boolean = true;\n        this.operation.data.forEach(itemData => {\n            allCorrect && (allCorrect = itemData.correct);\n        });\n        if (allCorrect) {\n            // this.operateLock = true;\n            // this.root.rootNode.children.forEach((node, index) => {\n            //     cc.tween(node).delay(0.5).to(0.5, { opacity: 0 }, cc.easeCubicActionOut()).call(() => {\n            //         if (index == (this.root.rootNode.childrenCount - 1)) {\n            //             this.nextRound();\n            //         }\n            //     }).start();\n            // });\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n                this.timeout = null;\n            }\n            this.root.hideLaser(this.operation.round);\n            this.root.sentenceComplete();\n            setTimeout(() => {\n                this.root.exportOperationData(this.operation, \"roundComplete\");\n            }, 1000);\n        }\n    }\n}\n","import Delegate from \"./Delegate\";\nimport QuestionItem from \"./QuestionItem\";\n\nconst { ccclass, property } = cc._decorator;\n/**\n * 游戏显示逻辑\n */\n@ccclass\nexport default class MakeASentenceScript extends cc.Component implements center.ISubGame {\n    @property(cc.Prefab)\n    answerPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    questionPrefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    rootNode: cc.Node = null;\n\n    @property(cc.Label)\n    stopCode: cc.Label = null;\n\n    @property(cc.Node)\n    questionNode: cc.Node = null;\n\n    // @property(cc.Node)\n    // teacherNode: cc.Node = null;\n\n    // @property(cc.Toggle)\n    // lockOperation: cc.Toggle = null;\n\n    // @property(cc.Toggle)\n    // freeOperation: cc.Toggle = null;\n\n    // @property(cc.Label)\n    // studentStatus: cc.Label = null;\n\n    @property(cc.Node)\n    hand: cc.Node = null;\n\n    @property(cc.Node)\n    leftDoor: cc.Node = null;\n\n    @property(cc.Node)\n    rightDoor: cc.Node = null;\n\n    @property([sp.Skeleton])\n    lasers: sp.Skeleton[] = [];\n\n    @property(sp.Skeleton)\n    max: sp.Skeleton = null;\n\n    @property(sp.Skeleton)\n    melinda: sp.Skeleton = null;\n\n    @property(sp.Skeleton)\n    mili: sp.Skeleton = null;\n\n    bundleName: string;\n    content: center.IContent;\n    isTeacher: boolean;\n\n    // private startTime: number;\n    // private nextTickTime: number;\n    snapData: any;\n    private laserBaseOpacity: number[];\n    protected delegate: Delegate;\n\n    onLoad() {\n        this.delegate = new Delegate(this);\n        this.laserBaseOpacity = [];\n        let i = 0;\n        while (i < this.lasers.length) {\n            let laser = this.lasers[i];\n            this.laserBaseOpacity.push(laser.node.opacity);\n            laser.node.opacity = 0;\n            i++;\n        }\n    }\n\n    onDestroy(): void {\n        super.onDestroy();\n        this.delegate.onDestroy();\n        this.delegate = null;\n    }\n\n    start() {\n        this.content && this.content.onGameReady();\n        this.isTeacher ? this.delegate.setOperationLock() : this.delegate.setOperationFree();\n        this.playIdle();\n        if (this.snapData && this.snapData.action != \"gameComplete\") {\n            let round = this.snapData.actionData.round;\n            this.lasers.forEach((laser, index) => {\n                index >= round && (laser.node.opacity = this.laserBaseOpacity[index]);\n            });\n            this.delegate.synchronous(this.snapData.actionData);\n            this.delegate.start(true);\n        } else {\n            this.showLasers(this.onStart.bind(this));\n        }\n    }\n\n    onStart(): void {\n        this.delegate.start();\n    }\n\n    private cloneActDt(source: any): any {\n        return JSON.parse(JSON.stringify(source));\n    }\n\n    setParams(data: { evn: center.EVN; isTeacher?: boolean; userInfo?: center.UserInfo; font?: cc.Font; }): void {\n        cc.log(`set params: ${JSON.stringify(data)}`);\n        this.isTeacher = data.isTeacher || false;\n    }\n\n    setContent(content: center.IContent): void {\n        this.content = content;\n        let snapShot: any = this.content.getSnapshot();\n        this.snapData = snapShot;\n    }\n\n    receiveMessage(data: any): void {\n        cc.log(`receiveMessage: ${data}`);\n        if (data.isTeacher) {\n            if (!this.isTeacher) {\n                let actionData = data.actionData;\n                switch (actionData) {\n                    case \"nextRound\":\n                        this.delegate.nextRound();\n                        break;\n                    // case \"lockOperation\":\n                    //     this.delegate.setOperationLock();\n                    //     this.studentStatus.string = \"lockOperation\";\n                    //     break;\n                    // case \"freeOperation\":\n                    //     this.delegate.setOperationFree();\n                    //     this.studentStatus.string = \"freeOperation\";\n                    //     break;\n                }\n            }\n        } else {\n            if (this.isTeacher) {\n                let action = data.action;\n                switch (action) {\n                    case \"operation\":\n                        this.delegate.synchronous(data.actionData);\n                        if (data.correct == 0) {\n                            this.playersHurt();\n                        }\n                        break;\n                    case \"roundComplete\":\n                        let round = data.actionData.round;\n                        this.hideLaser(round);\n                        this.sentenceComplete();\n                        break;\n                    case \"gameComplete\":\n                        this.sentenceComplete(true);\n                        break;\n                }\n            }\n        }\n    }\n\n    timeout(): void {\n\n    }\n    /**\n     * 游戏开始 显示激光\n     * @param callBack \n     */\n    showLasers(callBack?: Function): void {\n        let that = this;\n        let count: number = 0;\n        this.lasers.forEach((laser, index) => {\n            laser.node.active = true;\n            cc.tween(laser).delay(index * 0.2).call(() => {\n                laser.node.opacity = this.laserBaseOpacity[index];\n                that.playSpine(laser, \"appear\", false, () => {\n                    that.playSpine(laser, \"idle\", true);\n                    count++;\n                    if (count == that.lasers.length) {\n                        callBack && callBack.apply(null);\n                    }\n                });\n            }).start();\n        });\n    }\n    /**\n     * 隐藏指定轮次的激光\n     * @param round \n     */\n    hideLaser(round: number): void {\n        let that = this;\n        this.lasers.forEach((laser, index) => {\n            if (round == index) {\n                that.playSpine(laser, \"disappear\", false, () => {\n                    laser.node.active = false;\n                });\n            }\n        });\n    }\n    /**\n     * 游戏手势指引\n     * @param startPos 开始位置\n     * @param endPos 结束位置\n     */\n    guildHand(startPos: cc.Vec3, endPos: cc.Vec3): void {\n        if (this.hand) {\n            this.hand.active = true;\n            cc.tween(this.hand).repeatForever(\n                cc.tween()\n                    .set({ x: startPos.x, y: startPos.y })\n                    .to(1.5, { x: endPos.x, y: endPos.y }, cc.easeCubicActionOut())\n                    .delay(0.5)\n            ).start();\n        }\n    }\n    /**\n     * 结束手势指引\n     */\n    stopHand(): void {\n        cc.Tween.stopAllByTarget(this.hand);\n        this.hand.active = false;\n    }\n    /**\n     * 长时间未操作（5s) 提示\n     * @param words \n     */\n    tipShow(words: string[]): void {\n        this.questionNode.children.forEach(node => {\n            if (words.includes(node.getComponent(QuestionItem).getString())) {\n                // cc.Tween.stopAllByTarget(node);\n                // cc.tween(node).repeatForever(\n                //     cc.tween(node).to(0.5, { scale: 1.2 }, cc.easeCubicActionOut())\n                //         .delay(0.2)\n                //         .to(0.5, { scale: 1 }, cc.easeCubicActionOut())\n                // ).start();\n                node.getComponent(QuestionItem).showTip();\n            }\n        });\n    }\n    /**\n     * 结束 未操作 提示\n     */\n    stopTip(): void {\n        this.questionNode.children.forEach(node => {\n            // cc.Tween.stopAllByTarget(node);\n            // node.scale = 1;\n            node.getComponent(QuestionItem).hideTip();\n        });\n    }\n    /**\n     * 游戏内角色待机\n     */\n    playIdle(): void {\n        this.playSpine(this.max, \"idle\", true);\n        this.playSpine(this.melinda, \"daiji\", true);\n        this.playSpine(this.mili, \"daiji\", true);\n    }\n    /**\n     * 角色负反馈\n     */\n    playersHurt(): void {\n        cc.log(\"playersHurt\");\n        this.playSpine(this.max, \"shiluo\", false, () => {\n            this.playSpine(this.max, \"idle\", true);\n        });\n        this.playSpine(this.melinda, \"fu_fk\", false, () => {\n            this.playSpine(this.melinda, \"daiji\", true);\n        });\n        this.playSpine(this.mili, \"fu_fankui\", false, () => {\n            this.playSpine(this.mili, \"daiji\", true);\n        });\n    }\n    /**\n     * 正反馈\n     */\n    sentenceComplete(roundComplete: boolean = false): void {\n        cc.log(\"sentenceComplete\");\n        if (roundComplete) {\n            this.playSpine(this.max, \"qinzhu\", false, () => {\n                this.playSpine(this.max, \"idle\", true);\n            });\n            this.playSpine(this.melinda, \"qingzhu\", false, () => {\n                this.playSpine(this.melinda, \"daiji\", true);\n            });\n            this.playSpine(this.mili, \"qingzhu\", false, () => {\n                this.playSpine(this.mili, \"daiji\", true);\n            });\n            this.openTheDoor();\n        } else {\n            this.playSpine(this.max, \"kaixin\", false, () => {\n                this.playSpine(this.max, \"idle\", true);\n            });\n            this.playSpine(this.melinda, \"zheng_fk\", false, () => {\n                this.playSpine(this.melinda, \"daiji\", true);\n            });\n            this.playSpine(this.mili, \"zheng_fk\", false, () => {\n                this.playSpine(this.mili, \"daiji\", true);\n            });\n            // this.scheduleOnce(this.onNextRound.bind(this), 2);\n            setTimeout(() => {\n                this.onNextRound(false);\n            }, 2000);\n        }\n    }\n\n    openTheDoor(): void {\n        cc.tween(this.leftDoor).to(1, { x: -164 }, cc.easeCubicActionOut()).start();\n        cc.tween(this.rightDoor).to(1, { x: 164 }, cc.easeCircleActionOut())\n            .delay(2)\n            .call(() => {\n                this.content && this.content.onGameComplete();\n                // this.localData && cc.sys.localStorage.setItem(\"operation\", JSON.stringify(this.localData));\n            })\n            .start();\n    }\n    // private localData: any[] = [];\n    /**\n     * 上报操作数据\n     * @param data \n     */\n    exportOperationData(data: any, action: string, correct: number = -1): void {\n        if (!this.isTeacher) {\n            let tempData = { isTeacher: this.isTeacher, action: action, actionData: data, correct: correct };\n            this.content && this.content.postMessage(JSON.stringify(tempData));\n        }\n        // !this.isTeacher && this.localData.push(tempData);\n    }\n    /**\n     * 下一轮\n     */\n    onNextRound(dispatch: boolean = false): void {\n        let data = { isTeacher: this.isTeacher, actionData: \"nextRound\" };\n        if (this.isTeacher && dispatch && this.content) {\n            cc.log(\"dispatch NextRound\");\n            this.content.postMessage(JSON.stringify(data));\n        }\n        this.delegate && this.delegate.nextRound();\n    }\n    /**\n     * 老师锁定 解锁\n     */\n    onToggleSwitch(): void {\n        let data = { isTeacher: this.isTeacher, actionData: \"\" };\n        // if (this.lockOperation.isChecked) {\n        //     data.actionData = \"lockOperation\";\n        //     cc.log(\"lockOperation\");\n        // } else {\n        //     data.actionData = \"freeOperation\";\n        //     cc.log(\"freeOperation\");\n        // }\n        this.content && this.content.postMessage(JSON.stringify(data));\n    }\n    /**\n     * 播放 Spine 动画\n     * @param ske \n     * @param animation \n     * @param loop \n     * @param callBack \n     */\n    protected playSpine(ske: sp.Skeleton, animation: string, loop: boolean = false, callBack?: Function): void {\n        if (ske && ske.animation != animation) {\n            ske.clearTracks();\n            ske.setToSetupPose();\n            ske.setAnimation(0, animation, loop);\n            callBack && ske.setCompleteListener(callBack);\n        }\n    }\n}\n","import AnswerItem from \"./AnswerItem\";\n\n\nconst { ccclass, property } = cc._decorator;\n/**\n * 游戏显示逻辑\n */\n@ccclass\nexport default class QuestionItem extends AnswerItem {\n    showTip(): void {\n        cc.Tween.stopAllByTarget(this.node);\n        cc.tween(this.node).repeatForever(\n            cc.tween(this.node).to(0.5, { scale: 1.2 }, cc.easeCubicActionOut())\n                .delay(0.2)\n                .to(0.5, { scale: 1 }, cc.easeCubicActionOut())\n        ).start();\n    }\n\n    hideTip(): void {\n        cc.Tween.stopAllByTarget(this.node);\n        this.node.scale = 1;\n    }\n\n    onDestroy(): void {\n        this.unuse();\n        kit.pool.PrefabPool.put(this.node, \"questionItem\", QuestionItem);\n    }\n\n    reuse(): void {\n        cc.log(\"QuestionItem reuse item\");\n    }\n\n    unuse(): void {\n        cc.log(\"QuestionItem un use\");\n    }\n}"],"file":"index.js"}