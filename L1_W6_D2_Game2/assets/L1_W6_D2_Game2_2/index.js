window.__require=function t(e,o,n){function i(s,c){if(!o[s]){if(!e[s]){var p=s.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!c&&a)return a(p,!0);if(r)return r(p,!0);throw new Error("Cannot find module '"+s+"'")}s=p}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){return i(e[s][1][t]||t)},d,d.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({DropArea:[function(t,e,o){"use strict";cc._RF.push(e,"733a2ExVn9LN40Kml2fm+lV","DropArea");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./OptionItem"),c=cc._decorator,p=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.answer=0,e._answered=!1,e}return i(e,t),Object.defineProperty(e.prototype,"answered",{get:function(){return this._answered},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(t){this._answered=!1,"number"==typeof t&&(this.answer=t);var e=this.getComponent(cc.BoxCollider);e.size.width=this.node.width,e.size.height=this.node.height,this.node.destroyAllChildren(),this.resetUI()},e.prototype.onCollisionEnter=function(t){t.getComponent(s.default)},e.prototype.onCollisionStay=function(t){var e=t.getComponent(s.default);e&&(e.currDropArea=this)},e.prototype.onCollisionExit=function(t){var e=t.getComponent(s.default);e&&(e.currDropArea=null,this.resetUI())},e.prototype.resetUI=function(){},e.prototype.guideRightAnswer=function(t,e){this.node.destroyAllChildren();var o=new cc.Node;o.x=e.x,o.y=e.y,o.addComponent(cc.Sprite).spriteFrame=t,o.opacity=102,this.node.addChild(o)},e.prototype.showRightAnswer=function(t,e){this.node.destroyAllChildren();var o=new cc.Node;o.x=e.x,o.y=e.y,o.addComponent(cc.Sprite).spriteFrame=t,o.opacity=102,this.node.addChild(o),cc.tween(o).to(.5,{opacity:255}).start(),this._answered=!0},e.prototype.showWrongState=function(){},r([p],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./OptionItem":"OptionItem"}],OptionItem:[function(t,e,o){"use strict";cc._RF.push(e,"c096cWDYwZKX5WYfSwYXb04","OptionItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../module/kit/audio/AudioManager"),c=t("../../../module/kit/event/ListenerManager"),p=t("../../../scripts/GameData"),a=t("./Rope/RopeControl"),d=cc._decorator,u=d.ccclass,l=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e.ropeControl=null,e.currDropArea=null,e.center=cc.v2(0,0),e.joint=null,e.originFrequency=-1,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.init=function(t,e){this.node.opacity=255;var o=this.getComponent(cc.Sprite);t&&(o.spriteFrame=t),e&&(this.center=e);var n=this.getComponent(cc.PhysicsBoxCollider);n.size.width=this.node.width,n.size.height=this.node.height,n.offset.y=(.5-this.node.anchorY)*this.node.height,n.offset.x=(.5-this.node.anchorX)*this.node.width;var i=this.node.getComponent(cc.BoxCollider);i.offset.y=(.5-this.node.anchorY)*this.node.height,i.offset.x=(.5-this.node.anchorX)*this.node.width},e.prototype.start=function(){this.joint=this.ropeControl.startNode.getComponent(cc.DistanceJoint),this.originFrequency=this.joint.frequency},e.prototype.hide=function(){},e.prototype.onTouchStart=function(){this.joint.frequency=1,this.node.parent.setSiblingIndex(5),c.ListenerManager.dispatch("drag_option",this)},e.prototype.onTouchMove=function(){c.ListenerManager.dispatch("move_option",this)},e.prototype.onTouchEnd=function(){if(this.joint.frequency=this.originFrequency,!this.currDropArea)return this.playEfect("SE_gendupintu_02_ytz"),void c.ListenerManager.dispatch("drop_option",this);this.currDropArea.answer===this.id?(console.log(this.id,"\u7b54\u5bf9\u4e86"),this.playEfect("SE_gendupintu_03_ytz"),this.showRightAnimation(this.currDropArea)):this.showWrongAnimation(),c.ListenerManager.dispatch("drop_option",this)},e.prototype.showRightAnimation=function(t){var e=this,o=this.node.getComponent(cc.Sprite);this.node.opacity=0,cc.tween(this.ropeControl.node).to(1,{opacity:0}).call(function(){e.ropeControl.disable()}).start(),t.showRightAnswer(o.spriteFrame,this.center)},e.prototype.showWrongAnimation=function(){this.playEfect("SE_gendupintu_02_ytz")},e.prototype.playEfect=function(t,e,o){void 0===o&&(o=!0);var n="";o?(t="res/audios/"+t,n=p.default.curBundleName):(t="audio"+t,n="commonRes"),s.default.playEffect(n,t,e)},r([l({step:1})],e.prototype,"id",void 0),r([l(a.default)],e.prototype,"ropeControl",void 0),r([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../module/kit/audio/AudioManager":void 0,"../../../module/kit/event/ListenerManager":void 0,"../../../scripts/GameData":void 0,"./Rope/RopeControl":"RopeControl"}],PhysicsSetting:[function(t,e,o){"use strict";cc._RF.push(e,"3c939THWwZAY4StT2qgdj4y","PhysicsSetting");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,p=s.property;cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){cc.director.getPhysicsManager().enabled=!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mouseJoint=!0,e}return i(e,t),e.prototype.onLoad=function(){var t=new cc.Node;t.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this.mouseJoint&&(t.addComponent(cc.MouseJoint).mouseRegion=this.node),t.parent=this.node},r([p(cc.Boolean)],e.prototype,"mouseJoint",void 0),r([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Puzzle:[function(t,e,o){"use strict";cc._RF.push(e,"20d539kLypLOZZobmgZ20/+","Puzzle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{p(n.next(t))}catch(e){r(e)}}function c(t){try{p(n.throw(t))}catch(e){r(e)}}function p(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}p((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return p([t,e])}}function p(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var p=t("./DropArea"),a=t("./Rope/RopeControl"),d=t("../../../module/component/scripts/GameCompBase"),u=t("../../../module/kit/audio/AudioManager"),l=t("../../../module/kit/event/ListenerManager"),h=t("../../../module/kit/event/BaseEvent"),f=cc._decorator,y=f.ccclass,g=f.property,v=function(){function t(){this.texture=null,this.textureCenterOffSet=cc.v2(0,0)}return r([g(cc.SpriteFrame)],t.prototype,"texture",void 0),r([g({tooltip:"\u56fe\u7247\u504f\u79fb\u91cf"})],t.prototype,"textureCenterOffSet",void 0),r([y("OptionItemData")],t)}(),m=function(){function t(){this.followWord="",this.followWordImg="",this.randomTileAudo=[],this.areaBg=null,this.lineTexture=null,this.options=[],this.feedbackSpine=null,this.feedbackFrames=[],this.feedbackAnimation="",this.idleAnimation="",this.answers=[]}return r([g({tooltip:"\u8ddf\u8bfb\u5355\u8bcd"})],t.prototype,"followWord",void 0),r([g({tooltip:"\u8ddf\u8bfb\u53e5\u5b50\u56fe\u7247\u8def\u5f84"})],t.prototype,"followWordImg",void 0),r([g({tooltip:"\u968f\u673a\u64ad\u653e\u5f53\u524dtitle\u8bed\u97f3"})],t.prototype,"randomTileAudo",void 0),r([g(cc.SpriteFrame)],t.prototype,"areaBg",void 0),r([g(cc.SpriteFrame)],t.prototype,"lineTexture",void 0),r([g([v])],t.prototype,"options",void 0),r([g(sp.Skeleton)],t.prototype,"feedbackSpine",void 0),r([g({type:[cc.SpriteFrame]})],t.prototype,"feedbackFrames",void 0),r([g()],t.prototype,"feedbackAnimation",void 0),r([g()],t.prototype,"idleAnimation",void 0),r([g({type:[cc.Integer],tooltip:"4\u4e2a\u533a\u57df\u7684\u7b54\u6848\u914d\u7f6e"})],t.prototype,"answers",void 0),r([y("Question")],t)}(),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ropes=[],e.dropAreas=[],e.questionsConfig=[],e.blockInputNode=null,e.dropAreaNode=null,e.ropesNode=null,e.transferMain=null,e.handCom=null,e.starNow=0,e.guildHander=null,e.currQuestionIndex=-1,e.hasPlayTitle=!1,e.dropAreaInPos=cc.v3(0,-131,0),e.dropAreaOutPos=cc.v3(0,-800,0),e.ropesInPos=cc.v3(0,521,0),e}return i(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),cc.director.getCollisionManager().enabled=!0,l.ListenerManager.on("drag_option",this.onDragOption,this),l.ListenerManager.on("move_option",this.onMoveOption,this),l.ListenerManager.on("drop_option",this.onDropOption,this),l.ListenerManager.on("follow_read_completed",this.onFollowReadCompleted,this),this.dropAreaNode.node.setPosition(this.dropAreaOutPos),this.initRecordComponent(),this.initTransferComponent().then(function(t){e.transferMain=t}),this.initHandComponent().then(function(t){e.handCom=t})},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.firstGuild=function(t){var e=this;this.guildHander=function(){var t=e.ropes[0].node.getChildByName("option"),o=e.dropAreas[0].node,n=e.handCom.node.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v2(t.width*(.5-t.anchorX),t.height*(.5-t.anchorY)))),i=e.handCom.node.parent.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2()));e.handCom.wipeCycle(n,i),e.handCom.node.active=!0},this.scheduleOnce(this.guildHander,t)},e.prototype.hidGuild=function(){this.guildHander&&(this.unschedule(this.guildHander),this.guildHander=null),this.handCom.node.active=!1},e.prototype.onGameStart=function(){this.playEfect("Drag_and_drop_ytz"),this.nextQuestion(),this.firstGuild(3)},e.prototype.removeRecordComp=function(e){t.prototype.removeRecordComp.call(this),this.onFollowReadCompleted(e)},e.prototype.onDragOption=function(t){this.hidGuild(),this.hasPlayTitle=!1;var e=this.getOptionAnswerArea(t);e&&e.guideRightAnswer(t.getComponent(cc.Sprite).spriteFrame,t.center)},e.prototype.onMoveOption=function(){if(!this.hasPlayTitle){var t=this.questionsConfig[this.currQuestionIndex];if(t.randomTileAudo.length>0){var e=Math.floor(Math.random()*t.randomTileAudo.length),o=t.randomTileAudo[e];this.playEfect(o)}this.hasPlayTitle=!0}},e.prototype.onDropOption=function(){for(var t=!0,e=0,o=this.dropAreas;e<o.length;e++){var n=o[e];n.answered||(t=!1,n.init())}t&&this.onPuzzleCompleted()},e.prototype.onPuzzleCompleted=function(){var t=this;console.log("\u5b8c\u6210\u62fc\u56fe"),this.playTigoIdle(),this.scheduleOnce(function(){t.hideDropArea()},.5),this.scheduleOnce(function(){t.record()},1.8)},e.prototype.onFollowReadCompleted=function(t){return s(this,void 0,void 0,function(){var e,o,n=this;return c(this,function(i){switch(i.label){case 0:return this.starNow+=t,[4,this.showDropArea()];case 1:return i.sent(),this.disableInput(),[4,this.playTigoFeedback()];case 2:for(i.sent(),e=this.questionsConfig[this.currQuestionIndex],o=0;o<this.ropes.length;o++)this.ropes[o].init(e.lineTexture,e.feedbackFrames[o],e.options[o].textureCenterOffSet);return this.showRopes().then(function(){return new Promise(function(t){n.scheduleOnce(t,1)})}).then(function(){return Promise.all([n.hideRopes(),n.hideDropArea()])}).then(function(){n.nextQuestion()}),[2]}})})},e.prototype.playTigoIdle=function(){var t=this.questionsConfig[this.currQuestionIndex];t.feedbackSpine.node.active=!0,t.feedbackSpine.setAnimation(0,t.idleAnimation,!0)},e.prototype.playTigoFeedback=function(){var t=this;return new Promise(function(e){t.dropAreaNode.getComponent(cc.Sprite).enabled=!1;var o=t.questionsConfig[t.currQuestionIndex];o.feedbackSpine.node.active=!0;var n=o.feedbackSpine.setAnimation(0,o.feedbackAnimation,!0);o.feedbackSpine.setTrackCompleteListener(n,function(){cc.log("222222222222"),e()})})},e.prototype.hideTigoFeedback=function(){this.dropAreaNode.getComponent(cc.Sprite).enabled=!0;for(var t=0,e=this.questionsConfig;t<e.length;t++)e[t].feedbackSpine.node.active=!1},e.prototype.nextQuestion=function(){var t=this;if(console.log("\u4e0b\u4e00\u9898"),this.currQuestionIndex>=this.questionsConfig.length-1)return console.warn("\u5df2\u7ed3\u675f"),void this.gameEnd(this.starNow);this.currQuestionIndex++;var e=this.questionsConfig[this.currQuestionIndex];this.disableInput(),this.hideTigoFeedback(),this.initRopes(e),this.showRopes().then(function(){t.enableInput()}),this.initDropArea(e),this.showDropArea()},e.prototype.initDropArea=function(t){t.areaBg&&(this.dropAreaNode.spriteFrame=t.areaBg);for(var e=0;e<this.dropAreas.length;e++)this.dropAreas[e].init(t.answers[e])},e.prototype.showDropArea=function(){return s(this,void 0,Promise,function(){var t=this;return c(this,function(){return[2,new Promise(function(e){cc.log("1111111111111");var o=t.dropAreaNode.node;o.active=!0,o.stopAllActions(),o.setPosition(t.dropAreaOutPos),cc.tween(o).to(.8,{position:t.dropAreaInPos}).call(function(){e()}).start()})]})})},e.prototype.hideDropArea=function(){var t=this;return new Promise(function(e){var o=t.dropAreaNode.node;o.stopAllActions(),o.setPosition(t.dropAreaInPos),cc.tween(o).to(.8,{position:t.dropAreaOutPos}).call(function(){e()}).start()})},e.prototype.showFeedBack=function(){return s(this,void 0,Promise,function(){var t=this;return c(this,function(){return[2,new Promise(function(e){cc.log("1111111111111");var o=t.questionsConfig[t.currQuestionIndex];o.feedbackSpine.node.active=!0,cc.tween(o.feedbackSpine.node).by(.8,{y:300}).call(function(){e()}).start()})]})})},e.prototype.initRopes=function(t){for(var e=0;e<this.ropes.length;e++)this.ropes[e].init(t.lineTexture,t.options[e].texture,t.options[e].textureCenterOffSet)},e.prototype.showRopes=function(){var t=this;return new Promise(function(e){t.ropesNode.stopAllActions(),t.ropesNode.setPosition(t.ropesInPos),cc.log("-- this.ropesNode--",t.ropesNode);for(var o=cc.tween(t.node),n=function(e){e.endNode.stopAllActions(),o.call(function(){e.enable(),t.playEfect("SE_gendupintu_01_ytz")}).delay(.5)},i=0,r=t.ropes;i<r.length;i++)n(r[i]);o.call(function(){e()}),o.start()})},e.prototype.hideRopes=function(){var t=this;return new Promise(function(e){for(var o=function(o){var n=t.ropes[o];n.endNode.getComponent(cc.RigidBody).enabled=!1,n.endNode.stopAllActions(),cc.tween(n.endNode).delay(.3*o).to(.8,{y:700}).call(function(){n.node.opacity=0,o===t.ropes.length-1&&e()}).start()},n=0;n<t.ropes.length;n++)o(n)})},e.prototype.enableInput=function(){this.blockInputNode.active=!1},e.prototype.disableInput=function(){this.blockInputNode.active=!0},e.prototype.getOptionAnswerArea=function(t){for(var e=0,o=this.dropAreas;e<o.length;e++){var n=o[e];if(n.answer===t.id)return n}return null},e.prototype.record=function(){var t=this.questionsConfig[this.currQuestionIndex].followWord,e=this.questionsConfig[this.currQuestionIndex].followWordImg;l.ListenerManager.dispatch(h.BaseEvent.EVENT_FOLLOW_UP,{text:t,textString:t,word:!0,img:e,imgScale:1,music:"res/audios/"+this.questionsConfig[this.currQuestionIndex].randomTileAudo[0],time:3})},e.prototype.playEfect=function(t,e,o){void 0===o&&(o=!0);var n="";o?(t="res/audios/"+t,n=this.bundleName):(t="audio"+t,n="commonRes"),u.default.playEffect(n,t,e)},r([g([a.default])],e.prototype,"ropes",void 0),r([g([p.default])],e.prototype,"dropAreas",void 0),r([g([m])],e.prototype,"questionsConfig",void 0),r([g(cc.Node)],e.prototype,"blockInputNode",void 0),r([g(cc.Sprite)],e.prototype,"dropAreaNode",void 0),r([g(cc.Node)],e.prototype,"ropesNode",void 0),r([y],e)}(d.default);o.default=_,cc._RF.pop()},{"../../../module/component/scripts/GameCompBase":void 0,"../../../module/kit/audio/AudioManager":void 0,"../../../module/kit/event/BaseEvent":void 0,"../../../module/kit/event/ListenerManager":void 0,"./DropArea":"DropArea","./Rope/RopeControl":"RopeControl"}],RopeControl:[function(t,e,o){"use strict";cc._RF.push(e,"81990ITpV9D5I3HPntKAC+Y","RopeControl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../OptionItem"),c=cc._decorator,p=c.ccclass,a=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics=null,e.startNode=null,e.endNode=null,e.isEnable=!0,e}return i(e,t),e.prototype.onLoad=function(){this.isEnable?this.enable():this.disable(),this.init()},e.prototype.init=function(t,e,o){this.endNode.getComponent(s.default).init(e,o),this.node.stopAllActions(),this.node.opacity=255,this.disable(),this.endNode.position=this.startNode.position,this.graphics.type=cc.Sprite.Type.TILED,this.graphics.node.anchorX=.5,this.graphics.node.anchorY=1,this.graphics.node.height=0,t&&(this.graphics.spriteFrame=t)},e.prototype.update=function(){if(this.isEnable){var t=this.startNode.position,e=this.endNode.position;this.graphics.node.setPosition(t);var o=e.sub(t);this.graphics.node.height=o.mag(),this.graphics.node.angle=180*cc.v2(0,-1).signAngle(cc.v2(o.x,o.y))/Math.PI}},e.prototype.enable=function(){this.endNode.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,this.isEnable=!0},e.prototype.disable=function(){this.endNode.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this.isEnable=!1},r([a(cc.Sprite)],e.prototype,"graphics",void 0),r([a(cc.Node)],e.prototype,"startNode",void 0),r([a(cc.Node)],e.prototype,"endNode",void 0),r([a(cc.Boolean)],e.prototype,"isEnable",void 0),r([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../OptionItem":"OptionItem"}]},{},["DropArea","OptionItem","Puzzle","PhysicsSetting","RopeControl"]);