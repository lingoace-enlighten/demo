window.__require=function e(t,n,o){function i(r,c){if(!n[r]){if(!t[r]){var p=r.split("/");if(p=p[p.length-1],!t[p]){var l="function"==typeof __require&&__require;if(!c&&l)return l(p,!0);if(a)return a(p,!0);throw new Error("Cannot find module '"+r+"'")}r=p}var s=n[r]={exports:{}};t[r][0].call(s.exports,function(e){return i(t[r][1][e]||e)},s,s.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({L2_W6_D2_Game2Anim:[function(e,t,n){"use strict";cc._RF.push(t,"1cdacl/9iFIo55vPVDMbMou","L2_W6_D2_Game2Anim");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LaBaSpineName=n.aiSpineName=n.wuTaiSpineName=n.HopperSpineName=void 0;var r=e("../../../module/component/scripts/AnimationEx"),c=cc._decorator,p=c.ccclass,l=c.property;(function(e){e.daiji="hopper_xie_daiji",e.ganga="hopper_xie_ganga",e.gaoxing="hopper_xie_gaoxing",e.jingya="hopper_xie_jingya",e.qitiao="hopper_xie_tiaoyue",e.renwudiaoluo_1="hopper_xie_renwudiaoluo_1",e.renwudiaoluo_2="hopper_xie_renwudiaoluo_2",e.ruanmianmiandaiji="hopper_xie_ruanmianmiandaiji",e.sikao="hopper_xie_sikao",e.xiyue="hopper_xie_xiyue",e.yihan="hopper_xie_yihan"})(n.HopperSpineName||(n.HopperSpineName={})),function(e){e.guan_idle="wutai_idle",e.guang="wutai_guang",e.kai="wutai_kai"}(n.wuTaiSpineName||(n.wuTaiSpineName={})),function(e){e.gaoxing="shilaimu_gaoxing",e.jingya="shilaimu_jingya",e.daiji="shilaimu_ruanmianmiandaiji",e.tiao="shilaimu_tiao"}(n.aiSpineName||(n.aiSpineName={})),function(e){e.idle="bofangjingzhizhuangtai",e.play="bofangzhuangtai"}(n.LaBaSpineName||(n.LaBaSpineName={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeAnimation=null,t.nodeClick=null,t.skStar=null,t.skError=null,t.skRight=null,t.skHopper=null,t}return i(t,e),t.prototype.start=function(){this.skStar.node.active=!1},t.prototype.PlayDownTime=function(e){return new Promise(function(t){cc.tween(e).set({fillRange:1}).to(10,{fillRange:0}).call(function(){return t(null)}).start()})},t.prototype.Move=function(e,t,n){return void 0===n&&(n=.5),r.AnimationEx.MoveAnimation(e,e.getPosition(),t,n)},t.prototype.MoveTo=function(e,t,n,o){return void 0===o&&(o=.5),r.AnimationEx.MoveAnimation(e,t,n,o)},t.prototype.PlayHopper=function(e,t){var n=this;return void 0===t&&(t=!1),new Promise(function(o){r.AnimationEx.playSpine(n.skHopper,e,t).then(function(){o(null)})})},t.prototype.PlaySpine=function(e,t,n){return void 0===n&&(n=!1),new Promise(function(o){r.AnimationEx.playSpine(e,t,n).then(function(){o(null)})})},t.prototype.PlayError=function(e){var t=this;return new Promise(function(n){var o=t.nodeAnimation.convertToNodeSpaceAR(e);t.skError.node.setPosition(o),t.skError.node.active=!0,r.AnimationEx.playSpine(t.skError,"08_4_z_zhenzha",!1).then(function(){t.skError.node.active=!1,n(null)})})},t.prototype.PlayRight=function(e,t){var n=this,o=this.nodeAnimation.convertToNodeSpaceAR(e);this.skRight.node.setPosition(o),this.skRight.node.active=!0,r.AnimationEx.playSpine(this.skRight,"13_1_zhengfangti xiaoshixiaoguo",!1).then(function(){t&&t(),n.skRight.node.active=!1})},t.prototype.PlayTip=function(e){var t=this;return new Promise(function(n){for(var o=0;o<e.length;o++){var i=e[o];r.AnimationEx.playTipAnimation(i)}t.scheduleOnce(function(){n(null)},.3)})},t.prototype.WaitTimeTime=function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n(null)},e)})},t.prototype.PlayStar=function(){var e=this;return new Promise(function(t){e.skStar.node.active=!0,r.AnimationEx.playSpine(e.skStar,"start",!1).then(function(){e.skStar.node.active=!1,t(null)})})},t.prototype.PlayClick=function(){var e=this;return new Promise(function(t){e.nodeClick.stopAllActions(),cc.tween(e.nodeClick).to(.1,{scale:1.1}).repeat(3,cc.tween(e.nodeClick).to(.05,{angle:15}).to(.1,{angle:-15}).to(.05,{angle:0})).set({scale:1}).delay(.5).call(function(){t(null)}).start()})},a([l({type:cc.Node,displayName:"\u53cd\u9988\u7684\u7236\u8282\u70b9"})],t.prototype,"nodeAnimation",void 0),a([l({type:cc.Node,displayName:"\u95f9\u949f\u8282\u70b9"})],t.prototype,"nodeClick",void 0),a([l({type:sp.Skeleton,displayName:"\u5f00\u59cb"})],t.prototype,"skStar",void 0),a([l({type:sp.Skeleton,displayName:"error"})],t.prototype,"skError",void 0),a([l({type:sp.Skeleton,displayName:"right"})],t.prototype,"skRight",void 0),a([l({type:sp.Skeleton,displayName:"hopper"})],t.prototype,"skHopper",void 0),a([p],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../../module/component/scripts/AnimationEx":void 0}],L2_W6_D2_Game2BaseConfig:[function(e,t,n){"use strict";cc._RF.push(t,"52b52ChsGBCy7VGKqXEYL7+","L2_W6_D2_Game2BaseConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.L2_W6_D2_GameEvent=n.L2_W6_D2_Game2BaseConfig=void 0;var o=function(){function e(){this.list_aiPos=[cc.v2(-439,-298),cc.v2(-305,-310),cc.v2(-159,-304),cc.v2(-60,-310),cc.v2(68,-314),cc.v2(180,-291)],this.v2_happerPos=cc.v2(-551,-257),this.num_aiWith=54,this.num_tigoWith=223,this.num_maxLevel=3,this.list_topic=[],this.list_audios=[],this.list_select=[],this.list_right=[],this.list_aiIndex=[]}return Object.defineProperty(e,"getInstance",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!1,configurable:!0}),e}();n.L2_W6_D2_Game2BaseConfig=o,(n.L2_W6_D2_GameEvent||(n.L2_W6_D2_GameEvent={})).click="L2_W6_D2_GameEvent_clickEnd",cc._RF.pop()},{}],L2_W6_D2_GameBase:[function(e,t,n){"use strict";cc._RF.push(t,"3d0c7m5EeZC+oJAJ9UvYkq8","L2_W6_D2_GameBase");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{p(o.next(e))}catch(t){a(t)}}function c(e){try{p(o.throw(e))}catch(t){a(t)}}function p(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}p((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return p([e,t])}}function p(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},p=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],r=0,c=a.length;r<c;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../module/component/scripts/GameCompBase"),s=e("../../../module/kit/audio/AudioManager"),u=e("../../../module/kit/event/ListenerManager"),d=e("../../../module/kit/TigoManager"),h=e("../res/image/ShowcaseIcon"),m=e("./L2_W6_D2_Game2Anim"),f=e("./L2_W6_D2_Game2BaseConfig"),_=e("./ShowItem"),y=cc._decorator,v=y.ccclass,g=y.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeTop=null,t.nodeMask=null,t.nodeWuTai=null,t.nodeClock=null,t.nodeHopper=null,t.nodeDownTime=null,t.nodeAIParent=null,t.nodeOccupyTheSpot=null,t.nodeAnimParent=null,t.spIcon=[],t.compShowcaseIcon=null,t.audioBgMusic=null,t.compAnimation=null,t.configName="",t.compWord=null,t.compVideoTools=null,t.list_item=[],t.num_level=0,t.num_downTime=10,t.list_allAi=[],t.num_currClick=-1,t.num_errorCount=0,t.num_sumStar=0,t.list_aiRandomPos=[],t.list_right=[0,1,1],t.num_waitTime=5,t.bool_isStart=!1,t}return i(t,e),t.prototype.SetGameData=function(e){this.config=e,this.bundleName="QiangYiQiang"},t.prototype.start=function(){var t=this;e.prototype.start.call(this),this.initLabaComponent().then(function(e){return t.compVideoTools=e,t.compVideoTools.node.setParent(t.nodeTop),t.compVideoTools.node.setPosition(cc.v2(0,158)),t.compVideoTools.node.active=!0,t.compVideoTools.AddEvent(function(){t.OnClickPlayAudio()}),t.initColorWordComponent()}).then(function(e){t.compWord=e,t.compWord.node.setParent(t.nodeTop),t.compWord.node.setPosition(cc.Vec2.ZERO),t.compWord.initWordTool(25)}),this.Init(),this.list_audios=this.config.list_audios,this.list_select=this.config.list_select,this.list_right=this.config.list_right,this.list_aiIndex=this.config.list_aiIndex,this.list_topic=this.config.list_topic,u.ListenerManager.on(f.L2_W6_D2_GameEvent.click,this.OnClick,this)},t.prototype.Init=function(){var e=this;this.list_item=this.nodeWuTai.children.filter(function(t,n){var o=t.getComponent(_.default);return e.compAnimation.PlaySpine(o.skHuaWuTai,m.wuTaiSpineName.guan_idle),o.Init(n),t}),this.list_allAi=p(this.nodeAIParent.children)},t.prototype.onGameStart=function(){return r(this,void 0,Promise,function(){var e,t=this;return c(this,function(n){switch(n.label){case 0:return e=this.initShowcaseIconData(),this.compShowcaseIcon.node.active=!0,[4,this.compShowcaseIcon.InitData(e,this.bundleName)];case 1:return n.sent(),this.scheduleOnce(function(){t.audioBgMusic.play(),t.compShowcaseIcon.node.active=!1,t.PlayAudioSound("listen_and_choose_ytz").then(function(){t.SetLevelData(t.num_level),t.SetLevel(t.num_level)})},1),this.schedule(this.FiveWaitTip,1),[2]}})})},t.prototype.initShowcaseIconData=function(){for(var e=[],t=0,n=this.config.list_topic.length;t<n;t++)e.push({strWord:this.config.list_topic[t],strAudioPath:"res/audios/"+this.config.list_audios[t],strSpritePath:this.spIcon[t]});return e},t.prototype.SetLevelData=function(e){if(!(e>=this.config.num_maxLevel)){this.num_currClick=-1;for(var t=0;t<this.list_item.length;t++){var n=this.list_item[t].getComponent(_.default),o=this.spIcon[this.list_select[e][t]];n.bool_isCanClick=!0,n.ShowIcon(o),n.SetIconState(!1),n.SetPlaceNodeMask(!1)}}},t.prototype.SetLevel=function(e){var t=this;if(this.num_waitTime=5,e>=this.config.num_maxLevel)this.compAnimation.PlayHopper(m.HopperSpineName.gaoxing,!0),this.PlayAudioEffect("huanhu"),this.scheduleOnce(function(){t.gameEnd(t.num_sumStar)},1);else{var n=this.GetShowItem();this.PlayAudioEffect("SE_qiangyiqiang_01"),n.map(function(e){e.PlayShowHuaPing(!0),e.SetShowIconState(!0)}),this.compAnimation.WaitTimeTime(.3).then(function(){return n.map(function(e){e.SetIconState(!0)}),t.compAnimation.MoveTo(t.compVideoTools.node,cc.v2(0,158),cc.v2(0,-82))}).then(function(){return t.compAnimation.WaitTimeTime(.5)}).then(function(){return t.compVideoTools.playVoiceAni(),t.playAudio()}).then(function(){return t.compVideoTools.stopVoiceAni(),t.TipAnim()}).then(function(){return 0==e?(t.PlayAudioEffect("Start Liz_01_08"),t.compAnimation.PlayStar()):null}).then(function(){return t.nodeDownTime.getComponent(cc.Sprite).fillRange=1,t.compAnimation.MoveTo(t.nodeClock,cc.v2(445.453,158),cc.v2(445.453,-82))}).then(function(){t.StarDownTime(!0),t.SetMask(!1),t.bool_isStart=!0})}},t.prototype.OnClick=function(e){var t=this;if(this.num_waitTime=5,this.bool_isStart=!1,!(this.num_downTime<2)&&(this.SetMask(!0),e!=this.num_currClick)){this.num_currClick>e?this.nodeHopper.scaleX=-1:this.nodeHopper.scaleX=1;var n=this.nodeWuTai.children;-1!==this.num_currClick&&n[this.num_currClick].getComponent(_.default).SetSelect(!1);var o=n[e].getComponent(_.default),i=o.nodePlace,a=o.GetHeight();o.SetSelect(!0);var r=this.nodeAnimParent.convertToNodeSpaceAR(this.nodeHopper.convertToWorldSpaceAR(cc.Vec2.ZERO));this.nodeHopper.setParent(this.nodeAnimParent),this.nodeHopper.setPosition(r);var c=cc.v2(0,a);this.nodeOccupyTheSpot.setParent(i),this.nodeOccupyTheSpot.setPosition(c),this.updateSHowItemAIPos();var p=this.nodeAnimParent.convertToNodeSpaceAR(i.convertToWorldSpaceAR(c));this.PlayAudioEffect("SE_qiangyiqiang_04"),this.compAnimation.PlayHopper(m.HopperSpineName.qitiao).then(function(){t.nodeHopper.scale=1,t.compAnimation.PlayHopper(m.HopperSpineName.daiji,!0)}),this.num_currClick=e,this.scheduleOnce(function(){t.compAnimation.Move(t.nodeHopper,p,.3).then(function(){var e=t.nodeOccupyTheSpot.getSiblingIndex();t.nodeHopper.setParent(i),t.nodeHopper.setPosition(c),t.nodeHopper.setSiblingIndex(e),t.nodeOccupyTheSpot.setParent(t.nodeAnimParent),t.scheduleOnce(function(){0!=t.num_errorCount?t.CountdownFinish():(t.bool_isStart=!0,t.SetMask(!1))},.2)})},.1)}},t.prototype.Right=function(){var e=this;return new Promise(function(t){e.PlayAudioSound("game_right");var n=[],o=[],i=e.nodeWuTai.children[e.list_right[e.num_level]].getComponent(_.default);i.SetPlaceNodeMask(!0);var a=i.nodeShowItem;e.compAnimation.PlayRight(a.convertToWorldSpaceAR(cc.Vec2.ZERO),null);for(var r=0;r<e.list_item.length;r++){var c=e.list_item[r].getComponent(_.default);c.bool_isCanClick&&(c.num_index!=e.list_right[e.num_level]?o.push.apply(o,c.nodePlace.children):n.push.apply(n,c.nodePlace.children))}var l=p(n,o),s=function(t){if("hopper"!=n[t].name){var o=n[t].children[0].getComponent(sp.Skeleton);e.compAnimation.PlaySpine(o,m.aiSpineName.gaoxing,!1).then(function(){e.compAnimation.PlaySpine(o,m.aiSpineName.daiji,!0)})}else e.compAnimation.PlayHopper(m.HopperSpineName.gaoxing,!1).then(function(){e.compAnimation.PlayHopper(m.HopperSpineName.daiji,!0)})};for(r=0;r<n.length;r++)s(r);e.compAnimation.MoveTo(e.compVideoTools.node,cc.v2(0,-82),cc.v2(0,158)),cc.tween(e.node).delay(1).call(function(){for(var t=0;t<e.list_item.length;t++){var n=e.list_item[t].getComponent(_.default);n.num_index!=e.list_right[e.num_level]&&(n.SetPlaceNodeMask(!0),n.bool_isCanClick&&e.compAnimation.PlaySpine(n.skHuaWuTai,m.wuTaiSpineName.kai))}}).delay(.2).call(function(){for(var t=0;t<o.length;t++)e.compAnimation.Move(o[t],cc.v2(0,o[t].y-1e3))}).delay(1).call(function(){e.compWord.showWordAni(e.list_topic[e.num_level]),e.playAudio()}).call(function(){e.showCoin()}).delay(1).call(function(){var t=e.nodeAnimParent.convertToNodeSpaceAR(e.nodeHopper.convertToWorldSpaceAR(cc.Vec2.ZERO));e.nodeHopper.setParent(e.nodeAnimParent),e.nodeHopper.setPosition(t),e.nodeHopper.scaleX=-1,e.PlayAudioEffect("SE_qiangyiqiang_04"),e.compAnimation.PlayHopper(m.HopperSpineName.qitiao).then(function(){e.nodeHopper.scale=1,e.compAnimation.PlayHopper(m.HopperSpineName.daiji,!0)}),e.scheduleOnce(function(){var t=n.filter(function(e){if("hopper"!=e.name)return e});if(e.num_level+1<=e.config.num_maxLevel){var o=e.list_aiIndex[e.num_level+1].reduce(function(e,t){return e+t});e.randomAIPos(o,t)}e.compAnimation.Move(e.nodeHopper,e.config.v2_happerPos,.3)},.1)}).delay(2).call(function(){for(var n=0;n<l.length;n++){var o=l[n];"hopper"!=l[n].name&&o.destroy()}for(n=0;n<e.list_item.length;n++)(o=e.list_item[n].getComponent(_.default)).num_index!=e.list_right[e.num_level]&&(o.SetPlaceNodeMask(!0),e.compAnimation.PlaySpine(o.skHuaWuTai,m.wuTaiSpineName.guang));t(null)}).start()})},t.prototype.Error=function(e){var t=this;return new Promise(function(n){t.PlayAudioSound("game_error");var o=t.nodeWuTai.children[e].getComponent(_.default);o.SetPlaceNodeMask(!0);var i=o.nodeShowItem;t.compAnimation.PlayError(i.convertToWorldSpaceAR(cc.Vec2.ZERO)).then(function(){return t.compAnimation.PlaySpine(o.skHuaWuTai,m.wuTaiSpineName.kai),t.compAnimation.WaitTimeTime(.5)}).then(function(){for(var e=o.nodePlace.children,n=function(n){if("hopper"!=e[n].name){var o=e[n].children[0].getComponent(sp.Skeleton);t.compAnimation.PlaySpine(o,m.aiSpineName.jingya,!1).then(function(){t.compAnimation.PlaySpine(o,m.aiSpineName.daiji,!0)}),t.scheduleOnce(function(){t.compAnimation.Move(e[n],cc.v2(0,e[n].y-1e3))},1.2)}else{var i=0==t.num_currClick?m.HopperSpineName.renwudiaoluo_1:m.HopperSpineName.renwudiaoluo_2;t.scheduleOnce(function(){t.PlayAudioEffect("diaoluo")},0==t.num_currClick?.8:1.2),t.compAnimation.PlayHopper(i,!1).then(function(){})}},i=0;i<e.length;i++)n(i);return t.compAnimation.WaitTimeTime(2.5)}).then(function(){return o.SetShowIconState(!1),t.TipAnim(),t.nodeHopper.setParent(t.nodeAnimParent),t.nodeHopper.setPosition(t.config.v2_happerPos),t.PlayAudioEffect("SE_qiangyiqiang_06"),t.compAnimation.PlayHopper(m.HopperSpineName.ganga,!1)}).then(function(){o.SetPlaceNodeMask(!1),t.num_currClick=-1,o.nodePlace.destroyAllChildren(),t.compAnimation.PlayHopper(m.HopperSpineName.daiji,!0),n(null)})})},t.prototype.NoClick=function(){var e=this;return new Promise(function(t){e.PlayAudioEffect("SE_qiangyiqiang_06"),e.compAnimation.PlayHopper(m.HopperSpineName.yihan,!1).then(function(){return e.compAnimation.PlayHopper(m.HopperSpineName.daiji,!0),e.TipAnim(),e.playAudio()}).then(function(){t(null)})})},t.prototype.SetMask=function(e){e?this.nodeMask.setPosition(cc.Vec2.ZERO):this.nodeMask.setPosition(cc.v2(9999,9999))},t.prototype.gameEnd=function(t){e.prototype.gameEnd.call(this,t),u.ListenerManager.dispatch("GameEnd")},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.CountdownFinish=function(){var e=this;this.SetMask(!0),this.num_waitTime=5,this.bool_isStart=!1,-1!=this.num_currClick&&this.nodeWuTai.children[this.num_currClick].getComponent(_.default).SetSelect(!1);var t=function(){-1==e.num_currClick?e.NoClick().then(function(){e.num_errorCount+=1,e.num_downTime=10,e.SetMask(!1),e.bool_isStart=!0}):e.num_currClick==e.list_right[e.num_level]?e.Right().then(function(){e.num_level+=1,e.SetLevelData(e.num_level),e.SetLevel(e.num_level)}):e.Error(e.num_currClick).then(function(){e.num_errorCount+=1,e.SetMask(!1),e.num_downTime=10,e.bool_isStart=!0})};0==this.num_errorCount?this.compAnimation.PlayClick().then(function(){return e.compAnimation.MoveTo(e.nodeClock,cc.v2(445.453,-82),cc.v2(445.453,158))}).then(function(){t()}):t()},t.prototype.Countdown=function(){this.num_downTime-=1,5==this.num_downTime&&this.JumpToTarget(),4==this.num_downTime&&this.PlayAudioEffect("SE_qiangyiqiang_03")},t.prototype.StarDownTime=function(e){var t=this;this.num_downTime=10,e?(this.schedule(this.Countdown,1,9,1),this.compAnimation.PlayDownTime(this.nodeDownTime.getComponent(cc.Sprite)).then(function(){t.CountdownFinish()})):this.unschedule(this.Countdown)},t.prototype.InitArr=function(e){for(var t=this.list_aiIndex[e],n=[],o=function(e){var o=t[e];n.push.apply(n,Array.apply(null,Array(o)).map(function(){return e}))},i=0;i<t.length;i++)o(i);return this.Shuffle(n),n},t.prototype.Shuffle=function(e){for(var t,n=e.length;--n;){var o=Math.floor(Math.random()*n);t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}},t.prototype.JumpToTarget=function(){for(var e=this,t=this.InitArr(this.num_level),n=this.nodeAIParent.children,o=this.nodeWuTai.children,i=0;i<o.length;i++)o[i].getComponent(_.default).SetPlaceNodeMask(!1);var a=function(i){r.scheduleOnce(function(){var a=t[i],r=o[a].getComponent(_.default),c=r.nodePlace,p=n[i],l=r.GetHeight(),s=cc.v2(0,l),u=cc.instantiate(p);u.setParent(c),u.setPosition(s),u.active=!1;var d=e.nodeAIParent.convertToNodeSpaceAR(c.convertToWorldSpaceAR(s)),h=p.children[0].getComponent(sp.Skeleton);e.PlayAudioEffect("SE_qiangyiqiang_05"),e.compAnimation.PlaySpine(h,m.aiSpineName.tiao,!1).then(function(){e.compAnimation.PlaySpine(h,m.aiSpineName.daiji,!0)}),e.scheduleOnce(function(){e.compAnimation.Move(p,d).then(function(){p.active=!1,u.active=!0})},.2)},4/t.length*i)},r=this;for(i=t.length-1;i>=0;i--)a(i)},t.prototype.updateSHowItemAIPos=function(){for(var e=this.nodeWuTai.children,t=0;t<e.length;t++)e[t].getComponent(_.default).updatePos()},t.prototype.showCoin=function(){var e;e=0==this.num_errorCount?3:2,this.num_sumStar+=e,d.default.callAppToTigoStar(e),this.num_errorCount=0},t.prototype.TipAnim=function(){var e=this;new Promise(function(t){for(var n=[],o=0;o<e.list_item.length;o++){var i=e.list_item[o];i.getComponent(_.default).bool_isCanClick&&n.push(i.getComponent(_.default).nodeShowItem)}e.compAnimation.PlayTip(n).then(function(){return n.filter(function(e){e.scale=1}),t(null)})})},t.prototype.GetShowItem=function(){for(var e=[],t=0;t<this.list_item.length;t++){var n=this.list_item[t].getComponent(_.default);e.push(n)}return e},t.prototype.playAudio=function(){var e=this;return new Promise(function(t){s.default.playAudioSound(e.bundleName,"res/audios/"+e.list_audios[e.num_level],function(){t(null)})})},t.prototype.OnClickPlayAudio=function(){var e=this;this.compVideoTools.playVoiceAni(),this.playAudio().then(function(){e.compVideoTools.stopVoiceAni()})},t.prototype.PlayAudioSound=function(e){var t=this;return new Promise(function(n){s.default.playAudioSound(t.bundleName,"res/audios/"+e,function(){n(null)})})},t.prototype.PlayAudioEffect=function(e){var t=this;return new Promise(function(n){s.default.playEffect(t.bundleName,"res/audios/"+e,function(){n(null)})})},t.prototype.randomAIPos=function(e,t){void 0===t&&(t=null);var n=this.nodeAIParent.children;n.filter(function(t,n){n<e?(t.setPosition(1100,-500),t.active=!0):(t.setPosition(1100,-500),t.active=!1)});var o=Array.from(Array(6).keys());this.Shuffle(o);for(var i=0;i<t.length;i++){var a=this.nodeAIParent.getParent().convertToNodeSpaceAR(t[i].convertToWorldSpaceAR(cc.Vec2.ZERO));t[i].setParent(this.nodeAIParent),t[i].setPosition(a);var r=this.config.list_aiPos[o[i]];n[i].setPosition(r),n[i].active=!1,this.compAnimation.Move(t[i],r)}this.scheduleOnce(function(){for(var o=0;o<e;o++)n[o].active=!0;t.map(function(e){e.active=!1})},.6)},t.prototype.FiveWaitTip=function(){var e=this;this.bool_isStart&&(this.num_waitTime-=1,this.num_waitTime<=0&&(this.bool_isStart=!1,this.PlayAudioEffect("SE_qiangyiqiang_02"),this.scheduleOnce(function(){e.playAudio()},.2),this.TipAnim(),this.scheduleOnce(function(){e.num_waitTime=6,e.bool_isStart=!0},.3)))},a([g({type:cc.Node,displayName:"top"})],t.prototype,"nodeTop",void 0),a([g({type:cc.Node,displayName:"\u906e\u7f69"})],t.prototype,"nodeMask",void 0),a([g({type:cc.Node,displayName:"\u821e\u53f0"})],t.prototype,"nodeWuTai",void 0),a([g({type:cc.Node,displayName:"\u95f9\u949f"})],t.prototype,"nodeClock",void 0),a([g({type:cc.Node,displayName:"hopper"})],t.prototype,"nodeHopper",void 0),a([g({type:cc.Node,displayName:"\u5012\u8ba1\u65f6"})],t.prototype,"nodeDownTime",void 0),a([g({type:cc.Node,displayName:"AIParent"})],t.prototype,"nodeAIParent",void 0),a([g({type:cc.Node,displayName:"\u5360\u70b9"})],t.prototype,"nodeOccupyTheSpot",void 0),a([g({type:cc.Node,displayName:"\u52a8\u753b\u7236\u8282\u70b9"})],t.prototype,"nodeAnimParent",void 0),a([g({type:[cc.SpriteFrame],displayName:"icon"})],t.prototype,"spIcon",void 0),a([g({type:h.default,displayName:"\u5c55\u793a\u5355\u8bcd\u5361"})],t.prototype,"compShowcaseIcon",void 0),a([g({type:cc.AudioSource,displayName:"\u80cc\u666f\u97f3\u4e50"})],t.prototype,"audioBgMusic",void 0),a([g({type:m.default,displayName:""})],t.prototype,"compAnimation",void 0),a([g],t.prototype,"configName",void 0),a([v],t)}(l.default);n.default=S,cc._RF.pop()},{"../../../module/component/scripts/GameCompBase":void 0,"../../../module/kit/TigoManager":void 0,"../../../module/kit/audio/AudioManager":void 0,"../../../module/kit/event/ListenerManager":void 0,"../res/image/ShowcaseIcon":"ShowcaseIcon","./L2_W6_D2_Game2Anim":"L2_W6_D2_Game2Anim","./L2_W6_D2_Game2BaseConfig":"L2_W6_D2_Game2BaseConfig","./ShowItem":"ShowItem"}],ShowItem:[function(e,t,n){"use strict";cc._RF.push(t,"b531aPAYzNFX4tAMEa093NE","ShowItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../module/component/scripts/AnimationEx"),c=e("../../../module/kit/event/ListenerManager"),p=e("./L2_W6_D2_Game2BaseConfig"),l=cc._decorator,s=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeShowItem=null,t.nodePlace=null,t.sp_icon=null,t.nodeWenHao=null,t.material_nor=null,t.material_gray=null,t.skHuaPing=null,t.skHuaWuTai=null,t.nodeSelect=null,t.bool_isCanClick=!0,t.num_index=0,t}return i(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.OnClick,this),this.nodeSelect.active=!1},t.prototype.OnClick=function(){this.bool_isCanClick&&c.ListenerManager.dispatch(p.L2_W6_D2_GameEvent.click,this.num_index)},t.prototype.Init=function(e){this.num_index=e},t.prototype.SetClickState=function(e){this.bool_isCanClick=e},t.prototype.ShowIcon=function(e){void 0===e&&(e=null),this.sp_icon.spriteFrame=e,this.nodeWenHao.active=null==e},t.prototype.SetIconState=function(e){this.sp_icon.node.active=e},t.prototype.GetHeight=function(){for(var e=this.nodePlace.children,t=0,n=0;n<e.length;n++)t+=e[n].height;return t+10},t.prototype.GetNodeIndex=function(e){for(var t=this.nodePlace.children,n=0;n<t.length;n++)if(t[n]===e)return n},t.prototype.PlayShowHuaPing=function(e){this.skHuaPing.node.getParent().active=e,r.AnimationEx.playSpine(this.skHuaPing,"changjing_huaping",!1)},t.prototype.PlayWuTai=function(e){var t=e?"wutai_guang":"wutai_kai";return r.AnimationEx.playSpine(this.skHuaWuTai,t,!1)},t.prototype.SetShowIconState=function(e){this.bool_isCanClick=e,e?(this.nodeShowItem.getComponent(cc.Sprite).setMaterial(0,this.material_nor),this.sp_icon.setMaterial(0,this.material_nor)):(this.nodeShowItem.getComponent(cc.Sprite).setMaterial(0,this.material_gray),this.sp_icon.setMaterial(0,this.material_gray))},t.prototype.SetPlaceNodeMask=function(e){this.nodePlace.getComponent(cc.Mask).enabled=e},t.prototype.updatePos=function(){for(var e=10,t=0;t<this.nodePlace.children.length;t++){var n=this.nodePlace.children[t];r.AnimationEx.MoveAnimation(n,n.getPosition(),cc.v2(0,e),.2),e+=n.height}},t.prototype.SetSelect=function(e){this.nodeSelect.active=e},a([u({type:cc.Node,displayName:"\u663e\u793a\u5668"})],t.prototype,"nodeShowItem",void 0),a([u({type:cc.Node,displayName:"\u653e\u7f6e\u7684\u8282\u70b9"})],t.prototype,"nodePlace",void 0),a([u({type:cc.Sprite,displayName:"\u663e\u793aicon"})],t.prototype,"sp_icon",void 0),a([u({type:cc.Node,displayName:"\u95ee\u53f7"})],t.prototype,"nodeWenHao",void 0),a([u({type:cc.Material,displayName:"\u6b63\u5e38"})],t.prototype,"material_nor",void 0),a([u({type:cc.Material,displayName:"\u7070\u8272"})],t.prototype,"material_gray",void 0),a([u({type:sp.Skeleton,displayName:"\u82b1\u5c4f"})],t.prototype,"skHuaPing",void 0),a([u({type:sp.Skeleton,displayName:"\u821e\u53f0"})],t.prototype,"skHuaWuTai",void 0),a([u({type:cc.Node,displayName:"\u9009\u62e9"})],t.prototype,"nodeSelect",void 0),a([s],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../module/component/scripts/AnimationEx":void 0,"../../../module/kit/event/ListenerManager":void 0,"./L2_W6_D2_Game2BaseConfig":"L2_W6_D2_Game2BaseConfig"}],ShowcaseIcon:[function(e,t,n){"use strict";cc._RF.push(t,"26b32oSVkZAsI7R/LnHt0pp","ShowcaseIcon");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{p(o.next(e))}catch(t){a(t)}}function c(e){try{p(o.throw(e))}catch(t){a(t)}}function p(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}p((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return p([e,t])}}function p(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var p=e("../../../../module/kit/assets/AssetsManger"),l=e("../../../../module/kit/audio/AudioManager"),s=cc._decorator,u=s.ccclass,d=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelWord=null,t.nodeWordCard=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.InitData=function(e,t){return r(this,void 0,void 0,function(){var n,o,i,a,r,l;return c(this,function(c){switch(c.label){case 0:if(n=[],"string"!=typeof e[0].strSpritePath)return[3,5];o=[],e.forEach(function(e){o.push(e.strSpritePath)}),r=0,c.label=1;case 1:return r<o.length?[4,p.default.instance.loadImg(o[r],t)]:[3,4];case 2:i=c.sent(),n.push(i),c.label=3;case 3:return r++,[3,1];case 4:return[3,6];case 5:e.forEach(function(e){n.push(e.strSpritePath)}),c.label=6;case 6:for(a=this.nodeWordCard.children,r=0,l=a.length;r<l;r++)n.length>r?a[r].children[0].getComponent(cc.Sprite).spriteFrame=n[r]:a[r].active=!1;r=0,l=a.length,c.label=7;case 7:return r<l?e.length>r?[4,this.showWordCard(t,e[r],a[r])]:[3,9]:[3,10];case 8:c.sent(),c.label=9;case 9:return r++,[3,7];case 10:return[2]}})})},t.prototype.showWordCard=function(e,t,n){var o=this;return new Promise(function(i){o.labelWord.string=t.strWord,cc.tween(n).to(.5,{scale:1.5},{easing:cc.easing.elasticOut}).start(),l.default.playAudioSound(e,t.strAudioPath,function(){n.stopAllActions(),cc.tween(n).to(.5,{scale:1},{easing:cc.easing.bounceOut}).call(function(){i(null)}).start()})})},a([d({type:cc.Label,displayName:"\u5355\u8bcd\u663e\u793a"})],t.prototype,"labelWord",void 0),a([d({type:cc.Node,displayName:"\u5355\u8bcd\u5361"})],t.prototype,"nodeWordCard",void 0),a([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../../module/kit/assets/AssetsManger":void 0,"../../../../module/kit/audio/AudioManager":void 0}]},{},["ShowcaseIcon","L2_W6_D2_Game2Anim","L2_W6_D2_Game2BaseConfig","L2_W6_D2_GameBase","ShowItem"]);