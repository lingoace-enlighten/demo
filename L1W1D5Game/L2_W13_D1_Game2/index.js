window.__require=function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({ForestRace:[function(t,e,n){"use strict";cc._RF.push(e,"47e9apUISxOLqONRRDWSENg","ForestRace");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../../module/component/scripts/GameCompBase"),u=t("../../../module/kit/audio/AudioManager"),l=t("../../../module/kit/TigoManager"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tigoAni=null,e.killianAni=null,e.antAni=null,e.startAni=null,e.startLine=null,e.endNode=null,e.endNode2=null,e.boardNode=null,e.raceWordItem=null,e.block=null,e.wordLab=null,e.vocieNode=null,e.showNode=[],e.cur_index=0,e.sounds_arr=["dentist","driver","nurse"],e.handCallback=null,e.killianCallback=null,e.wrongNum=0,e.answer_arr=[0,2,1],e.killianForwardTag=!1,e}return i(e,t),e.prototype.onGameStart=function(){var t=this;u.default.playMusic(this.bundleName,"res/audios/bgm"),this.showTipAni(),this.scheduleOnce(function(){return t.startGame()},8)},e.prototype.startGame=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(e){switch(e.label){case 0:return this.startAni.node.active=!0,[4,this.playSpine(this.startAni,"start",!1)];case 1:return e.sent(),this.startAni.node.destroy(),u.default.playLoopEffect(this.bundleName,"res/audios/run"),this.isStartRoll(!0),this.playKilliainAin(1,!0),this.playTigoAin(1,!0),[4,this.moveStartLine(1.1)];case 2:return e.sent(),u.default.playEffect(this.bundleName,"res/audios/listen_and_choose",function(){t.startRound()}),[2]}})})},e.prototype.killianForwardSchedule=function(){var t=this;this.scheduleOnce(this.killianCallback=function(){t.killianForward()},6)},e.prototype.tigoForward=function(t,e){var n=this;void 0===t&&(t=1),void 0===e&&(e=!1),u.default.playEffect(this.bundleName,"res/audios/speedup"),this.playTigoAin(2,!0);var o=this.tigoAni.node.x+200;return e&&(o=this.node.width-300),new Promise(function(e){cc.tween(n.tigoAni.node).to(t,{x:o}).call(function(){n.playTigoAin(1,!0),e()}).start()})},e.prototype.killianForward=function(t,e){var n=this;void 0===t&&(t=1),void 0===e&&(e=!1),u.default.playEffect(this.bundleName,"res/audios/speedup"),this.killianForwardTag=!0,this.playKilliainAin(2,!0);var o=this.killianAni.node.x+200;return e&&(o=this.node.width-300),new Promise(function(e){cc.tween(n.killianAni.node).to(t,{x:o}).call(function(){n.playKilliainAin(1,!0),e()}).start()})},e.prototype.onItemClicked=function(t,e){return a(this,void 0,void 0,function(){var t=this;return s(this,function(n){switch(n.label){case 0:return this.unschedule(this.killianCallback),this.unschedule(this.handCallback),e?(this.setBlock(!0),this.showCoin(),this.showWord(this.cur_index),u.default.playEffect(this.bundleName,"res/audios/upmove"),cc.tween(this.boardNode).delay(1.5).to(.5,{y:-600}).call(function(){}).start(),this.cur_index<this.answer_arr.length-1?[4,this.tigoForward()]:[3,2]):[3,5];case 1:return n.sent(),this.killianForwardTag||this.killianForward(),[3,4];case 2:return this.cueDestination(),this.scheduleOnce(function(){return t.playSpine(t.antAni,"juqi",!0)},2),[4,this.tigoForward(2,!0)];case 3:n.sent(),u.default.stopLoopEffect(this.bundleName,"res/audios/run"),u.default.playEffect(this.bundleName,"res/audios/end"),this.playTigoAin(3,!0),n.label=4;case 4:return this.scheduleOnce(function(){return t.nextRound()},2),[3,6];case 5:this.killianForwardTag||this.killianForward(),this.wrongNum++,n.label=6;case 6:return[2]}})})},e.prototype.cueDestination=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,this.moveEndNode(1.5)];case 1:return e.sent(),this.isStartRoll(!1),t=1.5,this.killianForwardTag&&(t=1),[4,this.killianForward(t,!0)];case 2:return e.sent(),[4,this.playKilliainAin(3)];case 3:return e.sent(),this.playKilliainAin(4,!0),[2]}})})},e.prototype.nextRound=function(){if(this.cur_index++,this.killianForwardTag=!1,this.cur_index>=this.answer_arr.length)return cc.log("all round end"),void this.endAni();this.startRound()},e.prototype.startRound=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.assembleItem(3)];case 1:return t.sent(),[4,this.showWord(this.cur_index)];case 2:return t.sent(),this.setBlock(!1),[2]}})})},e.prototype.endAni=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return this.scheduleOnce(function(){return t.onGameEnd()},1.5),[2]})})},e.prototype.assembleItem=function(t){var e=this;this.boardNode.removeAllChildren();for(var n=0;n<t;n++){var o=cc.instantiate(this.raceWordItem),i=o.getComponent("raceWordItem"),r=n==this.answer_arr[this.cur_index];i.initItem(n,r,this.cur_index,this),this.boardNode.addChild(o)}return new Promise(function(t){u.default.playEffect(e.bundleName,"res/audios/upmove"),cc.tween(e.boardNode).to(1,{y:-200}).call(function(){t()}).start()})},e.prototype.showWord=function(t,e){var n=this;return void 0===e&&(e=!0),new Promise(function(o){n.wordLab.string=n.sounds_arr[t],u.default.playAudioSound(n.bundleName,"res/audios/"+n.sounds_arr[t],function(){e?n.scheduleOnce(function(){n.wordLab.string="",o()},1):o()})})},e.prototype.moveEndNode=function(t){var e=this;return new Promise(function(n){cc.tween(e.endNode).by(t,{x:-750}).call(function(){n()}).start().clone(e.endNode2).start()})},e.prototype.moveStartLine=function(t){var e=this;return new Promise(function(n){cc.tween(e.startLine).by(t,{x:-600}).call(function(){e.startLine.destroy(),n()}).start()})},e.prototype.playTigoAin=function(t,e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:switch(n="",t){case 0:n="tigo_xie_daiji";break;case 1:n="tigo_xie_pao";break;case 2:n="tigo_xie_jiasupao1";break;case 3:n="tigo_xie_huanhu"}return[4,this.playSpine(this.tigoAni,n,e)];case 1:return o.sent(),[2]}})})},e.prototype.playKilliainAin=function(t,e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:switch(n="",t){case 0:n="daiji";break;case 1:n="paodong";break;case 2:n="jiasu";break;case 3:n="jvsang";break;case 4:n="kuqi"}return[4,this.playSpine(this.killianAni,n,e)];case 1:return o.sent(),[2]}})})},e.prototype.isStartRoll=function(t){this.node.getChildByName("houceng").getComponent("rollBg").isRunmap=t,this.node.getChildByName("zhonceng").getComponent("rollBg").isRunmap=t,this.node.getChildByName("qiangceng").getComponent("rollBg").isRunmap=t},e.prototype.playVoiceAni=function(){var t=this;this.vocieNode&&(this.vocieNode.getComponent("VoiceTools").playVoiceAni(),u.default.playAudioSound(this.bundleName,"res/audios/"+this.sounds_arr[this.cur_index]),this.scheduleOnce(function(){t.vocieNode.getComponent("VoiceTools").stopVoiceAni()},1))},e.prototype.itemtipAni=function(){var t=this;return u.default.playAudioSound(this.bundleName,"res/audios/"+this.sounds_arr[this.cur_index]),new Promise(function(e){cc.tween(t.boardNode).to(.2,{scale:1.2}).to(.2,{scale:1}).union().repeat(2).call(function(){e()}).start()})},e.prototype.showTipAni=function(){var t=this;this.node.getChildByName("show").active=!0;var e=0;this.schedule(function(){t.showWord(e,!1),cc.tween(t.showNode[e]).by(.5,{scale:.2}).by(.5,{scale:-.2}).delay(.25).call(function(){3==++e&&t.scheduleOnce(function(){t.wordLab.string="",t.node.getChildByName("show").destroy()},1.5)}).start()},1.5,2)},e.prototype.setBlock=function(t){var e=this;t?this.block.y=0:(this.block.y=1500,this.killianForwardSchedule(),0==this.cur_index&&this.itemtipAni(),this.schedule(this.handCallback=function(){e.itemtipAni()},6.5)),this.vocieNode.active=!t},e.prototype.showCoin=function(){var t=3-this.wrongNum;t<3&&(t=2),l.default.callAppToTigoStar(t),this.wrongNum=0},e.prototype.playSpine=function(t,e,n){t.clearTracks(),t.setToSetupPose();var o=t.setAnimation(0,e,n);if(!n)return new Promise(function(e){t.setTrackCompleteListener(o,function(){e()})})},e.prototype.onGameEnd=function(){u.default.stopMusic(),this.gameEnd(0)},r([p(sp.Skeleton)],e.prototype,"tigoAni",void 0),r([p(sp.Skeleton)],e.prototype,"killianAni",void 0),r([p(sp.Skeleton)],e.prototype,"antAni",void 0),r([p(sp.Skeleton)],e.prototype,"startAni",void 0),r([p(cc.Node)],e.prototype,"startLine",void 0),r([p(cc.Node)],e.prototype,"endNode",void 0),r([p(cc.Node)],e.prototype,"endNode2",void 0),r([p(cc.Node)],e.prototype,"boardNode",void 0),r([p(cc.Prefab)],e.prototype,"raceWordItem",void 0),r([p(cc.Node)],e.prototype,"block",void 0),r([p(cc.Label)],e.prototype,"wordLab",void 0),r([p(cc.Node)],e.prototype,"vocieNode",void 0),r([p(cc.Node)],e.prototype,"showNode",void 0),r([h],e)}(c.default);n.default=f,cc._RF.pop()},{"../../../module/component/scripts/GameCompBase":void 0,"../../../module/kit/TigoManager":void 0,"../../../module/kit/audio/AudioManager":void 0}],raceWordItem:[function(t,e,n){"use strict";cc._RF.push(e,"805d3E2+QhM4bnIhuhLfrzp","raceWordItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../../module/kit/assets/AssetsManger"),u=t("../../../module/kit/audio/AudioManager"),l=t("../../../scripts/GameData"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemSp=null,e.button=null,e.feedbackNode=null,e.mainCom=null,e.ansTag=!1,e.mid=0,e.mround=0,e.nameArr=[["dentist","driver","nurse"],["nurse","dentist","driver"],["driver","nurse","dentist"]],e}return i(e,t),e.prototype.initItem=function(t,e,n,o){this.mid=t,this.ansTag=e,this.mround=n,this.mainCom=o},e.prototype.start=function(){this.setSpFun()},e.prototype.setSpFun=function(){return a(this,void 0,void 0,function(){var t,e,n;return s(this,function(o){switch(o.label){case 0:return t=this.nameArr[this.mround][this.mid],e="res/images/item/"+t,n=this.itemSp,[4,c.default.instance.loadImg(e,l.default.curBundleName)];case 1:return n.spriteFrame=o.sent(),[2]}})})},e.prototype.onClicked=function(){this.mainCom.onItemClicked(this.mid,this.ansTag),this.ansTag?(this.button.interactable=!1,u.default.playEffect("commonRes","audio/game_right"),this.feedbackNode.getComponent("feedBackCtr").showRightAnimation(cc.v3(0,0,0))):(u.default.playEffect("commonRes","audio/game_error"),this.feedbackNode.getComponent("feedBackCtr").showErrorAnimation(cc.v3(0,0,0)))},r([p(cc.Sprite)],e.prototype,"itemSp",void 0),r([p(cc.Button)],e.prototype,"button",void 0),r([p(cc.Node)],e.prototype,"feedbackNode",void 0),r([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../module/kit/assets/AssetsManger":void 0,"../../../module/kit/audio/AudioManager":void 0,"../../../scripts/GameData":void 0}]},{},["ForestRace","raceWordItem"]);