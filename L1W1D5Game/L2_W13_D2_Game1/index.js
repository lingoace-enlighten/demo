window.__require=function t(e,o,r){function n(i,d){if(!o[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var s="function"==typeof __require&&__require;if(!d&&s)return s(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return n(e[i][1][t]||t)},u,u.exports,t,e,o,r)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<r.length;i++)n(r[i]);return n}({L2_W13_D2_Game1:[function(t,e,o){"use strict";cc._RF.push(e,"b0df4F46ZhF4oDelstBkH5r","L2_W13_D2_Game1");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,r){var n,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var d=t.length-1;d>=0;d--)(n=t[d])&&(i=(a<3?n(i):a>3?n(e,o,i):n(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../module/component/scripts/GameCompBase"),d=t("../../../module/kit/audio/AudioManager"),c=t("../../../module/kit/event/ListenerManager"),s=cc._decorator,u=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.gameCards=[],e.star=null,e.gameStartAni=null,e.gameEndAin=null,e.gameTitle=null,e.gameEndSound=null,e.wordCard=null,e.tipHand=null,e.gameEndNode=null,e.gameSounds=[],e.wordSounds=[],e.appCalled=!1,e.touchCardArr=[],e.wordTxt=["chef","waiter","police officer"],e.endWordTxt=[0,1,2],e.randomPosTop=[],e.randomPosBottom=[],e.isTopAndDown=!0,e}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),c.ListenerManager.on("CardTouched",this.CardTouched.bind(this),this),c.ListenerManager.on("CardTurnOver",this.CardTurnOver.bind(this),this),cc.director.getPhysicsManager().enabled=!0,this.gameStartAni.setCompleteListener(this.gameStart.bind(this)),this.mask.zIndex=100,this.wordCard.zIndex=999},e.prototype.start=function(){t.prototype.start.call(this),this.getRandomPos(),this.setRandomPos()},e.prototype.getRandomPos=function(){var t=this;this.randomPosTop=[],this.randomPosBottom=[],this.gameCards.forEach(function(e,o){o<=2?t.randomPosTop.push(e.getPosition()):t.randomPosBottom.push(e.getPosition())})},e.prototype.setRandomPos=function(){var t=this;this.isTopAndDown&&this.gameCards.forEach(function(e,o){if(o<=2){var r=Math.floor(Math.random()*t.randomPosTop.length),n=t.randomPosTop.splice(r,1)[0];e.setPosition(n)}else r=Math.floor(Math.random()*t.randomPosBottom.length),n=t.randomPosBottom.splice(r,1)[0],e.setPosition(n)})},e.prototype.onGameStart=function(){var t=this;console.log("onGameStart!!!!!!"),this.appCalled=!0,this.gameCards.forEach(function(t){t.getComponent("card_L2_W12_D4_Game2").turnBack()}),this.scheduleOnce(function(){cc.audioEngine.playMusic(t.gameSounds[3],!0),d.default.playEffectAudioClip(t.gameTitle,function(){t.gameStartAni.timeScale=1,d.default.playEffectAudioClip(t.gameSounds[2]),t.scheduleOnce(function(){t.gameStartAni.node.active=!1,t.gameCards.forEach(function(t){t.opacity=255}),t.scheduleOnce(function(){t.tipHand.active=!0,t.tipHand.getComponent("HandCtr").ClickCycle()},1),t.mask.y=1200},2.5)})},1.5)},e.prototype.gameStart=function(){},e.prototype.showTip=function(){var t=this;this.tipHand.parent=this.node,this.tipHand.active=!1,this.unscheduleAllCallbacks(),this.schedule(function(){if(!t.tipHand.active){t.tipHand.getComponent("HandCtr").ClickCycle(),cc.log("show tip");for(var e=0;e<t.gameCards.length;e++)if(0==t.gameCards[e].getComponent("card_L2_W12_D4_Game2").TurnOver){t.tipHand.active=!0,t.tipHand.parent=t.gameCards[e],t.tipHand.x=0,t.tipHand.y=-50;break}}},6)},e.prototype.checkCradId=function(t){console.log("checkCradId ====> ",this.touchCardArr),-1==this.touchCardArr.indexOf(t)?(this.touchCardArr.push(t),2==this.touchCardArr.length&&(this.gameCards.forEach(function(t){var e=t.getComponent("card_L2_W12_D4_Game2");e.TurnOver&&e.turnBack()}),this.touchCardArr=[])):(this.removeCard(t),this.touchCardArr=[])},e.prototype.removeCard=function(t){var e=this;if(2==this.gameCards.length)return this.addStar(this.gameCards[0]),this.gameCards[0].destroy(),this.addStar(this.gameCards[1]),this.gameCards[1].destroy(),void this.scheduleOnce(this.gameEndShow,1);this.gameCards.forEach(function(o){var r=o.getComponent("card_L2_W12_D4_Game2").cardId;if(t==r){e.addStar(o),o.destroy();var n=e.gameCards.indexOf(o);cc.log("index =====> "+n),e.gameCards.splice(n,1)}}),this.scheduleOnce(function(){e.gameCards.forEach(function(t){var e=t.getComponent("card_L2_W12_D4_Game2");e.TurnOver&&e.turnBack()})}),cc.log("\u6d88\u9664card ====> ",this.gameCards),d.default.playEffectAudioClip(this.gameSounds[1])},e.prototype.addStar=function(t){var e=t.x,o=t.y,r=cc.instantiate(this.star);r.scale=.5,this.node.addChild(r),r.x=e,r.y=o;var n=r.getComponent(sp.Skeleton);n.clearTracks(),n.setCompleteListener(function(){r.destroy()}),n.setAnimation(0,"13_1_zhengfangti xiaoshixiaoguo",!1)},e.prototype.CardTouched=function(t){console.log("CardTouched"),d.default.playEffectAudioClip(this.gameSounds[0]),this.showTip(),this.showWordCard(t),this.mask.y=0},e.prototype.CardTurnOver=function(t){void 0===t&&(t=-1),console.log("CardTurnOver ======> "+t),this.mask.y=1e3,-1!=t&&this.checkCradId(t)},e.prototype.showWordCard=function(t){var e=this.wordCard.getComponent("WordTool");e.initWordTool(20),e.showWordAni(this.wordTxt[t],cc.v2(0,-60),function(){},1.5)},e.prototype.gameEndShow=function(){var t=this;this.unscheduleAllCallbacks(),this.gameEndNode.active=!0;var e=this.gameEndNode.getChildByName("w1"),o=this.gameEndNode.getChildByName("w2"),r=this.gameEndNode.getChildByName("w3");cc.tween(e).delay(1).to(.5,{scale:.6}).call(function(){d.default.playEffectAudioClip(t.wordSounds[0]),t.showWordCard(t.endWordTxt[0])}).delay(1).to(.5,{scale:.5}).start(),cc.tween(o).delay(3.5).to(.5,{scale:.6}).call(function(){d.default.playEffectAudioClip(t.wordSounds[1]),t.showWordCard(t.endWordTxt[1])}).delay(1).to(.5,{scale:.5}).start(),cc.tween(r).delay(6).to(.5,{scale:.6}).call(function(){d.default.playEffectAudioClip(t.wordSounds[2]),t.showWordCard(t.endWordTxt[2])}).delay(1).to(.5,{scale:.5}).delay(1).call(function(){t.gameEnd()}).start()},e.prototype.gameEnd=function(){cc.audioEngine.stopMusic(),t.prototype.gameEnd.call(this)},e.prototype.onDestroy=function(){},a([p(cc.Node)],e.prototype,"mask",void 0),a([p({type:[cc.Node]})],e.prototype,"gameCards",void 0),a([p(cc.Prefab)],e.prototype,"star",void 0),a([p(sp.Skeleton)],e.prototype,"gameStartAni",void 0),a([p(sp.Skeleton)],e.prototype,"gameEndAin",void 0),a([p(cc.AudioClip)],e.prototype,"gameTitle",void 0),a([p(cc.AudioClip)],e.prototype,"gameEndSound",void 0),a([p(cc.Node)],e.prototype,"wordCard",void 0),a([p(cc.Node)],e.prototype,"tipHand",void 0),a([p(cc.Node)],e.prototype,"gameEndNode",void 0),a([p({type:[cc.AudioClip],displayName:"\u97f3\u6548"})],e.prototype,"gameSounds",void 0),a([p({type:[cc.AudioClip],displayName:"\u97f3\u9891"})],e.prototype,"wordSounds",void 0),a([u],e)}(i.default);o.default=l,cc._RF.pop()},{"../../../module/component/scripts/GameCompBase":void 0,"../../../module/kit/audio/AudioManager":void 0,"../../../module/kit/event/ListenerManager":void 0}],card_L2_W12_D4_Game2:[function(t,e,o){"use strict";cc._RF.push(e,"17b87PtUEpOKJB9RWRHdKay","card_L2_W12_D4_Game2");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,r){var n,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var d=t.length-1;d>=0;d--)(n=t[d])&&(i=(a<3?n(i):a>3?n(e,o,i):n(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../module/kit/audio/AudioManager"),d=t("../../../module/kit/event/ListenerManager"),c=cc._decorator,s=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardId=0,e.cardAni=null,e.sound=null,e.targetText=null,e.angleNum=0,e._rigidBody=null,e.isLinearV=!1,e.isLinearVArr=[cc.v2(0,0)],e.linearV_arr=[cc.v2(300,-150),cc.v2(-300,-150),cc.v2(300,150),cc.v2(-300,150),cc.v2(300,0)],e.ang_arr=[5,-5,0,3,-3],e.TurnOver=!1,e}return n(e,t),e.prototype.start=function(){this.node.on("touchend",this.onTouched,this),this._rigidBody=this.node.getComponent(cc.RigidBody),this.node.angle=this.angleNum},e.prototype.onTouched=function(){var t=this;if(!this.TurnOver){var e="",o=-1;switch(this.cardId){case 0:e="chushi_",o=0;break;case 1:o=1,e="fuwuyuan_";break;case 2:o=2,e="jincha_";break;case 3:o=0,e=""}d.ListenerManager.dispatch("CardTouched",o),console.log(e),this.node.zIndex=99,this.cardAni&&(this.cardAni.clearTracks(),this.cardAni.setToSetupPose(),this.cardAni.setAnimation(0,e+"fan",!1),this.scheduleOnce(function(){var e=t.randomPos();t._rigidBody.linearVelocity=e,t.node.zIndex=0,i.default.playEffectAudioClip(t.sound,function(){d.ListenerManager.dispatch("CardTurnOver",t.cardId)})},.3)),this.TurnOver=!0}},e.prototype.turnBack=function(){var t=this,e="";switch(this.cardId){case 0:e="chushi_";break;case 1:e="fuwuyuan_";break;case 2:e="jincha_";break;case 3:e=""}this.node.zIndex=99,this.cardAni&&(this.cardAni.clearTracks(),this.cardAni.setAnimation(0,e+"zheng",!1),this.scheduleOnce(function(){t.node.zIndex=0},.3)),this.TurnOver=!1},e.prototype.randomPos=function(){if(!this.isLinearV)return this.isLinearVArr[0];var t=Math.floor(5*Math.random());return cc.log("random ====>> "+t),this.linearV_arr[t]},e.prototype.randomAng=function(){var t=Math.floor(5*Math.random());return cc.log("random ====>> "+t),this.ang_arr[t]},e.prototype.onDestroy=function(){},a([u],e.prototype,"cardId",void 0),a([u(sp.Skeleton)],e.prototype,"cardAni",void 0),a([u(cc.AudioClip)],e.prototype,"sound",void 0),a([u(cc.Texture2D)],e.prototype,"targetText",void 0),a([u(cc.Integer)],e.prototype,"angleNum",void 0),a([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../module/kit/audio/AudioManager":void 0,"../../../module/kit/event/ListenerManager":void 0}]},{},["L2_W13_D2_Game1","card_L2_W12_D4_Game2"]);