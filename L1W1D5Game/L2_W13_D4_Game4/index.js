window.__require=function e(t,o,n){function i(s,a){if(!o[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var p=o[s]={exports:{}};t[s][0].call(p.exports,function(e){return i(t[s][1][e]||e)},p,p.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({L2_W13_D4_G4_Board:[function(e,t,o){"use strict";cc._RF.push(t,"ca13dDZxvVANYMkqy1IK8pr","L2_W13_D4_G4_Board");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.knowledge=null,t.image=null,t}return i(t,e),t.prototype.show=function(e,t,o){cc.tween(this.node).to(2,{x:225}).call(function(){o&&o.apply(null)}).start()},t.prototype.hide=function(){this.node.active=!1},r([c(cc.Label)],t.prototype,"knowledge",void 0),r([c(cc.Sprite)],t.prototype,"image",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],L2_W13_D4_G4_Collection:[function(e,t,o){"use strict";cc._RF.push(t,"7dcfcO5zgRNZalnZJWOHiZ2","L2_W13_D4_G4_Collection");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./L2_W13_D4_G4_Config"),a=cc._decorator,c=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=0,t}return i(t,e),t.prototype.onLoad=function(){this.mCollected=!1,this.mSprite=this.getComponentInChildren(cc.Sprite),this.mLabel=this.getComponentInChildren(cc.Label),this.mCollider=this.node.getChildByName("collider")},t.prototype.onDestroy=function(){cc.Tween.stopAllByTarget(this.node)},t.prototype.startClip=function(){var e;if(0==this.type)e=cc.tween(this.node).to(1.2,{scale:1.1}).to(1.2,{scale:.9});else{var t=this.node.y;e=cc.tween(this.node).to(1.2,{y:t+10}).to(1.2,{y:t-10})}cc.tween(this.node).repeatForever(e).start()},t.prototype.setCollectionImage=function(e){this.mSprite&&(this.mSprite.spriteFrame=e,this.mLabel&&(this.mLabel.string=""),this.mSprite.node.scale=0==this.type?.35:.65,this.startClip())},t.prototype.setKnowledge=function(e){this.mLabel&&(e&&(e.includes("?")||e.includes(".")||e.includes(",")?this.mLabel.string=e.substring(0,e.length-1):this.mLabel.string=e),this.mSprite.spriteFrame=null)},t.prototype.checkCollection=function(e){if(!this.mCollected&&!s.GameConfig.GamePaused){var t=this.mCollider.getBoundingBoxToWorld();if(e.intersects(t)){if(1==this.type){var o=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);s.EventCenter.dispatchEvent(new s.default("onCollectKnowledge",o))}else s.EventCenter.dispatchEvent(new s.default("onCollectPower"));this.collecting()}}},t.prototype.resetNode=function(){cc.Tween.stopAllByTarget(this.node),this.mSprite.node.scale=0==this.type?.35:.65,this.node.opacity=255,this.node.scale=1,this.mCollected=!1},t.prototype.collecting=function(){this.mCollected=!0,cc.tween(this.node).to(.35,{opacity:0,scale:0},cc.easeCubicActionOut()).start()},Object.defineProperty(t.prototype,"collected",{get:function(){return this.mCollected},enumerable:!1,configurable:!0}),r([l({tooltip:"\u6536\u96c6\u7269\u7c7b\u578b,0\u80fd\u91cf\u5757,1\u77e5\u8bc6\u70b9"})],t.prototype,"type",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./L2_W13_D4_G4_Config":"L2_W13_D4_G4_Config"}],L2_W13_D4_G4_Config:[function(e,t,o){"use strict";cc._RF.push(t,"e6755ge0thJjbmVJ3XaP2QZ","L2_W13_D4_G4_Config");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfig=o.Audios=o.Animations=o.RoleStatus=o.EventCenter=void 0,o.EventCenter=new cc.EventTarget;var r=function(e){function t(t,o){var n=e.call(this,t,!0)||this;return n.mData=o,n}return i(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.mData},enumerable:!1,configurable:!0}),t}(cc.Event);o.default=r,function(e){e[e.Idle=0]="Idle",e[e.Jump=1]="Jump",e[e.Run=2]="Run",e[e.Fall=3]="Fall",e[e.Platform=4]="Platform",e[e.PlatformJump=5]="PlatformJump",e[e.PlatformRun=6]="PlatformRun",e[e.CatchRun=7]="CatchRun",e[e.Fever=8]="Fever"}(o.RoleStatus||(o.RoleStatus={})),o.Animations={Idle:"zhanli_1",IdleWatch:"zhanli_2",Run:"huahuaban",FeverRun:"feverhuahuaban",PlatformRun:"hualangan",CatchRun:"zhuazhuagan",Fall:"luoxia",Jump:"qitiao",JumpLoop:"tiao"},o.Audios={Bgm:"BGM_huabanpaoku_03",Jump:"SE_huabanpaoku_01",Power:"SE_huabanpaoku_02",Fever:"SE_huabanpaoku_03",ClickAndListen:"click_and_listen",He:"he",She:"she",Is:"is",A:"a",Driver:"driver",Nurse:"nurse",Chef:"chef",Sentence1:"He_is_a_driver",Sentence2:"She_is_a_nurse",Sentence3:"He_is_a_chef"},o.GameConfig={MapWidth:1784,MapHeight:1002,DistantSpeed:2,FrontSpeed:6,MapMinX:-1559,MapMaxX:2009,RoleJumpSpeedY:18,Gravity:.8,GamePaused:!0,FeverDurationTime:1e4,Configs:[{knowledge:["He","is","a","driver."],sentenceImg:"driver",audios:[o.Audios.He,o.Audios.Is,o.Audios.A,o.Audios.Driver],audio:o.Audios.Sentence1,totalCollectCount:4,totalPowerCount:20},{knowledge:["She","is","a","nurse."],sentenceImg:"nurse",audios:[o.Audios.She,o.Audios.Is,o.Audios.A,o.Audios.Nurse],audio:o.Audios.Sentence2,totalCollectCount:4,totalPowerCount:20},{knowledge:["He","is","a","chef."],sentenceImg:"chef",audios:[o.Audios.He,o.Audios.Is,o.Audios.A,o.Audios.Chef],audio:o.Audios.Sentence3,totalCollectCount:4,totalPowerCount:20}]},cc._RF.pop()},{}],L2_W13_D4_G4_ItemLayer:[function(e,t,o){"use strict";cc._RF.push(t,"86436I43ldJ04unsojuhizC","L2_W13_D4_G4_ItemLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./L2_W13_D4_G4_Collection"),a=cc._decorator,c=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){var e=this;this.mCollections=[],this.node.children.map(function(t){"collection"==t.name&&e.mCollections.push(t)})},t.prototype.resetLayer=function(){for(var e=0;e<this.mCollections.length;e++){var t=this.mCollections[e];t&&t.getComponent(s.default).resetNode()}},Object.defineProperty(t.prototype,"collections",{get:function(){return this.mCollections||[]},enumerable:!1,configurable:!0}),r([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./L2_W13_D4_G4_Collection":"L2_W13_D4_G4_Collection"}],L2_W13_D4_G4_Light:[function(e,t,o){"use strict";cc._RF.push(t,"ff3216S99pKLb9X2F33Vh+T","L2_W13_D4_G4_Light");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){var e=cc.tween(this.node).to(1,{opacity:0},cc.easeCubicActionOut()).delay(.2).to(1,{opacity:255},cc.easeCubicActionOut());cc.tween(this.node).repeatForever(e).start()},t.prototype.onDestroy=function(){cc.Tween.stopAllByTarget(this.node),this.node.opacity=255},r([a],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],L2_W13_D4_G4_Map:[function(e,t,o){"use strict";cc._RF.push(t,"d75738NEP9I5oUhwgQBCzSg","L2_W13_D4_G4_Map");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./L2_W13_D4_G4_Config"),a=cc._decorator,c=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skip=!1,t.skipNum=1,t.speed=5,t}return i(t,e),t.prototype.onLoad=function(){this.skipNum&&this.skip&&(this.mSkip=0)},t.prototype.update=function(){s.GameConfig.GamePaused||(this.skip?(this.mSkip++,this.mSkip>=this.skipNum&&(this.mSkip=0,this.node.x-=this.speed,this.node.x<=s.GameConfig.MapMinX&&(this.node.x=s.GameConfig.MapMaxX-(s.GameConfig.MapMinX-this.node.x)))):(this.node.x-=this.speed,this.node.x<=s.GameConfig.MapMinX&&(this.node.x=s.GameConfig.MapMaxX-(s.GameConfig.MapMinX-this.node.x))))},r([l({tooltip:"\u662f\u5426\u8df3\u5e27"})],t.prototype,"skip",void 0),r([l({tooltip:"\u8df3\u5e27\u6570, skip\u4e3atrue\u65f6\u6709\u7528"})],t.prototype,"skipNum",void 0),r([l({tooltip:"\u79fb\u52a8\u901f\u5ea6"})],t.prototype,"speed",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./L2_W13_D4_G4_Config":"L2_W13_D4_G4_Config"}],L2_W13_D4_G4_MaskProgress:[function(e,t,o){"use strict";cc._RF.push(t,"2a02925cJRCmJFeispRb5Bu","L2_W13_D4_G4_MaskProgress");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isHorizontal=!0,t}return i(t,e),t.prototype.onLoad=function(){this.mCurValue=0,this.mMask=this.getComponentInChildren(cc.Mask),this.isHorizontal?(this.mMask.node.width=0,this.mFullValue=this.mMask.node.parent.width):(this.mMask.node.height=0,this.mFullValue=this.mMask.node.parent.height)},Object.defineProperty(t.prototype,"progress",{set:function(e){e<this.mCurValue&&1!=this.mCurValue&&cc.log("tag:"+this.name+", value:"+e),this.mCurValue=e,this.isHorizontal?this.mMask.node.width=this.mFullValue*this.mCurValue:this.mMask.node.height=this.mFullValue*this.mCurValue},enumerable:!1,configurable:!0}),r([c({tooltip:"\u662f\u5426\u662f\u6a2a\u5411\u8fdb\u5ea6"})],t.prototype,"isHorizontal",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],L2_W13_D4_G4_Platform:[function(e,t,o){"use strict";cc._RF.push(t,"44cb8rTiMxN9IduhQQLYX34","L2_W13_D4_G4_Platform");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./L2_W13_D4_G4_Config"),a=cc._decorator,c=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skip=!1,t.skipNum=1,t.speed=5,t.eventTag="showOtherPlatform",t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.mDispatched=!1,this.skipNum&&this.skip&&(this.mSkip=0),this.tickX=cc.winSize.width/2-this.node.width,this.hideX=-this.node.width-cc.winSize.width/2,this.mCollections=[],this.node.children.map(function(t){"collection"==t.name&&e.mCollections.push(t)})},t.prototype.update=function(){!s.GameConfig.GamePaused&&this.node.active&&(this.skip?(this.mSkip++,this.mSkip>=this.skipNum&&(this.mSkip=0,this.node.x-=this.speed,this.node.x<=this.hideX&&(this.node.x=5269-(this.hideX-this.node.x),s.EventCenter.dispatchEvent(new s.default(this.eventTag,this.node.x))))):(this.node.x-=this.speed,this.node.x<=this.hideX&&(this.node.x=5269-(this.hideX-this.node.x),s.EventCenter.dispatchEvent(new s.default(this.eventTag,this.node)))))},Object.defineProperty(t.prototype,"collections",{get:function(){return this.mCollections||[]},enumerable:!1,configurable:!0}),r([l({tooltip:"\u662f\u5426\u8df3\u5e27"})],t.prototype,"skip",void 0),r([l({tooltip:"\u8df3\u5e27\u6570, skip\u4e3atrue\u65f6\u6709\u7528"})],t.prototype,"skipNum",void 0),r([l({tooltip:"\u79fb\u52a8\u901f\u5ea6"})],t.prototype,"speed",void 0),r([l({tooltip:"\u4e8b\u4ef6\u6807\u8bc6"})],t.prototype,"eventTag",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./L2_W13_D4_G4_Config":"L2_W13_D4_G4_Config"}],L2_W13_D4_G4_Role:[function(e,t,o){"use strict";cc._RF.push(t,"18f7dfWjDVE77oo3gSyF98w","L2_W13_D4_G4_Role");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./L2_W13_D4_G4_Config"),a=cc._decorator,c=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mGravity=.8,t.mIsFever=!1,t}return i(t,e),t.prototype.onLoad=function(){this.mJumpRate=1,this.mSpine=this.getComponent(sp.Skeleton),this.mFeverSpine=this.getComponentInChildren(sp.Skeleton),this.mFeverSpine.node.active=!1,this.mJumping=!1,this.mFalling=!1,this.mJumpSpeed=cc.Vec2.ZERO,this.mBaseY=this.node.y,this.playIdle()},t.prototype.update=function(){s.GameConfig.GamePaused||(this.mJumping||this.mFalling?(this.node.y+=this.mJumpSpeed.x,this.node.y+=this.mJumpSpeed.y,this.mJumpSpeed.y-=this.mGravity,this.node.y<=this.mBaseY&&(this.node.y=this.mBaseY,this.mJumping=!1,this.mFalling=!1,this.onLanding())):this.node.y>this.mBaseY&&0==this.mJumpSpeed.y&&(this.mFalling=!0))},Object.defineProperty(t.prototype,"status",{get:function(){return this.mStatus},enumerable:!1,configurable:!0}),t.prototype.playIdle=function(){this.mStatus=s.RoleStatus.Idle,this.playSpineAnimation(this.mSpine,s.Animations.Idle)},t.prototype.playIdleWatch=function(){this.mStatus=s.RoleStatus.Idle,this.playSpineAnimation(this.mSpine,s.Animations.IdleWatch),this.mIsFever&&(this.mJumpRate=1,this.mIsFever=!1,clearTimeout(this.mFeverTimer),s.EventCenter.dispatchEvent(new s.default("feverComplete")),this.mFeverTimer=null,this.mFeverSpine.node.active=!1)},t.prototype.playJump=function(){var e=this,t=!1;switch(this.mStatus){case s.RoleStatus.Run:this.mStatus=s.RoleStatus.Jump,this.playSpineAnimation(this.mSpine,s.Animations.Jump,!1,function(){e.playSpineAnimation(e.mSpine,s.Animations.JumpLoop)}),this.mJumping=!0,this.mJumpSpeed.y=s.GameConfig.RoleJumpSpeedY*this.mJumpRate,t=!0;break;case s.RoleStatus.PlatformRun:this.mStatus=s.RoleStatus.PlatformJump,this.playSpineAnimation(this.mSpine,s.Animations.Jump,!1,function(){e.playSpineAnimation(e.mSpine,s.Animations.JumpLoop)}),this.mJumping=!0,this.mJumpSpeed.y=s.GameConfig.RoleJumpSpeedY*this.mJumpRate,t=!0;break;case s.RoleStatus.Fever:this.mJumping||(this.mJumping=!0,this.mJumpSpeed.y=s.GameConfig.RoleJumpSpeedY*this.mJumpRate,t=!0)}return t},t.prototype.playRun=function(){this.mStatus=s.RoleStatus.Run,this.mSpine.timeScale=1,this.playSpineAnimation(this.mSpine,s.Animations.Run)},t.prototype.playFeverRun=function(){var e=this;this.mJumpRate=1.3,this.mFeverSpine.node.active=!0,s.EventCenter.dispatchEvent(new s.default("startFever")),this.mStatus=s.RoleStatus.Fever,this.mSpine.timeScale=1,this.playSpineAnimation(this.mSpine,s.Animations.FeverRun),this.mFeverTimer=setTimeout(function(){e.mIsFever&&!s.GameConfig.GamePaused&&(e.mJumpRate=1,e.mFeverSpine.node.active=!1,s.EventCenter.dispatchEvent(new s.default("feverComplete")),e.mIsFever=!1,e.playRun())},1e4)},t.prototype.playPlatformRun=function(){this.mJumping=!1,this.mFalling=!1,this.mStatus=s.RoleStatus.PlatformRun,this.playSpineAnimation(this.mSpine,s.Animations.PlatformRun)},t.prototype.playCatch=function(){this.mJumping=!1,this.mFalling=!1,this.mStatus=s.RoleStatus.CatchRun,this.playSpineAnimation(this.mSpine,s.Animations.CatchRun,!0)},t.prototype.setFalling=function(e){void 0===e&&(e=!1),e&&(this.mJumpRate=1,this.mIsFever=!1,clearTimeout(this.mFeverTimer),this.mFeverTimer=null,this.mFeverSpine.node.active=!1),this.node.y>this.mBaseY&&(this.mJumpSpeed.y=0,this.mFalling=!0)},t.prototype.setFever=function(e){this.mIsFever=e,this.status==s.RoleStatus.Run&&this.playFeverRun()},t.prototype.onLanding=function(){this.mIsFever?this.playFeverRun():this.playRun()},t.prototype.playSpineAnimation=function(e,t,o,n,i){if(void 0===o&&(o=!0),void 0===i&&(i=!0),e){if(i&&e.animation==t)return void(n&&(n.apply(null),n=null));e.clearTracks(),e.setToSetupPose(),e.setAnimation(0,t,o),e.setCompleteListener(function(){n&&(n.apply(null),n=null)})}},r([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./L2_W13_D4_G4_Config":"L2_W13_D4_G4_Config"}],L2_W13_D4_G4:[function(e,t,o){"use strict";cc._RF.push(t,"572b2c7ttNFYo04/vnn2TbZ","L2_W13_D4_G4");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../module/component/feedBack/res/scripts/feedBackCtr"),a=e("../../../module/component/scripts/GameCompBase"),c=e("../../../module/kit/audio/AudioManager"),l=e("./L2_W13_D4_G4_Board"),p=e("./L2_W13_D4_G4_Collection"),u=e("./L2_W13_D4_G4_Config"),h=e("./L2_W13_D4_G4_ItemLayer"),m=e("./L2_W13_D4_G4_Map"),d=e("./L2_W13_D4_G4_MaskProgress"),f=e("./L2_W13_D4_G4_Platform"),_=e("./L2_W13_D4_G4_Role"),y=cc._decorator,g=y.ccclass,v=y.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roleNode=null,t.gameLayers=[],t.platforms=[],t.frontLayers=[],t.itemLayers=[],t.collections=[],t.meterials=[],t.Board=null,t.knowledgeNode=null,t.powerMask=null,t.powerSpine=null,t.mKnowledgeList=[],t.mRoundCompleted=!1,t}return i(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.initSentenceComponent().then(function(e){t.mSentence=e,t.mGameIndex&&t.resetGameData()}),this.initFeedBackComponent().then(function(e){t.mFeedBack=e}),this.initRecordComponent(),this.colliders=[],this.platforms.map(function(e){e.children.map(function(e){t.colliders.push(e.getChildByName("collider"))})}),this.gameLayers.map(function(e){e.getComponent(f.default).speed=12}),this.mPlatFormBaseX=-268,this.mKnowledgeList=this.knowledgeNode.getComponentsInChildren(cc.Label)},t.prototype.start=function(){e.prototype.start.call(this),this.mRole=this.roleNode.getComponentInChildren(_.default)},t.prototype.removeRecordComp=function(){var t=this;e.prototype.removeRecordComp.call(this),this.mGameIndex<u.GameConfig.Configs.length-1?(this.Board.hide(),this.resetGameData()):setTimeout(function(){t.gameEnd()},2e3)},t.prototype.update=function(){if(!u.GameConfig.GamePaused&&!this.mRoundCompleted){switch(this.mRole.status){case u.RoleStatus.PlatformRun:this.judgePlatformFall();break;case u.RoleStatus.CatchRun:this.judgeCatchFall();break;case u.RoleStatus.Jump:case u.RoleStatus.PlatformJump:this.judgeJumpCatch()}this.judgeCollection()}},t.prototype.onGameStart=function(){this.mGameIndex=-1,this.playSound(this.bundleName,"res/audios/"+u.Audios.Bgm,null,!1),this.mSentence&&this.resetGameData()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.delListener()},t.prototype.startGame=function(){var e=this;u.GameConfig.GamePaused=!1,this.mRole.playRun(),0==this.mGameIndex?setTimeout(function(){u.GameConfig.GamePaused=!0,e.guideByTypeShow(1),e.addListener()},400):this.addListener()},t.prototype.resetGameData=function(){this.onFeverComplete(),this.mRoundCompleted=!1,this.mCurCollectNum=0,this.mGameIndex++,this.mGameData=u.GameConfig.Configs[this.mGameIndex];for(var e,t=0;t<this.gameLayers.length;t++)(e=this.gameLayers[t]).active=!0,e.x=0==t?this.mPlatFormBaseX:e.width+this.mPlatFormBaseX,e.getComponent(f.default).speed=12;var o=this;this.knowledgeNode.active=!0,this.mKnowledgeList.map(function(e,t){e.node.active=t<o.mGameData.totalCollectCount,e.node.active&&(e.setMaterial(0,o.meterials[0]),e.string=o.mGameData.knowledge[t])}),this.setCollectionImages(),this.showSentence()},t.prototype.showSentence=function(){var e=this;this.mSentence&&(this.mSentence.node.active=!0,this.mSentence.showSentenceNode({name:"tigo",bundleName:this.bundleName,labelAudioUrl:"res/audios/"+this.mGameData.audio,label:this.mGameData.knowledge.join(" "),isSpScale:1,hideOtherRole:!0,itemSpPos:cc.v2(290,-52),spUrl:"res/images/"+this.mGameData.sentenceImg,hideTime:4}).then(function(){e.mSentence.node.active=!1,0==e.mGameIndex?e.playSound(e.bundleName,"res/audios/"+u.Audios.ClickAndListen,e.startGame.bind(e)):e.startGame()}))},t.prototype.roundComplete=function(){var e=this;this.mRoundCompleted=!0,this.mTempFb&&(this.mTempFb.parent&&this.mTempFb.parent.removeChild(this.mTempFb),this.mTempFb=null),this.gameLayers.map(function(e){e.active=!1}),this.mRole.setFalling(!0),this.mCurCollider=null,this.Board.show(this.mGameData.knowledge.join(" "),null,function(){u.GameConfig.GamePaused=!0,e.mRole.playIdleWatch(),e.knowledgeNode.active=!1,e.record({text:e.mGameData.knowledge.join(" "),soundsUrl:"res/audios/"+e.mGameData.audio,showImg:"res/images/tigoSay",textSize:e.mGameData.knowledge.length>5?18:25})})},t.prototype.addListener=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchEnd,this),u.EventCenter.on("showOtherPlatform",this.onShowOtherPlatform,this),u.EventCenter.on("onCollectPower",this.onCollectPower,this),u.EventCenter.on("onCollectKnowledge",this.showKnowledge,this),u.EventCenter.on("feverComplete",this.onFeverComplete,this),u.EventCenter.on("startFever",this.onStartFever,this)},t.prototype.delListener=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchEnd,this),u.EventCenter.off("showOtherPlatform",this.onShowOtherPlatform,this),u.EventCenter.off("onCollectPower",this.onCollectPower,this),u.EventCenter.off("onCollectKnowledge",this.showKnowledge,this),u.EventCenter.off("feverComplete",this.onFeverComplete,this),u.EventCenter.off("startFever",this.onStartFever,this)},t.prototype.onStartFever=function(){this.gameLayers.map(function(e){e.getComponent(f.default).speed=18}),this.frontLayers.map(function(e){e.getComponent(m.default).speed=18})},t.prototype.onFeverComplete=function(){this.gameLayers.map(function(e){e.getComponent(f.default).speed=12}),this.frontLayers.map(function(e){e.getComponent(m.default).speed=12}),this.mCurPowerNum=0,this.powerMask.progress=0,this.powerSpine.node.active=!1,this.mFever=!1},t.prototype.onCollectPower=function(){this.playSound(this.bundleName,"res/audios/"+u.Audios.Power),this.mCurPowerNum++;var e=this.mCurPowerNum/this.mGameData.totalPowerCount;e>=1&&(e=1,this.mFever||this.mRole.status!=u.RoleStatus.Jump&&this.mRole.status!=u.RoleStatus.Run||(this.powerSpine.node.active=!0,this.mFever=!0,this.mRole.setFever(!0),this.playSound(this.bundleName,"res/audios/"+u.Audios.Fever))),this.powerMask.progress=e},t.prototype.showKnowledge=function(e){var t,o=this,n=e.data,i=cc.instantiate(this.mFeedBack.node);this.gameLayers[0].x<cc.winSize.width/2-this.gameLayers[0].width?(t=this.gameLayers[0].convertToNodeSpaceAR(n),this.gameLayers[0].addChild(i)):(t=this.gameLayers[1].convertToNodeSpaceAR(n),this.gameLayers[1].addChild(i)),i.x=t.x,i.y=t.y,this.mTempFb=i,i.getComponent(s.default).showRightAnimation(cc.v3(t.x,t.y,0),function(){i.parent&&i.parent.removeChild(i),o.mTempFb=null}),this.mKnowledgeList[this.mCurCollectNum].setMaterial(0,this.meterials[1]),this.playSound(this.bundleName,"res/audios/"+this.mGameData.audios[this.mCurCollectNum]),this.mCurCollectNum++,this.setNextCollectionKnowledge(),this.mCurCollectNum>=this.mGameData.totalCollectCount&&(this.delListener(),this.roundComplete())},t.prototype.setCollectionImages=function(){for(var e,t=0;t<this.itemLayers.length;t++){(e=this.itemLayers[t]).getComponent(h.default).resetLayer();for(var o=e.getComponent(h.default).collections,n=0,i=null;n<o.length;n++)(i=o[n].getComponent(p.default)).resetNode(),0==i.type?i.setCollectionImage(this.collections[this.collections.length-1]):i.setKnowledge(this.mGameData.knowledge[this.mCurCollectNum])}},t.prototype.setNextCollectionKnowledge=function(){for(var e=0;e<this.itemLayers.length;e++)for(var t=this.itemLayers[e].getComponent(h.default).collections,o=0;o<t.length;o++){var n=t[o].getComponent(p.default);1==n.type&&n.setKnowledge(this.mGameData.knowledge[this.mCurCollectNum])}},t.prototype.onTouchEnd=function(){this.mRole.status!=u.RoleStatus.Fall&&this.mRole.status!=u.RoleStatus.CatchRun?(this.guideHide(),u.GameConfig.GamePaused=!1,this.roleNode.getComponentInChildren(_.default).playJump()&&this.playSound(this.bundleName,"res/audios/"+u.Audios.Jump)):cc.log("touch return "+this.mRole.status)},t.prototype.onShowOtherPlatform=function(e){var t=e.data;this.gameLayers.map(function(e){e==t&&e.getComponentInChildren(h.default).resetLayer()})},t.prototype.judgeCollection=function(){var e=this.mRole.node.getChildByName("collider").getBoundingBoxToWorld();this.itemLayers.map(function(t){t.active&&t.getComponent(h.default).collections.map(function(t){t.getComponent(p.default).checkCollection(e)})})},t.prototype.judgePlatformFall=function(){if(this.mCurCollider){var e=this.mCurCollider.getBoundingBoxToWorld(),t=this.mRole.node.convertToWorldSpaceAR(cc.Vec2.ZERO);e.xMax<t.x&&(this.mRole.setFalling(),this.mCurCollider=null)}},t.prototype.judgeJumpCatch=function(){var e=this;this.colliders.forEach(function(t){if(t.parent.active&&(!e.mCurCollider||e.mCurCollider!=t)){var o=t.getBoundingBoxToWorld(),n=void 0,i=void 0;t.parent.name.includes("Top")?(n=e.mRole.node.convertToWorldSpaceAR(cc.v2(60,160)),Math.abs(n.y-o.yMin)<=8&&n.x>=o.xMin-20&&n.x<o.xMax-20&&(e.mCurCollider=t,i=e.roleNode.convertToNodeSpaceAR(cc.v2(n.x,o.yMax)),e.mRole.playCatch(),e.mRole.node.x=i.x-60,e.mRole.node.y=i.y-160)):(n=e.mRole.node.convertToWorldSpaceAR(cc.Vec2.ZERO),Math.abs(n.y-o.yMax)<=8&&n.x>=o.xMin-20&&n.x<o.xMax-20&&(e.mRole.playPlatformRun(),e.mCurCollider=t,i=e.roleNode.convertToNodeSpaceAR(cc.v2(n.x,o.yMax)),e.mRole.node.x=i.x,e.mRole.node.y=i.y))}})},t.prototype.judgeCatchFall=function(){if(this.mCurCollider){var e=this.mCurCollider.getBoundingBoxToWorld(),t=this.mRole.node.convertToWorldSpaceAR(cc.v2(60,160));e.xMax<t.x&&(this.mRole.setFalling(),this.mCurCollider=null)}},t.prototype.playSound=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=!0),n?c.default.playEffect(e,t,function(){o&&(o.apply(null),o=null)}):c.default.playMusic(e,t)},r([v({type:cc.Node,tooltip:"\u89d2\u8272\u8282\u70b9"})],t.prototype,"roleNode",void 0),r([v({type:[cc.Node],tooltip:"\u6e38\u620f\u5c42"})],t.prototype,"gameLayers",void 0),r([v({type:[cc.Node],tooltip:""})],t.prototype,"platforms",void 0),r([v({type:[cc.Node],tooltip:"\u524d\u666f\u5c42"})],t.prototype,"frontLayers",void 0),r([v({type:[cc.Node],tooltip:""})],t.prototype,"itemLayers",void 0),r([v({type:[cc.SpriteFrame],tooltip:"\u6536\u96c6\u7269icon"})],t.prototype,"collections",void 0),r([v([cc.Material])],t.prototype,"meterials",void 0),r([v(l.default)],t.prototype,"Board",void 0),r([v(cc.Node)],t.prototype,"knowledgeNode",void 0),r([v(d.default)],t.prototype,"powerMask",void 0),r([v(sp.Skeleton)],t.prototype,"powerSpine",void 0),r([g],t)}(a.default);o.default=C,cc._RF.pop()},{"../../../module/component/feedBack/res/scripts/feedBackCtr":void 0,"../../../module/component/scripts/GameCompBase":void 0,"../../../module/kit/audio/AudioManager":void 0,"./L2_W13_D4_G4_Board":"L2_W13_D4_G4_Board","./L2_W13_D4_G4_Collection":"L2_W13_D4_G4_Collection","./L2_W13_D4_G4_Config":"L2_W13_D4_G4_Config","./L2_W13_D4_G4_ItemLayer":"L2_W13_D4_G4_ItemLayer","./L2_W13_D4_G4_Map":"L2_W13_D4_G4_Map","./L2_W13_D4_G4_MaskProgress":"L2_W13_D4_G4_MaskProgress","./L2_W13_D4_G4_Platform":"L2_W13_D4_G4_Platform","./L2_W13_D4_G4_Role":"L2_W13_D4_G4_Role"}]},{},["L2_W13_D4_G4","L2_W13_D4_G4_Board","L2_W13_D4_G4_Collection","L2_W13_D4_G4_Config","L2_W13_D4_G4_ItemLayer","L2_W13_D4_G4_Light","L2_W13_D4_G4_Map","L2_W13_D4_G4_MaskProgress","L2_W13_D4_G4_Platform","L2_W13_D4_G4_Role"]);